{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"OpenBoxes is an open-source supply chain management system designed to manage supplies and medications for healthcare facilities and disaster response operations. Browse Inventory # View Stock Card # View Stock History # Track Consumption # Inventory Summary # ... including many more features!","title":"Home"},{"location":"#browse_inventory","text":"","title":"Browse Inventory"},{"location":"#view_stock_card","text":"","title":"View Stock Card"},{"location":"#view_stock_history","text":"","title":"View Stock History"},{"location":"#track_consumption","text":"","title":"Track Consumption"},{"location":"#inventory_summary","text":"... including many more features!","title":"Inventory Summary"},{"location":"about/benefits/","text":"Benefits of using OpenBoxes # Free, open-source software # OpenBoxes is entirely free to use. This can be a significant advantage in the face of limited operational resources. Inventory Visibility Tracking # Not only does OpenBoxes allow you to view your inventory at a glance, it provides a historical record of inventory transactions. This data is invaluable to accurately understand and forecast demand for future planning periods. OpenBoxes allows you to set inventory max, min, and reorder points \u2014 this allows the user to quickly assess if supplies are overstocked, at appropriate stock levels, or in danger of being out of stock if not reordered soon. OpenBoxes allows you to record the movement of goods from multiple sources and across different levels of the organization: From central warehouses to your facility depot From other hospital facilities to your facility depot From vendor warehouses to your facility depot From one warehouse to other warehouses within your network From your facility depot to pharmacies and wards within your facility Record lot numbers for items that have an expiry date to help identify stock that has expired or is about to expire. Lot numbers also provide a means to locate stock when a manufacturer recalls a certain item. Record serial numbers for items that require lifecycle management (including assets such as computers, routers, hospital beds). Upload and manage documents for each product (e.g. data sheets, product manuals, hazardous material handling requirements). Shipping Documents # OpenBoxes offers the user the ability to produce Certificates of Donation, Packing Lists, and other documents required for shipping with just a few mouse clicks. Documents can also be uploaded to OpenBoxes to allow operational leadership to save all the relevant shipping documents to a particular shipment within the system. Grant Compliance # Certain grants require that inventory be tracked in very specific ways. Using OpenBoxes comprehensively would allow a site to account for the movement of goods bought with grant monies from vendor, to country, to facility \u2014 and the consumption of those items at a facility level. Integration with Demand Forecasting software # While the OpenBoxes stock usage history can provide a high-level picture of future demand for any particular item, integrating with demand forecasting software will allow those processes to be automated and more accurate. Integration with Data Replication software # While OpenBoxes supports a hierachy of locations, sometimes it's not possible for all locations to access a centralized server due to power and Internet limitations at that site. In this case, you can manage multiple server installations (a central OpenBoxes server for most locations with good Internet) and separate OB server for each location that does not have a reliable connection to the Internet. Using SymmetricDS , you can bi-directionally sync all data changes between each of these servers.","title":"Benefits"},{"location":"about/benefits/#benefits_of_using_openboxes","text":"","title":"Benefits of using OpenBoxes"},{"location":"about/benefits/#free_open-source_software","text":"OpenBoxes is entirely free to use. This can be a significant advantage in the face of limited operational resources.","title":"Free, open-source software"},{"location":"about/benefits/#inventory_visibility_tracking","text":"Not only does OpenBoxes allow you to view your inventory at a glance, it provides a historical record of inventory transactions. This data is invaluable to accurately understand and forecast demand for future planning periods. OpenBoxes allows you to set inventory max, min, and reorder points \u2014 this allows the user to quickly assess if supplies are overstocked, at appropriate stock levels, or in danger of being out of stock if not reordered soon. OpenBoxes allows you to record the movement of goods from multiple sources and across different levels of the organization: From central warehouses to your facility depot From other hospital facilities to your facility depot From vendor warehouses to your facility depot From one warehouse to other warehouses within your network From your facility depot to pharmacies and wards within your facility Record lot numbers for items that have an expiry date to help identify stock that has expired or is about to expire. Lot numbers also provide a means to locate stock when a manufacturer recalls a certain item. Record serial numbers for items that require lifecycle management (including assets such as computers, routers, hospital beds). Upload and manage documents for each product (e.g. data sheets, product manuals, hazardous material handling requirements).","title":"Inventory Visibility &amp; Tracking"},{"location":"about/benefits/#shipping_documents","text":"OpenBoxes offers the user the ability to produce Certificates of Donation, Packing Lists, and other documents required for shipping with just a few mouse clicks. Documents can also be uploaded to OpenBoxes to allow operational leadership to save all the relevant shipping documents to a particular shipment within the system.","title":"Shipping Documents"},{"location":"about/benefits/#grant_compliance","text":"Certain grants require that inventory be tracked in very specific ways. Using OpenBoxes comprehensively would allow a site to account for the movement of goods bought with grant monies from vendor, to country, to facility \u2014 and the consumption of those items at a facility level.","title":"Grant Compliance"},{"location":"about/benefits/#integration_with_demand_forecasting_software","text":"While the OpenBoxes stock usage history can provide a high-level picture of future demand for any particular item, integrating with demand forecasting software will allow those processes to be automated and more accurate.","title":"Integration with Demand &amp; Forecasting software"},{"location":"about/benefits/#integration_with_data_replication_software","text":"While OpenBoxes supports a hierachy of locations, sometimes it's not possible for all locations to access a centralized server due to power and Internet limitations at that site. In this case, you can manage multiple server installations (a central OpenBoxes server for most locations with good Internet) and separate OB server for each location that does not have a reliable connection to the Internet. Using SymmetricDS , you can bi-directionally sync all data changes between each of these servers.","title":"Integration with Data Replication software"},{"location":"about/considerations/","text":"Considerations # While open-source software is free to download and use, there are costs and limitations that should be taken into consideration before you begin the adoption process. System Administration # An OpenBoxes installation requires a system administrator to install, monitor, maintain, and upgrade the software and server components throughout the software lifecycle. These tasks require competent IT personnel. Time # While OpenBoxes has been streamlined considerably since its creation, there may be significant time costs associated with using this inventory management system. Examples of potentially time-intensive tasks include, but are not limited to: Master Data Management e.g. creating products to track within the system Periodic Reviews e.g. stock counts, min/max/reorder review, fast moving vs. obsolete inventory Data Entry e.g. recording and adjusting inventory Forecasting e.g. period review of demand/consumption data, disease incidence, population growth, service expansion within the hospital Training # While OpenBoxes is a relatively simple inventory management tool, some training is required to allow users to successfully utilize all of the functionality offered by the system. Hospital-Centric # While OpenBoxes could be used by small-to-medium-sized enterprises (SME) in most industries, there are some limitations that might make it difficult to use: 1) OpenBoxes does not have a Sales Order feature yet. There's not an overwhleming need for such a feature within the hospital. For now, you can create a new location to represent a customer, generate a PO for that location (customer) against your facility depot, and fulfill that PO in order to approximate a Sales Order. This feature will eventually be implemented as pharmacists would like to generate a sales order when filling a prescription for a patient. 2) The Requisition feature (i.e. Pull Replenishment) which is used to move stock from a facility depot to a point-of-service location (e.g. ward, pharmacy) is primarily used within the depot. In other words, Requisitions are created by a warehouse manager within the hospital depot instead of by the requesting party (i.e. a nurse or pharmacist). This was a decision made in order to save time and avoid the need for adding time-intensive processes for nurses and pharmacists. In the use case at Mirebalis Hospital, nurses and pharmacists will send a paper requisitions to the hospital depot, warehouse staff will enter the requisition into the system and proceed to fulfill that requisition. OpenBoxes will eventually have a point-of-service (POS) client for nurses and pharmacists to request stock from the depot, but that feature is not currently in development. Static Role-based Authorization # The OpenBoxes authorization mechanism currently only provides three roles (Admin, Manager, and Browser). This limits the ability for an administrator to create roles based on fine-grained permissions. For example, all Manager users have the ability to perform CRUD actions (create, retrieve, update, delete) on most objects within the system. However, I cannot create a new role (e.g. Shift Manager) that allows a user to create a Product, but not a Purchase Order. A more fine-grained approach will be implemented in a future version of OpenBoxes.","title":"Considerations"},{"location":"about/considerations/#considerations","text":"While open-source software is free to download and use, there are costs and limitations that should be taken into consideration before you begin the adoption process.","title":"Considerations"},{"location":"about/considerations/#system_administration","text":"An OpenBoxes installation requires a system administrator to install, monitor, maintain, and upgrade the software and server components throughout the software lifecycle. These tasks require competent IT personnel.","title":"System Administration"},{"location":"about/considerations/#time","text":"While OpenBoxes has been streamlined considerably since its creation, there may be significant time costs associated with using this inventory management system. Examples of potentially time-intensive tasks include, but are not limited to: Master Data Management e.g. creating products to track within the system Periodic Reviews e.g. stock counts, min/max/reorder review, fast moving vs. obsolete inventory Data Entry e.g. recording and adjusting inventory Forecasting e.g. period review of demand/consumption data, disease incidence, population growth, service expansion within the hospital","title":"Time"},{"location":"about/considerations/#training","text":"While OpenBoxes is a relatively simple inventory management tool, some training is required to allow users to successfully utilize all of the functionality offered by the system.","title":"Training"},{"location":"about/considerations/#hospital-centric","text":"While OpenBoxes could be used by small-to-medium-sized enterprises (SME) in most industries, there are some limitations that might make it difficult to use: 1) OpenBoxes does not have a Sales Order feature yet. There's not an overwhleming need for such a feature within the hospital. For now, you can create a new location to represent a customer, generate a PO for that location (customer) against your facility depot, and fulfill that PO in order to approximate a Sales Order. This feature will eventually be implemented as pharmacists would like to generate a sales order when filling a prescription for a patient. 2) The Requisition feature (i.e. Pull Replenishment) which is used to move stock from a facility depot to a point-of-service location (e.g. ward, pharmacy) is primarily used within the depot. In other words, Requisitions are created by a warehouse manager within the hospital depot instead of by the requesting party (i.e. a nurse or pharmacist). This was a decision made in order to save time and avoid the need for adding time-intensive processes for nurses and pharmacists. In the use case at Mirebalis Hospital, nurses and pharmacists will send a paper requisitions to the hospital depot, warehouse staff will enter the requisition into the system and proceed to fulfill that requisition. OpenBoxes will eventually have a point-of-service (POS) client for nurses and pharmacists to request stock from the depot, but that feature is not currently in development.","title":"Hospital-Centric"},{"location":"about/considerations/#static_role-based_authorization","text":"The OpenBoxes authorization mechanism currently only provides three roles (Admin, Manager, and Browser). This limits the ability for an administrator to create roles based on fine-grained permissions. For example, all Manager users have the ability to perform CRUD actions (create, retrieve, update, delete) on most objects within the system. However, I cannot create a new role (e.g. Shift Manager) that allows a user to create a Product, but not a Purchase Order. A more fine-grained approach will be implemented in a future version of OpenBoxes.","title":"Static Role-based Authorization"},{"location":"about/release-notes/","text":"Release Notes # See GitHub for Release Notes .","title":"Release Notes"},{"location":"about/release-notes/#release_notes","text":"See GitHub for Release Notes .","title":"Release Notes"},{"location":"api-guide/","text":"Overview # Authentication # In order to authenticate, you need a valid user account. In order to get the full benefits of the API your user should probably be in role Superuser. Once you have created a Superuser user, you can attempt to authenticate using your username and password. $ curl -i -c cookies.txt -X POST -H Content-Type: application/json \\ -d '{ username : jmiranda , password : password }' https://openboxes.ngrok.io/openboxes/api/login HTTP/1.1 200 OK Server: Apache-Coyote/1.1 Set-Cookie: JSESSIONID=062F3CF6129FC12B6BDD4D02E15BA531; Path=/openboxes Content-Type: text/html;charset=utf-8 Transfer-Encoding: chunked Date: Sun, 10 Jun 2018 21:21:10 GMT Authentication was successful NOTE: -c cookies option will create a cookies file (cookies.txt) and save your session information to be used in subsequent requests. This saves a huge amount of headache when you're testing the API. Cookie # Once you have authenticated, you have two options to Cookie Header # Copy the JSESSIONID Cookie from the response header to make subsequent authenticated requests to the API $ curl -i -X POST -H Content-Type: application/json \\ -H Cookie: JSESSIONID=062F3CF6129FC12B6BDD4D02E15BA531 \\ https://openboxes.ngrok.io/openboxes/api/categories Cookie File # Or use -b cookies.txt to read from a cookies file and start making requests against the API. NOTE: You'll need to use the -c cookies.txt on the login request in order to generate the proper cookies. $ curl -i -X POST -H Content-Type: application/json -b cookies.txt \\ https://openboxes.ngrok.io/openboxes/api/categories Logout # If you want to end your session, you can POST a request to the logout endpoint. $ curl -i -X POST -H Content-Type: application/json -b cookies.txt \\ https://openboxes.ngrok.io/openboxes/api/logout Exceptions # Unauthorized Access # If you try to access the API with no cookies (or an invalid/stale cookie) you'll receive the following error and will need to (re-)authenticate $ curl -i -X POST -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/categories HTTP/1.1 401 Unauthorized Server: Apache-Coyote/1.1 Set-Cookie: JSESSIONID=905D991AE2661B0FDD7F6FB140EB97D8; Path=/openboxes Content-Type: application/json;charset=UTF-8 Transfer-Encoding: chunked Date: Thu, 21 Jun 2018 04:21:29 GMT { errorCode :401, errorMessage : Unauthorized user: Request categoryApi:save requires authentication } Pagination # All API endpoints will return all objects if pagination parameters are not provided. $ curl -X POST -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/products?offset=0 max=1 | jsonlint [ { id : ff80818155df9de40155df9e329b0009 , productCode : 00003 , name : Aspirin 20mg , category : { id : 1 , name : Medicines }, description : null, dateCreated : 2016-07-12T14:58:55Z , lastUpdated : 2016-07-12T14:58:55Z } ] JSON Lint # While testing the API, I'd recommend installing jsonlint ... npm install jsonlint -g ... and piping all curl responses through it to get a pretty response. $ curl -X POST -H Content-Type: application/json https://openboxes.ngrok.io/openboxes/api/products?max=1 | jsonlint [ { id : ff80818155df9de40155df9e329b0009 , productCode : 00003 , name : Aspirin 20mg , category : { id : 1 , name : Medicines }, description : null, dateCreated : 2016-07-12T14:58:55Z , lastUpdated : 2016-07-12T14:58:55Z } ] NOTE: You'll need to remove the -i argument from the following examples to prevent parsing errors: % Total % Received % Xferd Average Speed Time Time Time Current Dload Upload Total Spent Left Speed 100 221 0 221 0 0 455 0 --:--:-- --:--:-- --:--:-- 455 Error: Parse error on line 1: SerP/1.1 200 OK ^ Expecting 'STRING', 'NUMBER', 'NULL', 'TRUE', 'FALSE', '{', '[', got 'undefined' at Object.parseError (/home/jmiranda/.nvm/versions/node/v6.6.0/lib/node_modules/jsonlint/lib/jsonlint.js:55:11) at Object.parse (/home/jmiranda/.nvm/versions/node/v6.6.0/lib/node_modules/jsonlint/lib/jsonlint.js:132:22) at parse (/home/jmiranda/.nvm/versions/node/v6.6.0/lib/node_modules/jsonlint/lib/cli.js:82:14) at Socket. anonymous (/home/jmiranda/.nvm/versions/node/v6.6.0/lib/node_modules/jsonlint/lib/cli.js:149:41) at emitNone (events.js:91:20) at Socket.emit (events.js:185:7) at endReadableNT (_stream_readable.js:974:12) at _combinedTickCallback (internal/process/next_tick.js:74:11) at process._tickCallback (internal/process/next_tick.js:98:9)","title":"Overview"},{"location":"api-guide/#overview","text":"","title":"Overview"},{"location":"api-guide/#authentication","text":"In order to authenticate, you need a valid user account. In order to get the full benefits of the API your user should probably be in role Superuser. Once you have created a Superuser user, you can attempt to authenticate using your username and password. $ curl -i -c cookies.txt -X POST -H Content-Type: application/json \\ -d '{ username : jmiranda , password : password }' https://openboxes.ngrok.io/openboxes/api/login HTTP/1.1 200 OK Server: Apache-Coyote/1.1 Set-Cookie: JSESSIONID=062F3CF6129FC12B6BDD4D02E15BA531; Path=/openboxes Content-Type: text/html;charset=utf-8 Transfer-Encoding: chunked Date: Sun, 10 Jun 2018 21:21:10 GMT Authentication was successful NOTE: -c cookies option will create a cookies file (cookies.txt) and save your session information to be used in subsequent requests. This saves a huge amount of headache when you're testing the API.","title":"Authentication"},{"location":"api-guide/#cookie","text":"Once you have authenticated, you have two options to","title":"Cookie"},{"location":"api-guide/#cookie_header","text":"Copy the JSESSIONID Cookie from the response header to make subsequent authenticated requests to the API $ curl -i -X POST -H Content-Type: application/json \\ -H Cookie: JSESSIONID=062F3CF6129FC12B6BDD4D02E15BA531 \\ https://openboxes.ngrok.io/openboxes/api/categories","title":"Cookie Header"},{"location":"api-guide/#cookie_file","text":"Or use -b cookies.txt to read from a cookies file and start making requests against the API. NOTE: You'll need to use the -c cookies.txt on the login request in order to generate the proper cookies. $ curl -i -X POST -H Content-Type: application/json -b cookies.txt \\ https://openboxes.ngrok.io/openboxes/api/categories","title":"Cookie File"},{"location":"api-guide/#logout","text":"If you want to end your session, you can POST a request to the logout endpoint. $ curl -i -X POST -H Content-Type: application/json -b cookies.txt \\ https://openboxes.ngrok.io/openboxes/api/logout","title":"Logout"},{"location":"api-guide/#exceptions","text":"","title":"Exceptions"},{"location":"api-guide/#unauthorized_access","text":"If you try to access the API with no cookies (or an invalid/stale cookie) you'll receive the following error and will need to (re-)authenticate $ curl -i -X POST -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/categories HTTP/1.1 401 Unauthorized Server: Apache-Coyote/1.1 Set-Cookie: JSESSIONID=905D991AE2661B0FDD7F6FB140EB97D8; Path=/openboxes Content-Type: application/json;charset=UTF-8 Transfer-Encoding: chunked Date: Thu, 21 Jun 2018 04:21:29 GMT { errorCode :401, errorMessage : Unauthorized user: Request categoryApi:save requires authentication }","title":"Unauthorized Access"},{"location":"api-guide/#pagination","text":"All API endpoints will return all objects if pagination parameters are not provided. $ curl -X POST -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/products?offset=0 max=1 | jsonlint [ { id : ff80818155df9de40155df9e329b0009 , productCode : 00003 , name : Aspirin 20mg , category : { id : 1 , name : Medicines }, description : null, dateCreated : 2016-07-12T14:58:55Z , lastUpdated : 2016-07-12T14:58:55Z } ]","title":"Pagination"},{"location":"api-guide/#json_lint","text":"While testing the API, I'd recommend installing jsonlint ... npm install jsonlint -g ... and piping all curl responses through it to get a pretty response. $ curl -X POST -H Content-Type: application/json https://openboxes.ngrok.io/openboxes/api/products?max=1 | jsonlint [ { id : ff80818155df9de40155df9e329b0009 , productCode : 00003 , name : Aspirin 20mg , category : { id : 1 , name : Medicines }, description : null, dateCreated : 2016-07-12T14:58:55Z , lastUpdated : 2016-07-12T14:58:55Z } ] NOTE: You'll need to remove the -i argument from the following examples to prevent parsing errors: % Total % Received % Xferd Average Speed Time Time Time Current Dload Upload Total Spent Left Speed 100 221 0 221 0 0 455 0 --:--:-- --:--:-- --:--:-- 455 Error: Parse error on line 1: SerP/1.1 200 OK ^ Expecting 'STRING', 'NUMBER', 'NULL', 'TRUE', 'FALSE', '{', '[', got 'undefined' at Object.parseError (/home/jmiranda/.nvm/versions/node/v6.6.0/lib/node_modules/jsonlint/lib/jsonlint.js:55:11) at Object.parse (/home/jmiranda/.nvm/versions/node/v6.6.0/lib/node_modules/jsonlint/lib/jsonlint.js:132:22) at parse (/home/jmiranda/.nvm/versions/node/v6.6.0/lib/node_modules/jsonlint/lib/cli.js:82:14) at Socket. anonymous (/home/jmiranda/.nvm/versions/node/v6.6.0/lib/node_modules/jsonlint/lib/cli.js:149:41) at emitNone (events.js:91:20) at Socket.emit (events.js:185:7) at endReadableNT (_stream_readable.js:974:12) at _combinedTickCallback (internal/process/next_tick.js:74:11) at process._tickCallback (internal/process/next_tick.js:98:9)","title":"JSON Lint"},{"location":"api-guide/category/","text":"Category API # Create # $ curl -i -X POST -H Content-Type: application/json -b cookies.txt \\ -d '{ name : New category }' https://openboxes.ngrok.io/openboxes/api/categories HTTP/1.1 200 OK Server: Apache-Coyote/1.1 Content-Type: application/json;charset=UTF-8 Transfer-Encoding: chunked Date: Sun, 10 Jun 2018 21:22:00 GMT { id : ff80818163e2de8d0163eb93c5a00001 , name : New category } Exceptions # Validation Errors # Returns validation errors (Name is a required field of Category) $ curl -i -X POST -H Content-Type: application/json -b cookies.txt \\ -d '{}' https://openboxes.ngrok.io/openboxes/api/categories HTTP/1.1 500 Internal Server Error Server: Apache-Coyote/1.1 Content-Type: application/json;charset=UTF-8 Transfer-Encoding: chunked Date: Sat, 09 Jun 2018 14:30:20 GMT { errorCode :500, errorMessage : Unable to save category due to errors:\\n- Field error in object 'org.pih.warehouse.product.Category' on field 'name': rejected value [null]; codes [org.pih.warehouse.product.Category.name.nullable.error.org.pih.warehouse.product.Category.name,org.pih.warehouse.product.Category.name.nullable.error.name,org.pih.warehouse.product.Category.name.nullable.error.java.lang.String,org.pih.warehouse.product.Category.name.nullable.error,category.name.nullable.error.org.pih.warehouse.product.Category.name,category.name.nullable.error.name,category.name.nullable.error.java.lang.String,category.name.nullable.error,org.pih.warehouse.product.Category.name.nullable.org.pih.warehouse.product.Category.name,org.pih.warehouse.product.Category.name.nullable.name,org.pih.warehouse.product.Category.name.nullable.java.lang.String,org.pih.warehouse.product.Category.name.nullable,category.name.nullable.org.pih.warehouse.product.Category.name,category.name.nullable.name,category.name.nullable.java.lang.String,category.name.nullable,nullable.org.pih.warehouse.product.Category.name,nullable.name,nullable.java.lang.String,nullable]; arguments [name,Category]; default message [Property [{0}] of class [{1}] cannot be null]\\n }","title":"Categories"},{"location":"api-guide/category/#category_api","text":"","title":"Category API"},{"location":"api-guide/category/#create","text":"$ curl -i -X POST -H Content-Type: application/json -b cookies.txt \\ -d '{ name : New category }' https://openboxes.ngrok.io/openboxes/api/categories HTTP/1.1 200 OK Server: Apache-Coyote/1.1 Content-Type: application/json;charset=UTF-8 Transfer-Encoding: chunked Date: Sun, 10 Jun 2018 21:22:00 GMT { id : ff80818163e2de8d0163eb93c5a00001 , name : New category }","title":"Create"},{"location":"api-guide/category/#exceptions","text":"","title":"Exceptions"},{"location":"api-guide/category/#validation_errors","text":"Returns validation errors (Name is a required field of Category) $ curl -i -X POST -H Content-Type: application/json -b cookies.txt \\ -d '{}' https://openboxes.ngrok.io/openboxes/api/categories HTTP/1.1 500 Internal Server Error Server: Apache-Coyote/1.1 Content-Type: application/json;charset=UTF-8 Transfer-Encoding: chunked Date: Sat, 09 Jun 2018 14:30:20 GMT { errorCode :500, errorMessage : Unable to save category due to errors:\\n- Field error in object 'org.pih.warehouse.product.Category' on field 'name': rejected value [null]; codes [org.pih.warehouse.product.Category.name.nullable.error.org.pih.warehouse.product.Category.name,org.pih.warehouse.product.Category.name.nullable.error.name,org.pih.warehouse.product.Category.name.nullable.error.java.lang.String,org.pih.warehouse.product.Category.name.nullable.error,category.name.nullable.error.org.pih.warehouse.product.Category.name,category.name.nullable.error.name,category.name.nullable.error.java.lang.String,category.name.nullable.error,org.pih.warehouse.product.Category.name.nullable.org.pih.warehouse.product.Category.name,org.pih.warehouse.product.Category.name.nullable.name,org.pih.warehouse.product.Category.name.nullable.java.lang.String,org.pih.warehouse.product.Category.name.nullable,category.name.nullable.org.pih.warehouse.product.Category.name,category.name.nullable.name,category.name.nullable.java.lang.String,category.name.nullable,nullable.org.pih.warehouse.product.Category.name,nullable.name,nullable.java.lang.String,nullable]; arguments [name,Category]; default message [Property [{0}] of class [{1}] cannot be null]\\n }","title":"Validation Errors"},{"location":"api-guide/generic/","text":"Generic API # After creating a few API endpoints I got a little tired of writing the same boilerplate code. So I've added another endpoint to allow developers to access any of the domain objects via a more generic boilerplate-y API. List # $ curl -b cookies.txt -X GET -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/generic/product | jsonlint { data : [ { id : ff80818155df9de40155df9e31000001 , productCode : 00001 , name : Ibuprofen 200mg , description : null, category : { id : 1 , name : Medicines } }, { id : ff80818155df9de40155df9e321c0005 , productCode : 00002 , name : Tylenol 325mg , description : null, category : { id : 1 , name : Medicines } }, { id : ff80818155df9de40155df9e329b0009 , productCode : 00003 , name : Aspirin 20mg , description : null, category : { id : 1 , name : Medicines } }, { id : ff80818155df9de40155df9e3312000d , productCode : 00004 , name : General Pain Reliever , description : null, category : { id : 1 , name : Medicines } }, { id : ff80818155df9de40155df9e33930011 , productCode : 00005 , name : Similac Advance low iron 400g , description : null, category : { id : 1 , name : Medicines } }, { id : ff80818155df9de40155df9e34080015 , productCode : 00006 , name : Similac Advance + iron 365g , description : null, category : { id : 1 , name : Medicines } }, { id : ff80818155df9de40155df9e347e0019 , productCode : 00007 , name : MacBook Pro 8G , description : null, category : { id : 2 , name : Supplies } }, { id : ff80818155df9de40155df9e34f1001d , productCode : 00008 , name : Print Paper A4 , description : null, category : { id : 2 , name : Supplies } } ] } Read # $ curl -b cookies.txt -X GET -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/generic/product/ff80818155df9de40155df9e31000001 { data : { id : ff80818155df9de40155df9e31000001 , productCode : 00001 , name : Ibuprofen 200mg , description : null, category : { id : 1 , name : Medicines } } } Create # $ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d '{ name : product 0 , category.id : ROOT }' \\ https://openboxes.ngrok.io/openboxes/api/generic/product { data : { id : ff8081816407132d01640730bd150003 , productCode : null, name : product 0 , description : null, category : { id : ROOT , name : ROOT } } } Update # $ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d '{ description : This is the penultimate product }' \\ https://openboxes.ngrok.io/openboxes/api/generic/product/ff8081816407132d0164071eec250001 | jsonlint { data : { id : ff8081816407132d0164071eec250001 , productCode : BK71 , name : product 1 , description : This is the penultimate product , category : { id : ROOT , name : ROOT } } } Create multiple # The REST API allows you to create multiple objects at once. If there are no errors, both objects should be created and returned. $ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d '[{ name : product 1 , category.id : ROOT },{ name : product 2 , category.id : ROOT }]' \\ https://openboxes.ngrok.io/openboxes/api/generic/product { data : [{ id : ff8081816407132d0164071eec250001 , productCode : null, name : product 1 , description : null, category : { id : ROOT , name : ROOT } }, { id : ff8081816407132d0164071eec2d0002 , productCode : null, name : product 2 , description : null, category : { id : ROOT , name : ROOT } }] } In the following example, you'll notice that the POST request on multiple objects is an all-or-nothing transaction, so if there are any errors (i.e. validation errors) the entire request will fail. In this case, we throw an error for the first object that failed - not for all objects that fail. $ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d '[{ name : product 1 },{ name : product 2 }]' \\ https://openboxes.ngrok.io/openboxes/api/generic/product { errorCode : 400, errorMessage : Validation errors , data : { errors : [{ object : org.pih.warehouse.product.Product , field : category , rejected-value : null, message : Property [category] of class [Product] cannot be null }] } } Update multiple objects # The REST API also allows you to update multiple objects at once. You'll POST to same endpoint used to create new objects, but you'll include the ID within each data object. $ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d '[{ id : ff8081816407132d0164071eec250001 , name : product 1+ , category.id : ROOT },\\ { id : ff8081816407132d0164071eec2d0002 , name : product 2.1 , category.id : ROOT }]' \\ https://openboxes.ngrok.io/openboxes/api/generic/product { data : [{ id : ff8081816407132d0164071eec250001 , productCode : BK71 , name : product 1+ , description : This is the penultimate product , category : { id : ROOT , name : ROOT } }, { id : ff8081816407132d0164071eec2d0002 , productCode : DD67 , name : product 2.1 , description : null, category : { id : ROOT , name : ROOT } }] } Search # The Search API currently supports the following operators on any string property of any object: eq (default: you can just specify 'property' and 'value' if you want an equality search) like ilike Support for other property types (Integer, Date, BigDecimal) and operators (i.e. in, isNull, between, gt, ge, lt, le, etc) will be added at some point in the future. In addition, there's no way to perform nested searches (i.e. search for all shipment items that reference a particular product) at this time so please NOTE : If you don't see a search operator or property type supported, please raise an issue on GitHub (https://github.com/openboxes/openboxes/issues). $ curl -i -X GET -H Content-Type: application/json -b cookies.txt \\ -d '{ searchAttributes :[{ property : name , operator : ilike , value : Tyl% }]}' \\ https://openboxes.ngrok.io/openboxes/api/generic/product/search?max=1 { data : [{ id : ff80818155df9de40155df9e321c0005 , productCode : 00002 , name : Tylenol 325mg , description : null, category : { id : 1 , name : Medicines } }] }","title":"Generic API"},{"location":"api-guide/generic/#generic_api","text":"After creating a few API endpoints I got a little tired of writing the same boilerplate code. So I've added another endpoint to allow developers to access any of the domain objects via a more generic boilerplate-y API.","title":"Generic API"},{"location":"api-guide/generic/#list","text":"$ curl -b cookies.txt -X GET -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/generic/product | jsonlint { data : [ { id : ff80818155df9de40155df9e31000001 , productCode : 00001 , name : Ibuprofen 200mg , description : null, category : { id : 1 , name : Medicines } }, { id : ff80818155df9de40155df9e321c0005 , productCode : 00002 , name : Tylenol 325mg , description : null, category : { id : 1 , name : Medicines } }, { id : ff80818155df9de40155df9e329b0009 , productCode : 00003 , name : Aspirin 20mg , description : null, category : { id : 1 , name : Medicines } }, { id : ff80818155df9de40155df9e3312000d , productCode : 00004 , name : General Pain Reliever , description : null, category : { id : 1 , name : Medicines } }, { id : ff80818155df9de40155df9e33930011 , productCode : 00005 , name : Similac Advance low iron 400g , description : null, category : { id : 1 , name : Medicines } }, { id : ff80818155df9de40155df9e34080015 , productCode : 00006 , name : Similac Advance + iron 365g , description : null, category : { id : 1 , name : Medicines } }, { id : ff80818155df9de40155df9e347e0019 , productCode : 00007 , name : MacBook Pro 8G , description : null, category : { id : 2 , name : Supplies } }, { id : ff80818155df9de40155df9e34f1001d , productCode : 00008 , name : Print Paper A4 , description : null, category : { id : 2 , name : Supplies } } ] }","title":"List"},{"location":"api-guide/generic/#read","text":"$ curl -b cookies.txt -X GET -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/generic/product/ff80818155df9de40155df9e31000001 { data : { id : ff80818155df9de40155df9e31000001 , productCode : 00001 , name : Ibuprofen 200mg , description : null, category : { id : 1 , name : Medicines } } }","title":"Read"},{"location":"api-guide/generic/#create","text":"$ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d '{ name : product 0 , category.id : ROOT }' \\ https://openboxes.ngrok.io/openboxes/api/generic/product { data : { id : ff8081816407132d01640730bd150003 , productCode : null, name : product 0 , description : null, category : { id : ROOT , name : ROOT } } }","title":"Create"},{"location":"api-guide/generic/#update","text":"$ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d '{ description : This is the penultimate product }' \\ https://openboxes.ngrok.io/openboxes/api/generic/product/ff8081816407132d0164071eec250001 | jsonlint { data : { id : ff8081816407132d0164071eec250001 , productCode : BK71 , name : product 1 , description : This is the penultimate product , category : { id : ROOT , name : ROOT } } }","title":"Update"},{"location":"api-guide/generic/#create_multiple","text":"The REST API allows you to create multiple objects at once. If there are no errors, both objects should be created and returned. $ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d '[{ name : product 1 , category.id : ROOT },{ name : product 2 , category.id : ROOT }]' \\ https://openboxes.ngrok.io/openboxes/api/generic/product { data : [{ id : ff8081816407132d0164071eec250001 , productCode : null, name : product 1 , description : null, category : { id : ROOT , name : ROOT } }, { id : ff8081816407132d0164071eec2d0002 , productCode : null, name : product 2 , description : null, category : { id : ROOT , name : ROOT } }] } In the following example, you'll notice that the POST request on multiple objects is an all-or-nothing transaction, so if there are any errors (i.e. validation errors) the entire request will fail. In this case, we throw an error for the first object that failed - not for all objects that fail. $ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d '[{ name : product 1 },{ name : product 2 }]' \\ https://openboxes.ngrok.io/openboxes/api/generic/product { errorCode : 400, errorMessage : Validation errors , data : { errors : [{ object : org.pih.warehouse.product.Product , field : category , rejected-value : null, message : Property [category] of class [Product] cannot be null }] } }","title":"Create multiple"},{"location":"api-guide/generic/#update_multiple_objects","text":"The REST API also allows you to update multiple objects at once. You'll POST to same endpoint used to create new objects, but you'll include the ID within each data object. $ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d '[{ id : ff8081816407132d0164071eec250001 , name : product 1+ , category.id : ROOT },\\ { id : ff8081816407132d0164071eec2d0002 , name : product 2.1 , category.id : ROOT }]' \\ https://openboxes.ngrok.io/openboxes/api/generic/product { data : [{ id : ff8081816407132d0164071eec250001 , productCode : BK71 , name : product 1+ , description : This is the penultimate product , category : { id : ROOT , name : ROOT } }, { id : ff8081816407132d0164071eec2d0002 , productCode : DD67 , name : product 2.1 , description : null, category : { id : ROOT , name : ROOT } }] }","title":"Update multiple objects"},{"location":"api-guide/generic/#search","text":"The Search API currently supports the following operators on any string property of any object: eq (default: you can just specify 'property' and 'value' if you want an equality search) like ilike Support for other property types (Integer, Date, BigDecimal) and operators (i.e. in, isNull, between, gt, ge, lt, le, etc) will be added at some point in the future. In addition, there's no way to perform nested searches (i.e. search for all shipment items that reference a particular product) at this time so please NOTE : If you don't see a search operator or property type supported, please raise an issue on GitHub (https://github.com/openboxes/openboxes/issues). $ curl -i -X GET -H Content-Type: application/json -b cookies.txt \\ -d '{ searchAttributes :[{ property : name , operator : ilike , value : Tyl% }]}' \\ https://openboxes.ngrok.io/openboxes/api/generic/product/search?max=1 { data : [{ id : ff80818155df9de40155df9e321c0005 , productCode : 00002 , name : Tylenol 325mg , description : null, category : { id : 1 , name : Medicines } }] }","title":"Search"},{"location":"api-guide/getting-started/","text":"Getting Started # Authentication # First of all, we're going to need to authenticate. And although not entirely necessary it is recommended that you use cURL's -c argument in order to create a local cookies file (cookies.txt) so that you don't need to keep passing auth headers around on every request. curl -i -c cookies.txt -X POST -H Content-Type: application/json \\ -d '{ username : jmiranda , password : password , location : 1 }' \\ https://openboxes.ngrok.io/openboxes/api/login Using Generic API # Once that's done, let's start with the views that require the read/list APIs like shipments and requisitions. For this we're going to use what I'm calling the Generic API . You should be able to handle most (if not all) of the basic CRUD operations through the Generic API. In general, you have access to the following operations against the Generic API. List = GET https://openboxes.ngrok.io/openboxes/api/generic/ resource Read = GET https://openboxes.ngrok.io/openboxes/api/generic/ resource /:id Create = POST https://openboxes.ngrok.io/openboxes/api/generic/ resource Update = PUT (or POST) https://openboxes.ngrok.io/openboxes/api/generic/ resource /:id Delete = DELETE https://openboxes.ngrok.io/openboxes/api/generic/ resource /:id where is any of the domain classes in the system and is the primary key. Here are some example resources : Shipment = shipment Shipment Item = shipmentItem Requisition = requisition RequisitionItem = requisitionItem Product = product InventoryItem = inventoryItem Transaction = transaction TransactionEntry = transactionEntry Get shipments # So let's start off with Shipments by retrieving a list of max = 1 shipments. NOTE: I've added a paging parameter (max=1) in the following request. You should review the pagination documentation when you get a chance. $ curl -b cookies.txt -X GET -H Content-Type: application/json https://openboxes.ngrok.io/openboxes/api/generic/shipment?max=1 | jsonlint { data : [ { id : ff808181646b260401646b61df3f0034 , name : shipment to store 1 , status : SHIPPED , origin : { id : ff8081816430012d0164301b8eda0008 , name : Depot 1 , type : DEPOT }, destination : { id : ff808181646b260401646b3f2ced0002 , name : Store 1 , type : DEPOT }, expectedShippingDate : 07/05/2018 00:00 , actualShippingDate : 07/05/2018 12:03 , expectedDeliveryDate : 07/05/2018 00:00 , actualDeliveryDate : null, shipmentItems : [ { id : ff808181646b260401646b6256ed0036 , inventoryItem : { id : ff80818163f7308a0163f73d5bda0002 , product : { id : ff80818155df9de40155df9e31000001 , name : Ibuprofen 200mg , productCode : AB12 }, lotNumber : ABC123 , expirationDate : 01/01/2021 }, quantity : 150, recipient : null, shipment : { id : ff808181646b260401646b61df3f0034 , name : shipment to store 1 }, container : { id : ff808181646b260401646b62d1c10037 , name : Box 1\\r , type : Box|fr:Boite } } ], containers : [ { id : ff808181646b260401646b62d1c10037 , name : Box 1\\r , type : Box|fr:Boite , shipmentItems : [ { id : ff808181646b260401646b6256ed0036 , inventoryItem : { id : ff80818163f7308a0163f73d5bda0002 , product : { id : ff80818155df9de40155df9e31000001 , name : Ibuprofen 200mg , productCode : AB12 }, lotNumber : ABC123 , expirationDate : 01/01/2021 }, quantity : 150, recipient : null, shipment : { id : ff808181646b260401646b61df3f0034 , name : shipment to store 1 }, container : { id : ff808181646b260401646b62d1c10037 , name : Box 1\\r , type : Box|fr:Boite } } ] } ] } ] } Read shipment # Now let's read the details for a specific shipment. $ curl -b cookies.txt -X GET -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/generic/shipment/ff808181646b260401646b61df3f0034|jsonlint { data : { id : ff808181646b260401646b61df3f0034 , name : shipment to store 1 , status : SHIPPED , origin : { id : ff8081816430012d0164301b8eda0008 , name : Depot 1 , type : DEPOT }, destination : { id : ff808181646b260401646b3f2ced0002 , name : Store 1 , type : DEPOT }, expectedShippingDate : 07/05/2018 00:00 , actualShippingDate : 07/05/2018 12:03 , expectedDeliveryDate : 07/05/2018 00:00 , actualDeliveryDate : null, shipmentItems : [ { id : ff808181646b260401646b6256ed0036 , inventoryItem : { id : ff80818163f7308a0163f73d5bda0002 , product : { id : ff80818155df9de40155df9e31000001 , name : Ibuprofen 200mg , productCode : AB12 }, lotNumber : ABC123 , expirationDate : 01/01/2021 }, quantity : 150, recipient : null, shipment : { id : ff808181646b260401646b61df3f0034 , name : shipment to store 1 }, container : { id : ff808181646b260401646b62d1c10037 , name : Box 1\\r , type : Box|fr:Boite } } ], containers : [ { id : ff808181646b260401646b62d1c10037 , name : Box 1\\r , type : Box|fr:Boite , shipmentItems : [ { id : ff808181646b260401646b6256ed0036 , inventoryItem : { id : ff80818163f7308a0163f73d5bda0002 , product : { id : ff80818155df9de40155df9e31000001 , name : Ibuprofen 200mg , productCode : AB12 }, lotNumber : ABC123 , expirationDate : 01/01/2021 }, quantity : 150, recipient : null, shipment : { id : ff808181646b260401646b61df3f0034 , name : shipment to store 1 }, container : { id : ff808181646b260401646b62d1c10037 , name : Box 1\\r , type : Box|fr:Boite } } ] } ] } } Create a new shipment # Pass an empty JSON object to the create method and it'll tell you what fields are required. name origin destination expectedShippingDate shipmentType $ curl -b cookies.txt -X POST -H Content-Type: application/json -d '{}' \\ https://openboxes.ngrok.io/openboxes/api/generic/shipment|jsonlint { errorCode : 400, errorMessage : Validation errors , data : [ { arguments : [ destination , Shipment ], bindingFailure : false, class : org.springframework.validation.FieldError , code : nullable , codes : [ org.pih.warehouse.shipping.Shipment.destination.nullable.error.org.pih.warehouse.shipping.Shipment.destination , org.pih.warehouse.shipping.Shipment.destination.nullable.error.destination , org.pih.warehouse.shipping.Shipment.destination.nullable.error.org.pih.warehouse.core.Location , org.pih.warehouse.shipping.Shipment.destination.nullable.error , shipment.destination.nullable.error.org.pih.warehouse.shipping.Shipment.destination , shipment.destination.nullable.error.destination , shipment.destination.nullable.error.org.pih.warehouse.core.Location , shipment.destination.nullable.error , org.pih.warehouse.shipping.Shipment.destination.nullable.org.pih.warehouse.shipping.Shipment.destination , org.pih.warehouse.shipping.Shipment.destination.nullable.destination , org.pih.warehouse.shipping.Shipment.destination.nullable.org.pih.warehouse.core.Location , org.pih.warehouse.shipping.Shipment.destination.nullable , shipment.destination.nullable.org.pih.warehouse.shipping.Shipment.destination , shipment.destination.nullable.destination , shipment.destination.nullable.org.pih.warehouse.core.Location , shipment.destination.nullable , nullable.org.pih.warehouse.shipping.Shipment.destination , nullable.destination , nullable.org.pih.warehouse.core.Location , nullable ], defaultMessage : Property [{0}] of class [{1}] cannot be null , field : destination , objectName : org.pih.warehouse.shipping.Shipment , rejectedValue : null }, { arguments : [ expectedShippingDate , Shipment ], bindingFailure : false, class : org.springframework.validation.FieldError , code : nullable , codes : [ org.pih.warehouse.shipping.Shipment.expectedShippingDate.nullable.error.org.pih.warehouse.shipping.Shipment.expectedShippingDate , org.pih.warehouse.shipping.Shipment.expectedShippingDate.nullable.error.expectedShippingDate , org.pih.warehouse.shipping.Shipment.expectedShippingDate.nullable.error.java.util.Date , org.pih.warehouse.shipping.Shipment.expectedShippingDate.nullable.error , shipment.expectedShippingDate.nullable.error.org.pih.warehouse.shipping.Shipment.expectedShippingDate , shipment.expectedShippingDate.nullable.error.expectedShippingDate , shipment.expectedShippingDate.nullable.error.java.util.Date , shipment.expectedShippingDate.nullable.error , org.pih.warehouse.shipping.Shipment.expectedShippingDate.nullable.org.pih.warehouse.shipping.Shipment.expectedShippingDate , org.pih.warehouse.shipping.Shipment.expectedShippingDate.nullable.expectedShippingDate , org.pih.warehouse.shipping.Shipment.expectedShippingDate.nullable.java.util.Date , org.pih.warehouse.shipping.Shipment.expectedShippingDate.nullable , shipment.expectedShippingDate.nullable.org.pih.warehouse.shipping.Shipment.expectedShippingDate , shipment.expectedShippingDate.nullable.expectedShippingDate , shipment.expectedShippingDate.nullable.java.util.Date , shipment.expectedShippingDate.nullable , nullable.org.pih.warehouse.shipping.Shipment.expectedShippingDate , nullable.expectedShippingDate , nullable.java.util.Date , nullable ], defaultMessage : Property [{0}] of class [{1}] cannot be null , field : expectedShippingDate , objectName : org.pih.warehouse.shipping.Shipment , rejectedValue : null }, { arguments : [ name , Shipment ], bindingFailure : false, class : org.springframework.validation.FieldError , code : nullable , codes : [ org.pih.warehouse.shipping.Shipment.name.nullable.error.org.pih.warehouse.shipping.Shipment.name , org.pih.warehouse.shipping.Shipment.name.nullable.error.name , org.pih.warehouse.shipping.Shipment.name.nullable.error.java.lang.String , org.pih.warehouse.shipping.Shipment.name.nullable.error , shipment.name.nullable.error.org.pih.warehouse.shipping.Shipment.name , shipment.name.nullable.error.name , shipment.name.nullable.error.java.lang.String , shipment.name.nullable.error , org.pih.warehouse.shipping.Shipment.name.nullable.org.pih.warehouse.shipping.Shipment.name , org.pih.warehouse.shipping.Shipment.name.nullable.name , org.pih.warehouse.shipping.Shipment.name.nullable.java.lang.String , org.pih.warehouse.shipping.Shipment.name.nullable , shipment.name.nullable.org.pih.warehouse.shipping.Shipment.name , shipment.name.nullable.name , shipment.name.nullable.java.lang.String , shipment.name.nullable , nullable.org.pih.warehouse.shipping.Shipment.name , nullable.name , nullable.java.lang.String , nullable ], defaultMessage : Property [{0}] of class [{1}] cannot be null , field : name , objectName : org.pih.warehouse.shipping.Shipment , rejectedValue : null }, { arguments : [ origin , Shipment ], bindingFailure : false, class : org.springframework.validation.FieldError , code : nullable , codes : [ org.pih.warehouse.shipping.Shipment.origin.nullable.error.org.pih.warehouse.shipping.Shipment.origin , org.pih.warehouse.shipping.Shipment.origin.nullable.error.origin , org.pih.warehouse.shipping.Shipment.origin.nullable.error.org.pih.warehouse.core.Location , org.pih.warehouse.shipping.Shipment.origin.nullable.error , shipment.origin.nullable.error.org.pih.warehouse.shipping.Shipment.origin , shipment.origin.nullable.error.origin , shipment.origin.nullable.error.org.pih.warehouse.core.Location , shipment.origin.nullable.error , org.pih.warehouse.shipping.Shipment.origin.nullable.org.pih.warehouse.shipping.Shipment.origin , org.pih.warehouse.shipping.Shipment.origin.nullable.origin , org.pih.warehouse.shipping.Shipment.origin.nullable.org.pih.warehouse.core.Location , org.pih.warehouse.shipping.Shipment.origin.nullable , shipment.origin.nullable.org.pih.warehouse.shipping.Shipment.origin , shipment.origin.nullable.origin , shipment.origin.nullable.org.pih.warehouse.core.Location , shipment.origin.nullable , nullable.org.pih.warehouse.shipping.Shipment.origin , nullable.origin , nullable.org.pih.warehouse.core.Location , nullable ], defaultMessage : Property [{0}] of class [{1}] cannot be null , field : origin , objectName : org.pih.warehouse.shipping.Shipment , rejectedValue : null }, { arguments : [ shipmentType , Shipment ], bindingFailure : false, class : org.springframework.validation.FieldError , code : nullable , codes : [ org.pih.warehouse.shipping.Shipment.shipmentType.nullable.error.org.pih.warehouse.shipping.Shipment.shipmentType , org.pih.warehouse.shipping.Shipment.shipmentType.nullable.error.shipmentType , org.pih.warehouse.shipping.Shipment.shipmentType.nullable.error.org.pih.warehouse.shipping.ShipmentType , org.pih.warehouse.shipping.Shipment.shipmentType.nullable.error , shipment.shipmentType.nullable.error.org.pih.warehouse.shipping.Shipment.shipmentType , shipment.shipmentType.nullable.error.shipmentType , shipment.shipmentType.nullable.error.org.pih.warehouse.shipping.ShipmentType , shipment.shipmentType.nullable.error , org.pih.warehouse.shipping.Shipment.shipmentType.nullable.org.pih.warehouse.shipping.Shipment.shipmentType , org.pih.warehouse.shipping.Shipment.shipmentType.nullable.shipmentType , org.pih.warehouse.shipping.Shipment.shipmentType.nullable.org.pih.warehouse.shipping.ShipmentType , org.pih.warehouse.shipping.Shipment.shipmentType.nullable , shipment.shipmentType.nullable.org.pih.warehouse.shipping.Shipment.shipmentType , shipment.shipmentType.nullable.shipmentType , shipment.shipmentType.nullable.org.pih.warehouse.shipping.ShipmentType , shipment.shipmentType.nullable , nullable.org.pih.warehouse.shipping.Shipment.shipmentType , nullable.shipmentType , nullable.org.pih.warehouse.shipping.ShipmentType , nullable ], defaultMessage : Property [{0}] of class [{1}] cannot be null , field : shipmentType , objectName : org.pih.warehouse.shipping.Shipment , rejectedValue : null } ] }","title":"Getting Started"},{"location":"api-guide/getting-started/#getting_started","text":"","title":"Getting Started"},{"location":"api-guide/getting-started/#authentication","text":"First of all, we're going to need to authenticate. And although not entirely necessary it is recommended that you use cURL's -c argument in order to create a local cookies file (cookies.txt) so that you don't need to keep passing auth headers around on every request. curl -i -c cookies.txt -X POST -H Content-Type: application/json \\ -d '{ username : jmiranda , password : password , location : 1 }' \\ https://openboxes.ngrok.io/openboxes/api/login","title":"Authentication"},{"location":"api-guide/getting-started/#using_generic_api","text":"Once that's done, let's start with the views that require the read/list APIs like shipments and requisitions. For this we're going to use what I'm calling the Generic API . You should be able to handle most (if not all) of the basic CRUD operations through the Generic API. In general, you have access to the following operations against the Generic API. List = GET https://openboxes.ngrok.io/openboxes/api/generic/ resource Read = GET https://openboxes.ngrok.io/openboxes/api/generic/ resource /:id Create = POST https://openboxes.ngrok.io/openboxes/api/generic/ resource Update = PUT (or POST) https://openboxes.ngrok.io/openboxes/api/generic/ resource /:id Delete = DELETE https://openboxes.ngrok.io/openboxes/api/generic/ resource /:id where is any of the domain classes in the system and is the primary key. Here are some example resources : Shipment = shipment Shipment Item = shipmentItem Requisition = requisition RequisitionItem = requisitionItem Product = product InventoryItem = inventoryItem Transaction = transaction TransactionEntry = transactionEntry","title":"Using Generic API"},{"location":"api-guide/getting-started/#get_shipments","text":"So let's start off with Shipments by retrieving a list of max = 1 shipments. NOTE: I've added a paging parameter (max=1) in the following request. You should review the pagination documentation when you get a chance. $ curl -b cookies.txt -X GET -H Content-Type: application/json https://openboxes.ngrok.io/openboxes/api/generic/shipment?max=1 | jsonlint { data : [ { id : ff808181646b260401646b61df3f0034 , name : shipment to store 1 , status : SHIPPED , origin : { id : ff8081816430012d0164301b8eda0008 , name : Depot 1 , type : DEPOT }, destination : { id : ff808181646b260401646b3f2ced0002 , name : Store 1 , type : DEPOT }, expectedShippingDate : 07/05/2018 00:00 , actualShippingDate : 07/05/2018 12:03 , expectedDeliveryDate : 07/05/2018 00:00 , actualDeliveryDate : null, shipmentItems : [ { id : ff808181646b260401646b6256ed0036 , inventoryItem : { id : ff80818163f7308a0163f73d5bda0002 , product : { id : ff80818155df9de40155df9e31000001 , name : Ibuprofen 200mg , productCode : AB12 }, lotNumber : ABC123 , expirationDate : 01/01/2021 }, quantity : 150, recipient : null, shipment : { id : ff808181646b260401646b61df3f0034 , name : shipment to store 1 }, container : { id : ff808181646b260401646b62d1c10037 , name : Box 1\\r , type : Box|fr:Boite } } ], containers : [ { id : ff808181646b260401646b62d1c10037 , name : Box 1\\r , type : Box|fr:Boite , shipmentItems : [ { id : ff808181646b260401646b6256ed0036 , inventoryItem : { id : ff80818163f7308a0163f73d5bda0002 , product : { id : ff80818155df9de40155df9e31000001 , name : Ibuprofen 200mg , productCode : AB12 }, lotNumber : ABC123 , expirationDate : 01/01/2021 }, quantity : 150, recipient : null, shipment : { id : ff808181646b260401646b61df3f0034 , name : shipment to store 1 }, container : { id : ff808181646b260401646b62d1c10037 , name : Box 1\\r , type : Box|fr:Boite } } ] } ] } ] }","title":"Get shipments"},{"location":"api-guide/getting-started/#read_shipment","text":"Now let's read the details for a specific shipment. $ curl -b cookies.txt -X GET -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/generic/shipment/ff808181646b260401646b61df3f0034|jsonlint { data : { id : ff808181646b260401646b61df3f0034 , name : shipment to store 1 , status : SHIPPED , origin : { id : ff8081816430012d0164301b8eda0008 , name : Depot 1 , type : DEPOT }, destination : { id : ff808181646b260401646b3f2ced0002 , name : Store 1 , type : DEPOT }, expectedShippingDate : 07/05/2018 00:00 , actualShippingDate : 07/05/2018 12:03 , expectedDeliveryDate : 07/05/2018 00:00 , actualDeliveryDate : null, shipmentItems : [ { id : ff808181646b260401646b6256ed0036 , inventoryItem : { id : ff80818163f7308a0163f73d5bda0002 , product : { id : ff80818155df9de40155df9e31000001 , name : Ibuprofen 200mg , productCode : AB12 }, lotNumber : ABC123 , expirationDate : 01/01/2021 }, quantity : 150, recipient : null, shipment : { id : ff808181646b260401646b61df3f0034 , name : shipment to store 1 }, container : { id : ff808181646b260401646b62d1c10037 , name : Box 1\\r , type : Box|fr:Boite } } ], containers : [ { id : ff808181646b260401646b62d1c10037 , name : Box 1\\r , type : Box|fr:Boite , shipmentItems : [ { id : ff808181646b260401646b6256ed0036 , inventoryItem : { id : ff80818163f7308a0163f73d5bda0002 , product : { id : ff80818155df9de40155df9e31000001 , name : Ibuprofen 200mg , productCode : AB12 }, lotNumber : ABC123 , expirationDate : 01/01/2021 }, quantity : 150, recipient : null, shipment : { id : ff808181646b260401646b61df3f0034 , name : shipment to store 1 }, container : { id : ff808181646b260401646b62d1c10037 , name : Box 1\\r , type : Box|fr:Boite } } ] } ] } }","title":"Read shipment"},{"location":"api-guide/getting-started/#create_a_new_shipment","text":"Pass an empty JSON object to the create method and it'll tell you what fields are required. name origin destination expectedShippingDate shipmentType $ curl -b cookies.txt -X POST -H Content-Type: application/json -d '{}' \\ https://openboxes.ngrok.io/openboxes/api/generic/shipment|jsonlint { errorCode : 400, errorMessage : Validation errors , data : [ { arguments : [ destination , Shipment ], bindingFailure : false, class : org.springframework.validation.FieldError , code : nullable , codes : [ org.pih.warehouse.shipping.Shipment.destination.nullable.error.org.pih.warehouse.shipping.Shipment.destination , org.pih.warehouse.shipping.Shipment.destination.nullable.error.destination , org.pih.warehouse.shipping.Shipment.destination.nullable.error.org.pih.warehouse.core.Location , org.pih.warehouse.shipping.Shipment.destination.nullable.error , shipment.destination.nullable.error.org.pih.warehouse.shipping.Shipment.destination , shipment.destination.nullable.error.destination , shipment.destination.nullable.error.org.pih.warehouse.core.Location , shipment.destination.nullable.error , org.pih.warehouse.shipping.Shipment.destination.nullable.org.pih.warehouse.shipping.Shipment.destination , org.pih.warehouse.shipping.Shipment.destination.nullable.destination , org.pih.warehouse.shipping.Shipment.destination.nullable.org.pih.warehouse.core.Location , org.pih.warehouse.shipping.Shipment.destination.nullable , shipment.destination.nullable.org.pih.warehouse.shipping.Shipment.destination , shipment.destination.nullable.destination , shipment.destination.nullable.org.pih.warehouse.core.Location , shipment.destination.nullable , nullable.org.pih.warehouse.shipping.Shipment.destination , nullable.destination , nullable.org.pih.warehouse.core.Location , nullable ], defaultMessage : Property [{0}] of class [{1}] cannot be null , field : destination , objectName : org.pih.warehouse.shipping.Shipment , rejectedValue : null }, { arguments : [ expectedShippingDate , Shipment ], bindingFailure : false, class : org.springframework.validation.FieldError , code : nullable , codes : [ org.pih.warehouse.shipping.Shipment.expectedShippingDate.nullable.error.org.pih.warehouse.shipping.Shipment.expectedShippingDate , org.pih.warehouse.shipping.Shipment.expectedShippingDate.nullable.error.expectedShippingDate , org.pih.warehouse.shipping.Shipment.expectedShippingDate.nullable.error.java.util.Date , org.pih.warehouse.shipping.Shipment.expectedShippingDate.nullable.error , shipment.expectedShippingDate.nullable.error.org.pih.warehouse.shipping.Shipment.expectedShippingDate , shipment.expectedShippingDate.nullable.error.expectedShippingDate , shipment.expectedShippingDate.nullable.error.java.util.Date , shipment.expectedShippingDate.nullable.error , org.pih.warehouse.shipping.Shipment.expectedShippingDate.nullable.org.pih.warehouse.shipping.Shipment.expectedShippingDate , org.pih.warehouse.shipping.Shipment.expectedShippingDate.nullable.expectedShippingDate , org.pih.warehouse.shipping.Shipment.expectedShippingDate.nullable.java.util.Date , org.pih.warehouse.shipping.Shipment.expectedShippingDate.nullable , shipment.expectedShippingDate.nullable.org.pih.warehouse.shipping.Shipment.expectedShippingDate , shipment.expectedShippingDate.nullable.expectedShippingDate , shipment.expectedShippingDate.nullable.java.util.Date , shipment.expectedShippingDate.nullable , nullable.org.pih.warehouse.shipping.Shipment.expectedShippingDate , nullable.expectedShippingDate , nullable.java.util.Date , nullable ], defaultMessage : Property [{0}] of class [{1}] cannot be null , field : expectedShippingDate , objectName : org.pih.warehouse.shipping.Shipment , rejectedValue : null }, { arguments : [ name , Shipment ], bindingFailure : false, class : org.springframework.validation.FieldError , code : nullable , codes : [ org.pih.warehouse.shipping.Shipment.name.nullable.error.org.pih.warehouse.shipping.Shipment.name , org.pih.warehouse.shipping.Shipment.name.nullable.error.name , org.pih.warehouse.shipping.Shipment.name.nullable.error.java.lang.String , org.pih.warehouse.shipping.Shipment.name.nullable.error , shipment.name.nullable.error.org.pih.warehouse.shipping.Shipment.name , shipment.name.nullable.error.name , shipment.name.nullable.error.java.lang.String , shipment.name.nullable.error , org.pih.warehouse.shipping.Shipment.name.nullable.org.pih.warehouse.shipping.Shipment.name , org.pih.warehouse.shipping.Shipment.name.nullable.name , org.pih.warehouse.shipping.Shipment.name.nullable.java.lang.String , org.pih.warehouse.shipping.Shipment.name.nullable , shipment.name.nullable.org.pih.warehouse.shipping.Shipment.name , shipment.name.nullable.name , shipment.name.nullable.java.lang.String , shipment.name.nullable , nullable.org.pih.warehouse.shipping.Shipment.name , nullable.name , nullable.java.lang.String , nullable ], defaultMessage : Property [{0}] of class [{1}] cannot be null , field : name , objectName : org.pih.warehouse.shipping.Shipment , rejectedValue : null }, { arguments : [ origin , Shipment ], bindingFailure : false, class : org.springframework.validation.FieldError , code : nullable , codes : [ org.pih.warehouse.shipping.Shipment.origin.nullable.error.org.pih.warehouse.shipping.Shipment.origin , org.pih.warehouse.shipping.Shipment.origin.nullable.error.origin , org.pih.warehouse.shipping.Shipment.origin.nullable.error.org.pih.warehouse.core.Location , org.pih.warehouse.shipping.Shipment.origin.nullable.error , shipment.origin.nullable.error.org.pih.warehouse.shipping.Shipment.origin , shipment.origin.nullable.error.origin , shipment.origin.nullable.error.org.pih.warehouse.core.Location , shipment.origin.nullable.error , org.pih.warehouse.shipping.Shipment.origin.nullable.org.pih.warehouse.shipping.Shipment.origin , org.pih.warehouse.shipping.Shipment.origin.nullable.origin , org.pih.warehouse.shipping.Shipment.origin.nullable.org.pih.warehouse.core.Location , org.pih.warehouse.shipping.Shipment.origin.nullable , shipment.origin.nullable.org.pih.warehouse.shipping.Shipment.origin , shipment.origin.nullable.origin , shipment.origin.nullable.org.pih.warehouse.core.Location , shipment.origin.nullable , nullable.org.pih.warehouse.shipping.Shipment.origin , nullable.origin , nullable.org.pih.warehouse.core.Location , nullable ], defaultMessage : Property [{0}] of class [{1}] cannot be null , field : origin , objectName : org.pih.warehouse.shipping.Shipment , rejectedValue : null }, { arguments : [ shipmentType , Shipment ], bindingFailure : false, class : org.springframework.validation.FieldError , code : nullable , codes : [ org.pih.warehouse.shipping.Shipment.shipmentType.nullable.error.org.pih.warehouse.shipping.Shipment.shipmentType , org.pih.warehouse.shipping.Shipment.shipmentType.nullable.error.shipmentType , org.pih.warehouse.shipping.Shipment.shipmentType.nullable.error.org.pih.warehouse.shipping.ShipmentType , org.pih.warehouse.shipping.Shipment.shipmentType.nullable.error , shipment.shipmentType.nullable.error.org.pih.warehouse.shipping.Shipment.shipmentType , shipment.shipmentType.nullable.error.shipmentType , shipment.shipmentType.nullable.error.org.pih.warehouse.shipping.ShipmentType , shipment.shipmentType.nullable.error , org.pih.warehouse.shipping.Shipment.shipmentType.nullable.org.pih.warehouse.shipping.Shipment.shipmentType , org.pih.warehouse.shipping.Shipment.shipmentType.nullable.shipmentType , org.pih.warehouse.shipping.Shipment.shipmentType.nullable.org.pih.warehouse.shipping.ShipmentType , org.pih.warehouse.shipping.Shipment.shipmentType.nullable , shipment.shipmentType.nullable.org.pih.warehouse.shipping.Shipment.shipmentType , shipment.shipmentType.nullable.shipmentType , shipment.shipmentType.nullable.org.pih.warehouse.shipping.ShipmentType , shipment.shipmentType.nullable , nullable.org.pih.warehouse.shipping.Shipment.shipmentType , nullable.shipmentType , nullable.org.pih.warehouse.shipping.ShipmentType , nullable ], defaultMessage : Property [{0}] of class [{1}] cannot be null , field : shipmentType , objectName : org.pih.warehouse.shipping.Shipment , rejectedValue : null } ] }","title":"Create a new shipment"},{"location":"api-guide/identifier/","text":"Identifier API # The identifier API only supports POST. Create # Create a new alphanumeric identifier for a given identifierType or identifierFormat . Identifier format # Create your own identifier format using the following codes. A = Alphanumeric L = Alphabetic characters only N = Numeric D = Numeric Any other character (i.e. dashes, periods) will be included as-is. $ curl -i -X POST -b cookies.txt \\ -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/identifiers?identifierFormat=AAANNN HTTP/1.1 200 OK Server: Apache-Coyote/1.1 Content-Type: application/json;charset=UTF-8 Transfer-Encoding: chunked Date: Thu, 21 Jun 2018 04:49:26 GMT { data : VCU789 } Identifier type # Allowed identifierType values: requisition product productSupplier transaction shipment order $ curl -i -X POST -b cookies.txt \\ -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/identifiers?identifierType=product HTTP/1.1 200 OK Server: Apache-Coyote/1.1 Content-Type: application/json;charset=UTF-8 Transfer-Encoding: chunked Date: Thu, 21 Jun 2018 04:49:40 GMT { data : VR26 } These formats can be configured in openboxes-config.properties openboxes.identifier.transaction.format = AAA-AAA-AAA openboxes.identifier.order.format = NNNLLL openboxes.identifier.product.format = LLNN openboxes.identifier.productSupplier.format = LLNN openboxes.identifier.requisition.format = NNNLLL openboxes.identifier.shipment.format = NNNLLL You can also edit the available characters and digits available for the identifierFormat mask. This allows you to remove characters that may be confused with others (i.e. I, 1, l or 0 and O). By default we keep all numeric digits and remove the conflicting alphabetic characters. openboxes.identifier.numeric = 0123456789 openboxes.identifier.alphabetic = ABCDEFGHJKMNPQRSTUVXYZ openboxes.identifier.alphanumeric = 0123456789ABCDEFGHJKMNPQRSTUVWXYZ","title":"Identifiers"},{"location":"api-guide/identifier/#identifier_api","text":"The identifier API only supports POST.","title":"Identifier API"},{"location":"api-guide/identifier/#create","text":"Create a new alphanumeric identifier for a given identifierType or identifierFormat .","title":"Create"},{"location":"api-guide/identifier/#identifier_format","text":"Create your own identifier format using the following codes. A = Alphanumeric L = Alphabetic characters only N = Numeric D = Numeric Any other character (i.e. dashes, periods) will be included as-is. $ curl -i -X POST -b cookies.txt \\ -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/identifiers?identifierFormat=AAANNN HTTP/1.1 200 OK Server: Apache-Coyote/1.1 Content-Type: application/json;charset=UTF-8 Transfer-Encoding: chunked Date: Thu, 21 Jun 2018 04:49:26 GMT { data : VCU789 }","title":"Identifier format"},{"location":"api-guide/identifier/#identifier_type","text":"Allowed identifierType values: requisition product productSupplier transaction shipment order $ curl -i -X POST -b cookies.txt \\ -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/identifiers?identifierType=product HTTP/1.1 200 OK Server: Apache-Coyote/1.1 Content-Type: application/json;charset=UTF-8 Transfer-Encoding: chunked Date: Thu, 21 Jun 2018 04:49:40 GMT { data : VR26 } These formats can be configured in openboxes-config.properties openboxes.identifier.transaction.format = AAA-AAA-AAA openboxes.identifier.order.format = NNNLLL openboxes.identifier.product.format = LLNN openboxes.identifier.productSupplier.format = LLNN openboxes.identifier.requisition.format = NNNLLL openboxes.identifier.shipment.format = NNNLLL You can also edit the available characters and digits available for the identifierFormat mask. This allows you to remove characters that may be confused with others (i.e. I, 1, l or 0 and O). By default we keep all numeric digits and remove the conflicting alphabetic characters. openboxes.identifier.numeric = 0123456789 openboxes.identifier.alphabetic = ABCDEFGHJKMNPQRSTUVXYZ openboxes.identifier.alphanumeric = 0123456789ABCDEFGHJKMNPQRSTUVWXYZ","title":"Identifier type"},{"location":"api-guide/internalLocation/","text":"Internal Locations # List # $ curl -b cookies.txt -X GET -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/internalLocations?location.id=ff808181646b260401646b3f2ced0002 |jsonlint { data : [ { id : ff808181646d3ec101646d5e7d480001 , name : Bin 1 , description : null, locationNumber : null, locationGroup : null, parentLocation : { id : ff808181646b260401646b3f2ced0002 , name : Store 1 , description : null, locationNumber : STORE1 , locationGroup : null, parentLocation : null, locationType : { id : ff808181646b260401646b3ed20f0001 , name : Store , description : null, locationTypeCode : DEPOT }, locationTypeCode : DEPOT }, locationType : { id : cab2b4f35ba2d867015ba2e17e390001 , name : Bin Location , description : Default bin location type , locationTypeCode : BIN_LOCATION }, locationTypeCode : BIN_LOCATION }, { id : ff808181646d3ec101646d5e8e3e0003 , name : Bin 2 , description : null, locationNumber : null, locationGroup : null, parentLocation : { id : ff808181646b260401646b3f2ced0002 , name : Store 1 , description : null, locationNumber : STORE1 , locationGroup : null, parentLocation : null, locationType : { id : ff808181646b260401646b3ed20f0001 , name : Store , description : null, locationTypeCode : DEPOT }, locationTypeCode : DEPOT }, locationType : { id : cab2b4f35ba2d867015ba2e17e390001 , name : Bin Location , description : Default bin location type , locationTypeCode : BIN_LOCATION }, locationTypeCode : BIN_LOCATION }, { id : ff808181646d3ec101646d5ea1f20005 , name : Bin 3 , description : null, locationNumber : null, locationGroup : null, parentLocation : { id : ff808181646b260401646b3f2ced0002 , name : Store 1 , description : null, locationNumber : STORE1 , locationGroup : null, parentLocation : null, locationType : { id : ff808181646b260401646b3ed20f0001 , name : Store , description : null, locationTypeCode : DEPOT }, locationTypeCode : DEPOT }, locationType : { id : cab2b4f35ba2d867015ba2e17e390001 , name : Bin Location , description : Default bin location type , locationTypeCode : BIN_LOCATION }, locationTypeCode : BIN_LOCATION }, { id : ff808181648c6e2401648c95140f0001 , name : Receiving , description : null, locationNumber : null, locationGroup : null, parentLocation : { id : ff808181646b260401646b3f2ced0002 , name : Store 1 , description : null, locationNumber : STORE1 , locationGroup : null, parentLocation : null, locationType : { id : ff808181646b260401646b3ed20f0001 , name : Store , description : null, locationTypeCode : DEPOT }, locationTypeCode : DEPOT }, locationType : { id : ff8081816482352b01648249e8cc0001 , name : Receiving , description : null, locationTypeCode : BIN_LOCATION }, locationTypeCode : BIN_LOCATION } ] } Read # $ curl -b cookies.txt -X GET -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/internalLocations/ff808181648c6e2401648c95140f0001 |jsonlint { data : { id : ff808181648c6e2401648c95140f0001 , name : Receiving , description : null, locationNumber : null, locationGroup : null, parentLocation : { id : ff808181646b260401646b3f2ced0002 , name : Store 1 , description : null, locationNumber : STORE1 , locationGroup : null, parentLocation : null, locationType : { id : ff808181646b260401646b3ed20f0001 , name : Store , description : null, locationTypeCode : DEPOT }, locationTypeCode : DEPOT }, locationType : { id : ff8081816482352b01648249e8cc0001 , name : Receiving , description : null, locationTypeCode : BIN_LOCATION }, locationTypeCode : BIN_LOCATION } }","title":"Internal Locations"},{"location":"api-guide/internalLocation/#internal_locations","text":"","title":"Internal Locations"},{"location":"api-guide/internalLocation/#list","text":"$ curl -b cookies.txt -X GET -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/internalLocations?location.id=ff808181646b260401646b3f2ced0002 |jsonlint { data : [ { id : ff808181646d3ec101646d5e7d480001 , name : Bin 1 , description : null, locationNumber : null, locationGroup : null, parentLocation : { id : ff808181646b260401646b3f2ced0002 , name : Store 1 , description : null, locationNumber : STORE1 , locationGroup : null, parentLocation : null, locationType : { id : ff808181646b260401646b3ed20f0001 , name : Store , description : null, locationTypeCode : DEPOT }, locationTypeCode : DEPOT }, locationType : { id : cab2b4f35ba2d867015ba2e17e390001 , name : Bin Location , description : Default bin location type , locationTypeCode : BIN_LOCATION }, locationTypeCode : BIN_LOCATION }, { id : ff808181646d3ec101646d5e8e3e0003 , name : Bin 2 , description : null, locationNumber : null, locationGroup : null, parentLocation : { id : ff808181646b260401646b3f2ced0002 , name : Store 1 , description : null, locationNumber : STORE1 , locationGroup : null, parentLocation : null, locationType : { id : ff808181646b260401646b3ed20f0001 , name : Store , description : null, locationTypeCode : DEPOT }, locationTypeCode : DEPOT }, locationType : { id : cab2b4f35ba2d867015ba2e17e390001 , name : Bin Location , description : Default bin location type , locationTypeCode : BIN_LOCATION }, locationTypeCode : BIN_LOCATION }, { id : ff808181646d3ec101646d5ea1f20005 , name : Bin 3 , description : null, locationNumber : null, locationGroup : null, parentLocation : { id : ff808181646b260401646b3f2ced0002 , name : Store 1 , description : null, locationNumber : STORE1 , locationGroup : null, parentLocation : null, locationType : { id : ff808181646b260401646b3ed20f0001 , name : Store , description : null, locationTypeCode : DEPOT }, locationTypeCode : DEPOT }, locationType : { id : cab2b4f35ba2d867015ba2e17e390001 , name : Bin Location , description : Default bin location type , locationTypeCode : BIN_LOCATION }, locationTypeCode : BIN_LOCATION }, { id : ff808181648c6e2401648c95140f0001 , name : Receiving , description : null, locationNumber : null, locationGroup : null, parentLocation : { id : ff808181646b260401646b3f2ced0002 , name : Store 1 , description : null, locationNumber : STORE1 , locationGroup : null, parentLocation : null, locationType : { id : ff808181646b260401646b3ed20f0001 , name : Store , description : null, locationTypeCode : DEPOT }, locationTypeCode : DEPOT }, locationType : { id : ff8081816482352b01648249e8cc0001 , name : Receiving , description : null, locationTypeCode : BIN_LOCATION }, locationTypeCode : BIN_LOCATION } ] }","title":"List"},{"location":"api-guide/internalLocation/#read","text":"$ curl -b cookies.txt -X GET -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/internalLocations/ff808181648c6e2401648c95140f0001 |jsonlint { data : { id : ff808181648c6e2401648c95140f0001 , name : Receiving , description : null, locationNumber : null, locationGroup : null, parentLocation : { id : ff808181646b260401646b3f2ced0002 , name : Store 1 , description : null, locationNumber : STORE1 , locationGroup : null, parentLocation : null, locationType : { id : ff808181646b260401646b3ed20f0001 , name : Store , description : null, locationTypeCode : DEPOT }, locationTypeCode : DEPOT }, locationType : { id : ff8081816482352b01648249e8cc0001 , name : Receiving , description : null, locationTypeCode : BIN_LOCATION }, locationTypeCode : BIN_LOCATION } }","title":"Read"},{"location":"api-guide/localization/","text":"Localization API # List # Return all localized messages for a given locale (language code only). $ curl -b cookies.txt -X GET -H Content-Type: application/json https://openboxes.ngrok.io/openboxes/api/localizations?lang=fr |jsonlint { messages : { access.accessDenied.label : Acc\u00e8s Refus\u00e9 , access.accessDenied.message : acc\u00e8s \u00e0 action b {0} \\\\/b n''a pas \u00e9t\u00e9 accord\u00e9e \u00e0 l''utilisateur b {1} \\\\/b . \\r\\nVeuillez envoyer un email \u00e0 votre administrateur syst\u00e8me b {2} \\\\/b . , action.not.found.message : Action b {0} \\\\/b n'a pas \u00e9t\u00e9 trouv\u00e9e , admin.applicationVersion.label : Version de l'application , admin.emailEnabled.label : Courriel permis , admin.emailSettings.header : Param\u00e8tres de courriel , admin.externalConfigFile.label : Fichier de configuration externe , admin.generalSettings.header : Param\u00e8tres g\u00e9n\u00e9raux , admin.grailsVersion.label : Version Grails , admin.hostname.label : Nom de l'h\u00f4te , admin.label : Administration , admin.port.label : Port , admin.systemProperties.header : System Properties , admin.title : G\u00e9stion des param\u00e8tres , admin.upgrade.label : Upgrade , attribute.allowOther.label : Permetter autre , attribute.backToAttributes.link : Retourner aux attributs , attribute.label : Attributs de produits , attribute.options.label : Options , ... }, supportedLocales : [ ar , en , fr , de , it , es , pt ], currentLocale : fr } Read # Read localized message with arguments (English) # $ curl -b cookies.txt -X GET https://openboxes.ngrok.io/openboxes/api/localizations/dashboard.greeting.label?args=Justin args=Boston lang=en |jsonlint { code : dashboard.greeting.label , currentLocale : en } Read localized message with arguments (French) # $ curl -b cookies.txt -X GET https://openboxes.ngrok.io/openboxes/api/localizations/dashboard.greeting.label?args=Justin args=Boston lang=fr { code : dashboard.greeting.label , message : Bonjour, b Justin \\\\/b ! vous \u00eates actuellement connect\u00e9 dans le d\u00e9p\u00f4t de b Boston \\\\/b . , currentLocale : fr } Read localized message with arguments (Spanish) # $ curl -b cookies.txt -X GET https://openboxes.ngrok.io/openboxes/api/localizations/dashboard.greeting.label?args=Justin args=Boston lang=es { code : dashboard.greeting.label , message : Bienvenido, b Justin \\\\/b ! \\\\/span Se inicia la sesi\u00f3n en el b Boston \\\\/b del almac\u00e9n , currentLocale : es } Exceptions # List - Bogus Locale # $ curl -b cookies.txt -X GET -H Accept: application/json https://openboxes.ngrok.io/openboxes/api/localizations?lang=ensfsaf |jsonlint % Total % Received % Xferd Average Speed Time Time Time Current { errorCode : 500, errorMessage : class path resource [grails-app/i18n/messages_ensfsaf.properties] cannot be resolved to URL because it does not exist } Read - No message found # $ curl -b cookies.txt -X GET -H Content-Type: application/json https://openboxes.ngrok.io/openboxes/api/localizations/invalid.message.code?lang=en |jsonlint { errorCode : 500, errorMessage : No message found under code 'invalid.message.code' for locale 'en'. }","title":"Localizations"},{"location":"api-guide/localization/#localization_api","text":"","title":"Localization API"},{"location":"api-guide/localization/#list","text":"Return all localized messages for a given locale (language code only). $ curl -b cookies.txt -X GET -H Content-Type: application/json https://openboxes.ngrok.io/openboxes/api/localizations?lang=fr |jsonlint { messages : { access.accessDenied.label : Acc\u00e8s Refus\u00e9 , access.accessDenied.message : acc\u00e8s \u00e0 action b {0} \\\\/b n''a pas \u00e9t\u00e9 accord\u00e9e \u00e0 l''utilisateur b {1} \\\\/b . \\r\\nVeuillez envoyer un email \u00e0 votre administrateur syst\u00e8me b {2} \\\\/b . , action.not.found.message : Action b {0} \\\\/b n'a pas \u00e9t\u00e9 trouv\u00e9e , admin.applicationVersion.label : Version de l'application , admin.emailEnabled.label : Courriel permis , admin.emailSettings.header : Param\u00e8tres de courriel , admin.externalConfigFile.label : Fichier de configuration externe , admin.generalSettings.header : Param\u00e8tres g\u00e9n\u00e9raux , admin.grailsVersion.label : Version Grails , admin.hostname.label : Nom de l'h\u00f4te , admin.label : Administration , admin.port.label : Port , admin.systemProperties.header : System Properties , admin.title : G\u00e9stion des param\u00e8tres , admin.upgrade.label : Upgrade , attribute.allowOther.label : Permetter autre , attribute.backToAttributes.link : Retourner aux attributs , attribute.label : Attributs de produits , attribute.options.label : Options , ... }, supportedLocales : [ ar , en , fr , de , it , es , pt ], currentLocale : fr }","title":"List"},{"location":"api-guide/localization/#read","text":"","title":"Read"},{"location":"api-guide/localization/#read_localized_message_with_arguments_english","text":"$ curl -b cookies.txt -X GET https://openboxes.ngrok.io/openboxes/api/localizations/dashboard.greeting.label?args=Justin args=Boston lang=en |jsonlint { code : dashboard.greeting.label , currentLocale : en }","title":"Read localized message with arguments (English)"},{"location":"api-guide/localization/#read_localized_message_with_arguments_french","text":"$ curl -b cookies.txt -X GET https://openboxes.ngrok.io/openboxes/api/localizations/dashboard.greeting.label?args=Justin args=Boston lang=fr { code : dashboard.greeting.label , message : Bonjour, b Justin \\\\/b ! vous \u00eates actuellement connect\u00e9 dans le d\u00e9p\u00f4t de b Boston \\\\/b . , currentLocale : fr }","title":"Read localized message with arguments (French)"},{"location":"api-guide/localization/#read_localized_message_with_arguments_spanish","text":"$ curl -b cookies.txt -X GET https://openboxes.ngrok.io/openboxes/api/localizations/dashboard.greeting.label?args=Justin args=Boston lang=es { code : dashboard.greeting.label , message : Bienvenido, b Justin \\\\/b ! \\\\/span Se inicia la sesi\u00f3n en el b Boston \\\\/b del almac\u00e9n , currentLocale : es }","title":"Read localized message with arguments (Spanish)"},{"location":"api-guide/localization/#exceptions","text":"","title":"Exceptions"},{"location":"api-guide/localization/#list_-_bogus_locale","text":"$ curl -b cookies.txt -X GET -H Accept: application/json https://openboxes.ngrok.io/openboxes/api/localizations?lang=ensfsaf |jsonlint % Total % Received % Xferd Average Speed Time Time Time Current { errorCode : 500, errorMessage : class path resource [grails-app/i18n/messages_ensfsaf.properties] cannot be resolved to URL because it does not exist }","title":"List - Bogus Locale"},{"location":"api-guide/localization/#read_-_no_message_found","text":"$ curl -b cookies.txt -X GET -H Content-Type: application/json https://openboxes.ngrok.io/openboxes/api/localizations/invalid.message.code?lang=en |jsonlint { errorCode : 500, errorMessage : No message found under code 'invalid.message.code' for locale 'en'. }","title":"Read - No message found"},{"location":"api-guide/location/","text":"Location API # List # $ curl -X GET -b cookies.txt \\ -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/locations | jsonlint { data : [ { id : 1 , name : Boston Headquarters , description : null, locationNumber : null, locationGroup : null, parentLocation : null, locationType : { id : 2 , name : Depot|fr:D , description : Depot , locationTypeCode : DEPOT }, locationTypeCode : DEPOT }, { id : 2 , name : Miami Warehouse , description : null, locationNumber : null, locationGroup : null, parentLocation : null, locationType : { id : 2 , name : Depot|fr:D , description : Depot , locationTypeCode : DEPOT }, locationTypeCode : DEPOT }, { id : 3 , name : Tabarre Depot , description : null, locationNumber : null, locationGroup : null, parentLocation : null, locationType : { id : 2 , name : Depot|fr:D , description : Depot , locationTypeCode : DEPOT }, locationTypeCode : DEPOT }, { id : 4 , name : ZZZ Supply Company , description : null, locationNumber : null, locationGroup : null, parentLocation : null, locationType : { id : 2 , name : Depot|fr:D , description : Depot , locationTypeCode : DEPOT }, locationTypeCode : DEPOT }, { id : ff80818155dd68010155dd6bb9c00001 , name : Test Supplier , description : null, locationNumber : null, locationGroup : null, parentLocation : null, locationType : { id : 4 , name : Supplier|fr:Fournisseurs , description : Supplier , locationTypeCode : SUPPLIER }, locationTypeCode : SUPPLIER }, { id : ff8081816430012d0164301b8eda0008 , name : new depot location , description : null, locationNumber : null, locationGroup : null, parentLocation : null, locationType : { id : 2 , name : Depot|fr:D , description : Depot , locationTypeCode : DEPOT }, locationTypeCode : DEPOT } ] } Read # $ curl -X GET -b cookies.txt \\ -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/locations/1 | jsonlint { data : { id : 1 , name : Boston Headquarters , description : null, locationNumber : null, locationGroup : null, parentLocation : null, locationType : { id : 2 , name : Depot|fr:D , description : Depot , locationTypeCode : DEPOT }, locationTypeCode : DEPOT } } Create # $ curl -X POST -b cookies.txt \\ -H Content-Type: application/json \\ -d '{ name : new depot location , locationType.id : 2 }' \\ https://openboxes.ngrok.io/openboxes/api/locations | jsonlint { data : { id : ff8081816430012d01643016c6440006 , name : new depot location , description : null, locationNumber : null, locationGroup : null, parentLocation : null, locationType : { id : 2 , name : Depot|fr:D , description : Depot , locationTypeCode : DEPOT }, locationTypeCode : DEPOT } } Update # $ curl -X POST -b cookies.txt \\ -H Content-Type: application/json \\ -d '{ description : this is that new one }' \\ https://openboxes.ngrok.io/openboxes/api/locations/ff8081816430012d01643016c6440006 | jsonlint { data : { id : ff8081816430012d01643016c6440006 , name : new depot location , description : this is that new one , locationNumber : null, locationGroup : null, parentLocation : null, locationType : { id : 2 , name : Depot|fr:D , description : Depot , locationTypeCode : DEPOT }, locationTypeCode : DEPOT } } Delete # $ curl -i -X DELETE -b cookies.txt \\ -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/locations/ff8081816430012d0164301b8eda0008 HTTP/1.1 204 No Content Server: Apache-Coyote/1.1 Date: Sun, 24 Jun 2018 04:44:57 GMT","title":"Locations"},{"location":"api-guide/location/#location_api","text":"","title":"Location API"},{"location":"api-guide/location/#list","text":"$ curl -X GET -b cookies.txt \\ -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/locations | jsonlint { data : [ { id : 1 , name : Boston Headquarters , description : null, locationNumber : null, locationGroup : null, parentLocation : null, locationType : { id : 2 , name : Depot|fr:D , description : Depot , locationTypeCode : DEPOT }, locationTypeCode : DEPOT }, { id : 2 , name : Miami Warehouse , description : null, locationNumber : null, locationGroup : null, parentLocation : null, locationType : { id : 2 , name : Depot|fr:D , description : Depot , locationTypeCode : DEPOT }, locationTypeCode : DEPOT }, { id : 3 , name : Tabarre Depot , description : null, locationNumber : null, locationGroup : null, parentLocation : null, locationType : { id : 2 , name : Depot|fr:D , description : Depot , locationTypeCode : DEPOT }, locationTypeCode : DEPOT }, { id : 4 , name : ZZZ Supply Company , description : null, locationNumber : null, locationGroup : null, parentLocation : null, locationType : { id : 2 , name : Depot|fr:D , description : Depot , locationTypeCode : DEPOT }, locationTypeCode : DEPOT }, { id : ff80818155dd68010155dd6bb9c00001 , name : Test Supplier , description : null, locationNumber : null, locationGroup : null, parentLocation : null, locationType : { id : 4 , name : Supplier|fr:Fournisseurs , description : Supplier , locationTypeCode : SUPPLIER }, locationTypeCode : SUPPLIER }, { id : ff8081816430012d0164301b8eda0008 , name : new depot location , description : null, locationNumber : null, locationGroup : null, parentLocation : null, locationType : { id : 2 , name : Depot|fr:D , description : Depot , locationTypeCode : DEPOT }, locationTypeCode : DEPOT } ] }","title":"List"},{"location":"api-guide/location/#read","text":"$ curl -X GET -b cookies.txt \\ -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/locations/1 | jsonlint { data : { id : 1 , name : Boston Headquarters , description : null, locationNumber : null, locationGroup : null, parentLocation : null, locationType : { id : 2 , name : Depot|fr:D , description : Depot , locationTypeCode : DEPOT }, locationTypeCode : DEPOT } }","title":"Read"},{"location":"api-guide/location/#create","text":"$ curl -X POST -b cookies.txt \\ -H Content-Type: application/json \\ -d '{ name : new depot location , locationType.id : 2 }' \\ https://openboxes.ngrok.io/openboxes/api/locations | jsonlint { data : { id : ff8081816430012d01643016c6440006 , name : new depot location , description : null, locationNumber : null, locationGroup : null, parentLocation : null, locationType : { id : 2 , name : Depot|fr:D , description : Depot , locationTypeCode : DEPOT }, locationTypeCode : DEPOT } }","title":"Create"},{"location":"api-guide/location/#update","text":"$ curl -X POST -b cookies.txt \\ -H Content-Type: application/json \\ -d '{ description : this is that new one }' \\ https://openboxes.ngrok.io/openboxes/api/locations/ff8081816430012d01643016c6440006 | jsonlint { data : { id : ff8081816430012d01643016c6440006 , name : new depot location , description : this is that new one , locationNumber : null, locationGroup : null, parentLocation : null, locationType : { id : 2 , name : Depot|fr:D , description : Depot , locationTypeCode : DEPOT }, locationTypeCode : DEPOT } }","title":"Update"},{"location":"api-guide/location/#delete","text":"$ curl -i -X DELETE -b cookies.txt \\ -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/locations/ff8081816430012d0164301b8eda0008 HTTP/1.1 204 No Content Server: Apache-Coyote/1.1 Date: Sun, 24 Jun 2018 04:44:57 GMT","title":"Delete"},{"location":"api-guide/lookup/","text":"Search APIs # These are APIs that support lookup requests like listing and read operations (GET). That means that most of these APIs don't currently support create (POST), update (PUT) or delete (DELETE) operations. However, all of the domain objects in OpenBoxes will respond to the Generic API (e.g. /api/generic/product ), but the following API endpoints will handle more advanced search criteria. Bin Locations # Supports filtering by parentLocation.id $ curl -X GET -b cookies.txt -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/binLocations?parentLocation.id=1 | jsonlint { data : [ { id : ff808181641b3e5901641b4693c00003 , name : Bin 2 , description : null, locationNumber : null, locationGroup : null, parentLocation : { id : 1 , name : Boston Headquarters , description : null, locationNumber : null, locationGroup : null, parentLocation : null, locationType : { id : 2 , name : Depot|fr:D , description : Depot , locationTypeCode : DEPOT }, locationTypeCode : DEPOT }, locationType : { id : cab2b4f35ba2d867015ba2e17e390001 , name : Bin Location , description : Default bin location type , locationTypeCode : BIN_LOCATION }, locationTypeCode : BIN_LOCATION }, { id : ff808181641b3e5901641b46aa820005 , name : Bin 3 , description : null, locationNumber : null, locationGroup : null, parentLocation : { id : 1 , name : Boston Headquarters , description : null, locationNumber : null, locationGroup : null, parentLocation : null, locationType : { id : 2 , name : Depot|fr:D , description : Depot , locationTypeCode : DEPOT }, locationTypeCode : DEPOT }, locationType : { id : cab2b4f35ba2d867015ba2e17e390001 , name : Bin Location , description : Default bin location type , locationTypeCode : BIN_LOCATION }, locationTypeCode : BIN_LOCATION }, { id : ff808181641b3e5901641b467af30001 , name : Bin 1 , description : null, locationNumber : null, locationGroup : null, parentLocation : { id : 1 , name : Boston Headquarters , description : null, locationNumber : null, locationGroup : null, parentLocation : null, locationType : { id : 2 , name : Depot|fr:D , description : Depot , locationTypeCode : DEPOT }, locationTypeCode : DEPOT }, locationType : { id : cab2b4f35ba2d867015ba2e17e390001 , name : Bin Location , description : Default bin location type , locationTypeCode : BIN_LOCATION }, locationTypeCode : BIN_LOCATION } ] } Stocklists # Supports filtering by name , requisitionNumber , origin.id , destination.id as well as other attributes to be documented at a later time. $ curl -X GET -b cookies.txt \\ -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/stocklists | jsonlint { data : [ { id : ff808181641b2fd501641b39f4ef0001 , name : New Stocklist , requisitionNumber : 739BJY , description : null, isTemplate : true, type : STOCK , status : null, commodityClass : null, dateRequested : 2018-06-20T03:25:40Z , dateReviewed : null, dateVerified : null, dateChecked : null, dateDelivered : null, dateIssued : null, dateReceived : null, origin : { id : 2 , name : Miami Warehouse , description : null, locationNumber : null, locationGroup : null, parentLocation : null, locationType : { id : 2 , name : Depot|fr:D , description : Depot , locationTypeCode : DEPOT }, locationTypeCode : DEPOT }, destination : { id : 1 , name : Boston Headquarters , description : null, locationNumber : null, locationGroup : null, parentLocation : null, locationType : { id : 2 , name : Depot|fr:D , description : Depot , locationTypeCode : DEPOT }, locationTypeCode : DEPOT }, requestedBy : { id : 3 , username : jmiranda , firstName : Justin , lastName : Miranda , displayName : Justin Miranda }, reviewedBy : null, verifiedBy : null, checkedBy : null, deliveredBy : null, issuedBy : null, receivedBy : null, recipient : null, requisitionItems : [ { id : ff808181641b2fd501641b3a3b0c0002 , status : PENDING , requisition.id : ff808181641b2fd501641b39f4ef0001 , product : { id : ff80818155df9de40155df9e31000001 , productCode : 00001 , name : Ibuprofen 200mg , description : null, category : { id : 1 , name : Medicines } }, inventoryItem : null, quantity : 100, quantityApproved : null, quantityCanceled : null, cancelReasonCode : null, cancelComments : null, orderIndex : 0, changes : [], modification : null, substitution : null, picklistItems : [] }, { id : ff808181641b2fd501641b3a61200003 , status : PENDING , requisition.id : ff808181641b2fd501641b39f4ef0001 , product : { id : ff80818155df9de40155df9e321c0005 , productCode : 00002 , name : Tylenol 325mg , description : null, category : { id : 1 , name : Medicines } }, inventoryItem : null, quantity : 50, quantityApproved : null, quantityCanceled : null, cancelReasonCode : null, cancelComments : null, orderIndex : 1, changes : [], modification : null, substitution : null, picklistItems : [] }, { id : ff808181641b2fd501641b3aab850004 , status : PENDING , requisition.id : ff808181641b2fd501641b39f4ef0001 , product : { id : ff80818155df9de40155df9e33930011 , productCode : 00005 , name : Similac Advance low iron 400g , description : null, category : { id : 1 , name : Medicines } }, inventoryItem : null, quantity : 25, quantityApproved : null, quantityCanceled : null, cancelReasonCode : null, cancelComments : null, orderIndex : 2, changes : [], modification : null, substitution : null, picklistItems : [] } ] } ] }","title":"Lookup"},{"location":"api-guide/lookup/#search_apis","text":"These are APIs that support lookup requests like listing and read operations (GET). That means that most of these APIs don't currently support create (POST), update (PUT) or delete (DELETE) operations. However, all of the domain objects in OpenBoxes will respond to the Generic API (e.g. /api/generic/product ), but the following API endpoints will handle more advanced search criteria.","title":"Search APIs"},{"location":"api-guide/lookup/#bin_locations","text":"Supports filtering by parentLocation.id $ curl -X GET -b cookies.txt -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/binLocations?parentLocation.id=1 | jsonlint { data : [ { id : ff808181641b3e5901641b4693c00003 , name : Bin 2 , description : null, locationNumber : null, locationGroup : null, parentLocation : { id : 1 , name : Boston Headquarters , description : null, locationNumber : null, locationGroup : null, parentLocation : null, locationType : { id : 2 , name : Depot|fr:D , description : Depot , locationTypeCode : DEPOT }, locationTypeCode : DEPOT }, locationType : { id : cab2b4f35ba2d867015ba2e17e390001 , name : Bin Location , description : Default bin location type , locationTypeCode : BIN_LOCATION }, locationTypeCode : BIN_LOCATION }, { id : ff808181641b3e5901641b46aa820005 , name : Bin 3 , description : null, locationNumber : null, locationGroup : null, parentLocation : { id : 1 , name : Boston Headquarters , description : null, locationNumber : null, locationGroup : null, parentLocation : null, locationType : { id : 2 , name : Depot|fr:D , description : Depot , locationTypeCode : DEPOT }, locationTypeCode : DEPOT }, locationType : { id : cab2b4f35ba2d867015ba2e17e390001 , name : Bin Location , description : Default bin location type , locationTypeCode : BIN_LOCATION }, locationTypeCode : BIN_LOCATION }, { id : ff808181641b3e5901641b467af30001 , name : Bin 1 , description : null, locationNumber : null, locationGroup : null, parentLocation : { id : 1 , name : Boston Headquarters , description : null, locationNumber : null, locationGroup : null, parentLocation : null, locationType : { id : 2 , name : Depot|fr:D , description : Depot , locationTypeCode : DEPOT }, locationTypeCode : DEPOT }, locationType : { id : cab2b4f35ba2d867015ba2e17e390001 , name : Bin Location , description : Default bin location type , locationTypeCode : BIN_LOCATION }, locationTypeCode : BIN_LOCATION } ] }","title":"Bin Locations"},{"location":"api-guide/lookup/#stocklists","text":"Supports filtering by name , requisitionNumber , origin.id , destination.id as well as other attributes to be documented at a later time. $ curl -X GET -b cookies.txt \\ -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/stocklists | jsonlint { data : [ { id : ff808181641b2fd501641b39f4ef0001 , name : New Stocklist , requisitionNumber : 739BJY , description : null, isTemplate : true, type : STOCK , status : null, commodityClass : null, dateRequested : 2018-06-20T03:25:40Z , dateReviewed : null, dateVerified : null, dateChecked : null, dateDelivered : null, dateIssued : null, dateReceived : null, origin : { id : 2 , name : Miami Warehouse , description : null, locationNumber : null, locationGroup : null, parentLocation : null, locationType : { id : 2 , name : Depot|fr:D , description : Depot , locationTypeCode : DEPOT }, locationTypeCode : DEPOT }, destination : { id : 1 , name : Boston Headquarters , description : null, locationNumber : null, locationGroup : null, parentLocation : null, locationType : { id : 2 , name : Depot|fr:D , description : Depot , locationTypeCode : DEPOT }, locationTypeCode : DEPOT }, requestedBy : { id : 3 , username : jmiranda , firstName : Justin , lastName : Miranda , displayName : Justin Miranda }, reviewedBy : null, verifiedBy : null, checkedBy : null, deliveredBy : null, issuedBy : null, receivedBy : null, recipient : null, requisitionItems : [ { id : ff808181641b2fd501641b3a3b0c0002 , status : PENDING , requisition.id : ff808181641b2fd501641b39f4ef0001 , product : { id : ff80818155df9de40155df9e31000001 , productCode : 00001 , name : Ibuprofen 200mg , description : null, category : { id : 1 , name : Medicines } }, inventoryItem : null, quantity : 100, quantityApproved : null, quantityCanceled : null, cancelReasonCode : null, cancelComments : null, orderIndex : 0, changes : [], modification : null, substitution : null, picklistItems : [] }, { id : ff808181641b2fd501641b3a61200003 , status : PENDING , requisition.id : ff808181641b2fd501641b39f4ef0001 , product : { id : ff80818155df9de40155df9e321c0005 , productCode : 00002 , name : Tylenol 325mg , description : null, category : { id : 1 , name : Medicines } }, inventoryItem : null, quantity : 50, quantityApproved : null, quantityCanceled : null, cancelReasonCode : null, cancelComments : null, orderIndex : 1, changes : [], modification : null, substitution : null, picklistItems : [] }, { id : ff808181641b2fd501641b3aab850004 , status : PENDING , requisition.id : ff808181641b2fd501641b39f4ef0001 , product : { id : ff80818155df9de40155df9e33930011 , productCode : 00005 , name : Similac Advance low iron 400g , description : null, category : { id : 1 , name : Medicines } }, inventoryItem : null, quantity : 25, quantityApproved : null, quantityCanceled : null, cancelReasonCode : null, cancelComments : null, orderIndex : 2, changes : [], modification : null, substitution : null, picklistItems : [] } ] } ] }","title":"Stocklists"},{"location":"api-guide/product/","text":"Product API # Product API Create List Search Read Exceptions Create - Validation Errors Read - Product not found Sub Resources Available Items Available Bin Locations Product Associations Create # Create a new product. $ curl -i -X POST -H Content-Type: application/json -b cookies.txt \\ -d '{ name : New product , category.id : ff80818163e2de8d0163eb93c5a00001 }' https://openboxes.ngrok.io/openboxes/api/products HTTP/1.1 200 OK Server: Apache-Coyote/1.1 Content-Type: application/json;charset=UTF-8 Transfer-Encoding: chunked Date: Sun, 10 Jun 2018 21:37:12 GMT { id : ff80818163e2de8d0163eba1b1e90002 , productCode :null, name : New product , category :{ id : ff80818163e2de8d0163eb93c5a00001 , name : New category }, description :null, dateCreated : 2018-06-10T21:37:12Z , lastUpdated : 2018-06-10T21:37:12Z } List # Return all products (results paginated using offset and max) $ curl -i -X GET -H Content-Type: application/json -b cookies.txt \\ -d '{ offset :0, max :1 }' https://openboxes.ngrok.io/openboxes/api/products HTTP/1.1 200 OK Server: Apache-Coyote/1.1 Content-Type: application/json;charset=UTF-8 Transfer-Encoding: chunked Date: Sun, 10 Jun 2018 22:13:27 GMT [{ id : ff80818155df9de40155df9e329b0009 , productCode : 00003 , name : Aspirin 20mg , category : { id : 1 , name : Medicines }, description : null, dateCreated : 2016-07-12T14:58:55Z , lastUpdated : 2016-07-12T14:58:55Z }] Search # Return products with Name starting with 'New product' (results paginged using offset and max) $ curl -i -X GET -H Content-Type: application/json -b cookies.txt \\ -d '{ name : Aspirin , offset :0, max :1 }' https://openboxes.ngrok.io/openboxes/api/products HTTP/1.1 200 OK Server: Apache-Coyote/1.1 Content-Type: application/json;charset=UTF-8 Transfer-Encoding: chunked Date: Sun, 10 Jun 2018 22:15:08 GMT [{ id : ff80818163e2de8d0163eba1b1e90002 , productCode : KX43 , name : New product , category : { id : ff80818163e2de8d0163eb93c5a00001 , name : New category }, description : null, dateCreated : 2018-06-10T21:37:13Z , lastUpdated : 2018-06-10T21:37:13Z }] Read # $ curl -i -X GET -H Content-Type: application/json -b cookies.txt \\ https://openboxes.ngrok.io/openboxes/api/products/ff80818163e2de8d0163eba1b1e90002 HTTP/1.1 200 OK Server: Apache-Coyote/1.1 Content-Type: application/json;charset=UTF-8 Transfer-Encoding: chunked Date: Sun, 10 Jun 2018 21:38:27 GMT { id : ff80818163e2de8d0163eba1b1e90002 , productCode : KX43 , name : New product , category : { id : ff80818163e2de8d0163eb93c5a00001 , name : New category }, description : null, dateCreated : 2018-06-10T21:37:13Z , lastUpdated : 2018-06-10T21:37:13Z } Exceptions # Create - Validation Errors # Returns validation error (Category is a required field of Product) $ curl -i -X POST -H Content-Type: application/json -b cookies.txt \\ -d '{ name : New product , category :{ id : ff80818163e2de8d0163eb93c5a00001 }}' \\ https://openboxes.ngrok.io/openboxes/api/products HTTP/1.1 500 Internal Server Error Server: Apache-Coyote/1.1 Content-Type: application/json;charset=UTF-8 Transfer-Encoding: chunked Date: Sun, 10 Jun 2018 21:35:58 GMT { errorCode :500, errorMessage : Unable to save category due to errors:\\n- Field error in object 'org.pih.warehouse.product.Product' on field 'category': rejected value [null]; codes [org.pih.warehouse.product.Product.category.nullable.error.org.pih.warehouse.product.Product.category,org.pih.warehouse.product.Product.category.nullable.error.category,org.pih.warehouse.product.Product.category.nullable.error.org.pih.warehouse.product.Category,org.pih.warehouse.product.Product.category.nullable.error,product.category.nullable.error.org.pih.warehouse.product.Product.category,product.category.nullable.error.category,product.category.nullable.error.org.pih.warehouse.product.Category,product.category.nullable.error,org.pih.warehouse.product.Product.category.nullable.org.pih.warehouse.product.Product.category,org.pih.warehouse.product.Product.category.nullable.category,org.pih.warehouse.product.Product.category.nullable.org.pih.warehouse.product.Category,org.pih.warehouse.product.Product.category.nullable,product.category.nullable.org.pih.warehouse.product.Product.category,product.category.nullable.category,product.category.nullable.org.pih.warehouse.product.Category,product.category.nullable,nullable.org.pih.warehouse.product.Product.category,nullable.category,nullable.org.pih.warehouse.product.Category,nullable]; arguments [category,Product]; default message [Property [{0}] of class [{1}] cannot be null]\\n } Read - Product not found # $ curl -i -X GET -H Content-Type: application/json -b cookies.txt \\ https://openboxes.ngrok.io/openboxes/api/products/invalididentifier HTTP/1.1 404 Not Found Server: Apache-Coyote/1.1 Content-Type: application/json;charset=UTF-8 Transfer-Encoding: chunked Date: Sun, 10 Jun 2018 21:43:37 GMT { errorCode :404, errorMessage : Resource not found } Sub Resources # Available Items # NOTE: I'm realizing it could be dangerous to use this endpoint because it leaves the bin location empty. This is misleading since you should not be able to make any changes to the quantity associated with the inventory item without specifying a valid bin location. $ curl -b cookies.txt -X GET -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/products/ff80818155df9de40155df9e3312000d/availableItems?location.id=1 |jsonlint { data : [ { inventoryItem.id : ff80818155df9de40155df9e3356000e , product.name : General Pain Reliever , productCode : 00004 , lotNumber : lot57 , expirationDate : 2017-01-28T15:58:54Z , binLocation.id : null, binLocation.name : null, quantityAvailable : 10000 } ] } Available Bin Locations # $ curl -b cookies.txt -X GET -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/products/ff80818155df9de40155df9e3312000d/availableItems?location.id=1 |jsonlint { data : [ { inventoryItem.id : ff8081816473166d0164731813990001 , product.name : General Pain Reliever , productCode : 00004 , lotNumber : 252151251 , expirationDate : 2025-01-01T06:00:00Z , binLocation.id : null, binLocation.name : null, quantityAvailable : 0 }, { inventoryItem.id : ff80818155df9de40155df9e3356000e , product.name : General Pain Reliever , productCode : 00004 , lotNumber : lot57 , expirationDate : 2017-01-28T15:58:54Z , binLocation.id : null, binLocation.name : null, quantityAvailable : 10000 }, { inventoryItem.id : ff8081816473166d0164731814310002 , product.name : General Pain Reliever , productCode : 00004 , lotNumber : 214214212 , expirationDate : 2020-01-01T06:00:00Z , binLocation.id : null, binLocation.name : null, quantityAvailable : 0 } ] } Product Associations # $ curl -b cookies.txt -X GET -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/products/ff80818155df9de40155df9e31000001/associatedProducts?type=SUBSTITUTE type=EQUIVALENT location.id=1 \\ |jsonlint { data : { product : { id : ff80818155df9de40155df9e31000001 , productCode : 00001 , name : Ibuprofen 200mg , description : null, category : { id : 1 , name : Medicines } }, availableItems : [ { inventoryItem : { id : ff80818155df9de40155df9e31930002 , product : { id : ff80818155df9de40155df9e31000001 , name : Ibuprofen 200mg , productCode : 00001 }, lotNumber : lot57 , expirationDate : 2016-07-15T14:58:53Z }, quantity : 9990 } ], hasAssociations : true, hasEarlierExpiringItems : false, productAssociations : [ { id : ff808181643c655f01643c6ed8870001 , type : SUBSTITUTE , product : { id : ff80818155df9de40155df9e321c0005 , productCode : 00002 , name : Tylenol 325mg , description : null, category : { id : 1 , name : Medicines } }, conversionFactor : 1, comments : null, minExpirationDate : 2016-08-01T14:58:54Z , availableQuantity : 10244 }, { id : ff808181643f048401643f93b95b0005 , type : SUBSTITUTE , product : { id : ff80818155df9de40155df9e3312000d , productCode : 00004 , name : General Pain Reliever , description : null, category : { id : 1 , name : Medicines } }, conversionFactor : 1, comments : null, minExpirationDate : 2017-01-28T15:58:54Z , availableQuantity : 10000 } ] } }","title":"Products"},{"location":"api-guide/product/#product_api","text":"Product API Create List Search Read Exceptions Create - Validation Errors Read - Product not found Sub Resources Available Items Available Bin Locations Product Associations","title":"Product API"},{"location":"api-guide/product/#create","text":"Create a new product. $ curl -i -X POST -H Content-Type: application/json -b cookies.txt \\ -d '{ name : New product , category.id : ff80818163e2de8d0163eb93c5a00001 }' https://openboxes.ngrok.io/openboxes/api/products HTTP/1.1 200 OK Server: Apache-Coyote/1.1 Content-Type: application/json;charset=UTF-8 Transfer-Encoding: chunked Date: Sun, 10 Jun 2018 21:37:12 GMT { id : ff80818163e2de8d0163eba1b1e90002 , productCode :null, name : New product , category :{ id : ff80818163e2de8d0163eb93c5a00001 , name : New category }, description :null, dateCreated : 2018-06-10T21:37:12Z , lastUpdated : 2018-06-10T21:37:12Z }","title":"Create"},{"location":"api-guide/product/#list","text":"Return all products (results paginated using offset and max) $ curl -i -X GET -H Content-Type: application/json -b cookies.txt \\ -d '{ offset :0, max :1 }' https://openboxes.ngrok.io/openboxes/api/products HTTP/1.1 200 OK Server: Apache-Coyote/1.1 Content-Type: application/json;charset=UTF-8 Transfer-Encoding: chunked Date: Sun, 10 Jun 2018 22:13:27 GMT [{ id : ff80818155df9de40155df9e329b0009 , productCode : 00003 , name : Aspirin 20mg , category : { id : 1 , name : Medicines }, description : null, dateCreated : 2016-07-12T14:58:55Z , lastUpdated : 2016-07-12T14:58:55Z }]","title":"List"},{"location":"api-guide/product/#search","text":"Return products with Name starting with 'New product' (results paginged using offset and max) $ curl -i -X GET -H Content-Type: application/json -b cookies.txt \\ -d '{ name : Aspirin , offset :0, max :1 }' https://openboxes.ngrok.io/openboxes/api/products HTTP/1.1 200 OK Server: Apache-Coyote/1.1 Content-Type: application/json;charset=UTF-8 Transfer-Encoding: chunked Date: Sun, 10 Jun 2018 22:15:08 GMT [{ id : ff80818163e2de8d0163eba1b1e90002 , productCode : KX43 , name : New product , category : { id : ff80818163e2de8d0163eb93c5a00001 , name : New category }, description : null, dateCreated : 2018-06-10T21:37:13Z , lastUpdated : 2018-06-10T21:37:13Z }]","title":"Search"},{"location":"api-guide/product/#read","text":"$ curl -i -X GET -H Content-Type: application/json -b cookies.txt \\ https://openboxes.ngrok.io/openboxes/api/products/ff80818163e2de8d0163eba1b1e90002 HTTP/1.1 200 OK Server: Apache-Coyote/1.1 Content-Type: application/json;charset=UTF-8 Transfer-Encoding: chunked Date: Sun, 10 Jun 2018 21:38:27 GMT { id : ff80818163e2de8d0163eba1b1e90002 , productCode : KX43 , name : New product , category : { id : ff80818163e2de8d0163eb93c5a00001 , name : New category }, description : null, dateCreated : 2018-06-10T21:37:13Z , lastUpdated : 2018-06-10T21:37:13Z }","title":"Read"},{"location":"api-guide/product/#exceptions","text":"","title":"Exceptions"},{"location":"api-guide/product/#create_-_validation_errors","text":"Returns validation error (Category is a required field of Product) $ curl -i -X POST -H Content-Type: application/json -b cookies.txt \\ -d '{ name : New product , category :{ id : ff80818163e2de8d0163eb93c5a00001 }}' \\ https://openboxes.ngrok.io/openboxes/api/products HTTP/1.1 500 Internal Server Error Server: Apache-Coyote/1.1 Content-Type: application/json;charset=UTF-8 Transfer-Encoding: chunked Date: Sun, 10 Jun 2018 21:35:58 GMT { errorCode :500, errorMessage : Unable to save category due to errors:\\n- Field error in object 'org.pih.warehouse.product.Product' on field 'category': rejected value [null]; codes [org.pih.warehouse.product.Product.category.nullable.error.org.pih.warehouse.product.Product.category,org.pih.warehouse.product.Product.category.nullable.error.category,org.pih.warehouse.product.Product.category.nullable.error.org.pih.warehouse.product.Category,org.pih.warehouse.product.Product.category.nullable.error,product.category.nullable.error.org.pih.warehouse.product.Product.category,product.category.nullable.error.category,product.category.nullable.error.org.pih.warehouse.product.Category,product.category.nullable.error,org.pih.warehouse.product.Product.category.nullable.org.pih.warehouse.product.Product.category,org.pih.warehouse.product.Product.category.nullable.category,org.pih.warehouse.product.Product.category.nullable.org.pih.warehouse.product.Category,org.pih.warehouse.product.Product.category.nullable,product.category.nullable.org.pih.warehouse.product.Product.category,product.category.nullable.category,product.category.nullable.org.pih.warehouse.product.Category,product.category.nullable,nullable.org.pih.warehouse.product.Product.category,nullable.category,nullable.org.pih.warehouse.product.Category,nullable]; arguments [category,Product]; default message [Property [{0}] of class [{1}] cannot be null]\\n }","title":"Create - Validation Errors"},{"location":"api-guide/product/#read_-_product_not_found","text":"$ curl -i -X GET -H Content-Type: application/json -b cookies.txt \\ https://openboxes.ngrok.io/openboxes/api/products/invalididentifier HTTP/1.1 404 Not Found Server: Apache-Coyote/1.1 Content-Type: application/json;charset=UTF-8 Transfer-Encoding: chunked Date: Sun, 10 Jun 2018 21:43:37 GMT { errorCode :404, errorMessage : Resource not found }","title":"Read - Product not found"},{"location":"api-guide/product/#sub_resources","text":"","title":"Sub Resources"},{"location":"api-guide/product/#available_items","text":"NOTE: I'm realizing it could be dangerous to use this endpoint because it leaves the bin location empty. This is misleading since you should not be able to make any changes to the quantity associated with the inventory item without specifying a valid bin location. $ curl -b cookies.txt -X GET -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/products/ff80818155df9de40155df9e3312000d/availableItems?location.id=1 |jsonlint { data : [ { inventoryItem.id : ff80818155df9de40155df9e3356000e , product.name : General Pain Reliever , productCode : 00004 , lotNumber : lot57 , expirationDate : 2017-01-28T15:58:54Z , binLocation.id : null, binLocation.name : null, quantityAvailable : 10000 } ] }","title":"Available Items"},{"location":"api-guide/product/#available_bin_locations","text":"$ curl -b cookies.txt -X GET -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/products/ff80818155df9de40155df9e3312000d/availableItems?location.id=1 |jsonlint { data : [ { inventoryItem.id : ff8081816473166d0164731813990001 , product.name : General Pain Reliever , productCode : 00004 , lotNumber : 252151251 , expirationDate : 2025-01-01T06:00:00Z , binLocation.id : null, binLocation.name : null, quantityAvailable : 0 }, { inventoryItem.id : ff80818155df9de40155df9e3356000e , product.name : General Pain Reliever , productCode : 00004 , lotNumber : lot57 , expirationDate : 2017-01-28T15:58:54Z , binLocation.id : null, binLocation.name : null, quantityAvailable : 10000 }, { inventoryItem.id : ff8081816473166d0164731814310002 , product.name : General Pain Reliever , productCode : 00004 , lotNumber : 214214212 , expirationDate : 2020-01-01T06:00:00Z , binLocation.id : null, binLocation.name : null, quantityAvailable : 0 } ] }","title":"Available Bin Locations"},{"location":"api-guide/product/#product_associations","text":"$ curl -b cookies.txt -X GET -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/products/ff80818155df9de40155df9e31000001/associatedProducts?type=SUBSTITUTE type=EQUIVALENT location.id=1 \\ |jsonlint { data : { product : { id : ff80818155df9de40155df9e31000001 , productCode : 00001 , name : Ibuprofen 200mg , description : null, category : { id : 1 , name : Medicines } }, availableItems : [ { inventoryItem : { id : ff80818155df9de40155df9e31930002 , product : { id : ff80818155df9de40155df9e31000001 , name : Ibuprofen 200mg , productCode : 00001 }, lotNumber : lot57 , expirationDate : 2016-07-15T14:58:53Z }, quantity : 9990 } ], hasAssociations : true, hasEarlierExpiringItems : false, productAssociations : [ { id : ff808181643c655f01643c6ed8870001 , type : SUBSTITUTE , product : { id : ff80818155df9de40155df9e321c0005 , productCode : 00002 , name : Tylenol 325mg , description : null, category : { id : 1 , name : Medicines } }, conversionFactor : 1, comments : null, minExpirationDate : 2016-08-01T14:58:54Z , availableQuantity : 10244 }, { id : ff808181643f048401643f93b95b0005 , type : SUBSTITUTE , product : { id : ff80818155df9de40155df9e3312000d , productCode : 00004 , name : General Pain Reliever , description : null, category : { id : 1 , name : Medicines } }, conversionFactor : 1, comments : null, minExpirationDate : 2017-01-28T15:58:54Z , availableQuantity : 10000 } ] } }","title":"Product Associations"},{"location":"api-guide/putaway/","text":"Putaway API # Get Putaway Candidates # $ curl -b cookies.txt -X GET -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/putaways?location.id=ff808181646b260401646b3f2ced0002 |jsonlint { data : [ { putawayStatus : TODO, currentFacility.id : ff808181646b260401646b3f2ced0002 , currentFacility.name : Store 1 , currentLocation.id : ff808181648c6e2401648c95140f0001 , currentLocation.name : Receiving , container : null, product.id : ff80818155df9de40155df9e31000001 , productCode : AB12 , product.name : Ibuprofen 200mg , inventoryItem.id : ff808181646b260401646b495487000d , lotNumber : ABC789 , expirationDate : 2020-01-01T06:00:00Z , recipient.id : null, recipient.name : null, availableBins : [ Bin 2 , Bin 3 , Receiving , Bin 1 ], putawayFacility.id : null, putawayFacility.name : null, putawayLocation.id : null, putawayLocation.name : null, quantity : 5 } ] } Create Putaway # Request # $ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d @createPutawayItem.json \\ https://openboxes.ngrok.io/openboxes/api/putaways |jsonlint Data # { putawayNumber : , putawayAssignee.id : , putawayStatus : , putawayDate : , putawayItems :[{ putawayStatus : TODO , currentFacility.id : ff808181646b260401646b3f2ced0002 , currentLocation.id : ff808181648c6e2401648c95140f0001 , product.id : ff80818155df9de40155df9e31000001 , inventoryItem.id : ff808181646b260401646b495487000d , recipient.id : 1 , putawayFacility.id : , putawayLocation.id : , quantity : 5 }] } Response # { data : { putawayNumber : ABC123 , putawayStatus : TODO , putawayDate : 2019-01-01T06:00:00Z , putawayAssignee : { id : 1 , name : Mr Administrator , firstName : Mr , lastName : Administrator , email : admin@pih.org , username : admin }, putawayItems : [ { putawayStatus : TODO , currentFacility.id : ff808181646b260401646b3f2ced0002 , currentFacility.name : Store 1 , currentLocation.id : ff808181648c6e2401648c95140f0001 , currentLocation.name : Receiving , container : null, product.id : ff80818155df9de40155df9e31000001 , productCode : AB12 , product.name : Ibuprofen 200mg , inventoryItem.id : ff808181646b260401646b495487000d , lotNumber : ABC789 , expirationDate : 2020-01-01T06:00:00Z , recipient.id : 1 , recipient.name : Mr Administrator , availableBins : [ Bin 2 , Bin 3 , Receiving , Bin 1 ], putawayFacility.id : null, putawayFacility.name : null, putawayLocation.id : null, putawayLocation.name : null, quantity : 5 } ] } } Update Putaway # Request # $ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d @updatePutaway.json \\ https://openboxes.ngrok.io/openboxes/api/putaways |jsonlint Data # { putawayNumber : ABC123 , putawayAssignee.id : 1 , putawayStatus : TODO , putawayDate : 07/13/2018 , putawayItems :[{ putawayStatus : TODO , currentFacility.id : ff808181646b260401646b3f2ced0002 , currentLocation.id : ff808181648c6e2401648c95140f0001 , product.id : ff80818155df9de40155df9e31000001 , inventoryItem.id : ff808181646b260401646b495487000d , recipient.id : 1 , putawayFacility.id : ff808181646b260401646b3f2ced0002 , putawayLocation.id : ff808181646d3ec101646d5e7d480001 , quantity : 5 }] } Split Putaway Item # Request # $ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d @splitPutawayItems.json \\ https://openboxes.ngrok.io/openboxes/api/putaways |jsonlint Data # { putawayNumber : , putawayAssignee.id : 1 , putawayStatus : TODO , putawayDate : 01/01/2019 , putawayItems :[{ putawayStatus : TODO , currentFacility.id : ff808181646b260401646b3f2ced0002 , currentLocation.id : ff808181648c6e2401648c95140f0001 , product.id : ff80818155df9de40155df9e31000001 , inventoryItem.id : ff808181646b260401646b495487000d , recipient.id : 1 , putawayFacility.id : ff808181646b260401646b3f2ced0002 , putawayLocation.id : ff808181646d3ec101646d5e7d480001 , quantity : 5, splitItems :[{ putawayFacility.id : ff808181646b260401646b3f2ced0002 , putawayLocation.id : ff808181646d3ec101646d5e7d480001 , quantity : 2 , }, { putawayFacility.id : ff808181646b260401646b3f2ced0002 , putawayLocation.id : ff808181646d3ec101646d5e7d480001 , quantity : 3 , } ] }] } Response # { data : { id : null, putawayNumber : 824VDY , putawayStatus : TODO , putawayDate : 2019-01-01T06:00:00Z , putawayAssignee : { id : 1 , name : Mr Administrator , firstName : Mr , lastName : Administrator , email : admin@pih.org , username : admin }, putawayItems : [ { id : null, stockMovement.id : Receiving , stockMovement.name : Receiving , putawayStatus : TODO , transactionNumber : null, currentFacility.id : ff808181646b260401646b3f2ced0002 , currentFacility.name : Store 1 , currentLocation.id : ff808181648c6e2401648c95140f0001 , currentLocation.name : Receiving , container : null, product.id : ff80818155df9de40155df9e31000001 , product.productCode : AB12 , product.name : Ibuprofen 200mg , inventoryItem.id : ff808181646b260401646b495487000d , inventoryItem.lotNumber : ABC789 , inventoryItem.expirationDate : 2020-01-01T06:00:00Z , recipient.id : 1 , recipient.name : Mr Administrator , currentBins : Bin 1,Bin 2,Bin 3,Receiving , currentBinsAbbreviated : Bin 1,Bin 2,Bin 3,Rece... , putawayFacility.id : ff808181646b260401646b3f2ced0002 , putawayFacility.name : Store 1 , putawayLocation.id : ff808181646d3ec101646d5e7d480001 , putawayLocation.name : Bin 1 , quantity : 2 }, { id : null, stockMovement.id : Receiving , stockMovement.name : Receiving , putawayStatus : TODO , transactionNumber : null, currentFacility.id : ff808181646b260401646b3f2ced0002 , currentFacility.name : Store 1 , currentLocation.id : ff808181648c6e2401648c95140f0001 , currentLocation.name : Receiving , container : null, product.id : ff80818155df9de40155df9e31000001 , product.productCode : AB12 , product.name : Ibuprofen 200mg , inventoryItem.id : ff808181646b260401646b495487000d , inventoryItem.lotNumber : ABC789 , inventoryItem.expirationDate : 2020-01-01T06:00:00Z , recipient.id : 1 , recipient.name : Mr Administrator , currentBins : Bin 1,Bin 2,Bin 3,Receiving , currentBinsAbbreviated : Bin 1,Bin 2,Bin 3,Rece... , putawayFacility.id : ff808181646b260401646b3f2ced0002 , putawayFacility.name : Store 1 , putawayLocation.id : ff808181646d3ec101646d5e7d480001 , putawayLocation.name : Bin 1 , quantity : 3 } ] } } Complete Putaway # Change the putawayStatus of the root object to COMPLETE in order to actually complete the putaway process. NOTE: If you see a transactionNumber associated with each putaway item you will know that it worked. Do not send this request more than once or else you will create multiple putaways. Request # $ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d @updatePutaway.json \\ https://openboxes.ngrok.io/openboxes/api/putaways |jsonlint Data # { putawayNumber : ABC123 , putawayAssignee.id : 1 , putawayStatus : COMPLETE , putawayDate : 07/13/2018 , putawayItems :[{ putawayStatus : TODO , currentFacility.id : ff808181646b260401646b3f2ced0002 , currentLocation.id : ff808181648c6e2401648c95140f0001 , product.id : ff80818155df9de40155df9e31000001 , inventoryItem.id : ff808181646b260401646b495487000d , recipient.id : 1 , putawayFacility.id : ff808181646b260401646b3f2ced0002 , putawayLocation.id : ff808181646d3ec101646d5e7d480001 , quantity : 5 }] }","title":"Putaway"},{"location":"api-guide/putaway/#putaway_api","text":"","title":"Putaway API"},{"location":"api-guide/putaway/#get_putaway_candidates","text":"$ curl -b cookies.txt -X GET -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/putaways?location.id=ff808181646b260401646b3f2ced0002 |jsonlint { data : [ { putawayStatus : TODO, currentFacility.id : ff808181646b260401646b3f2ced0002 , currentFacility.name : Store 1 , currentLocation.id : ff808181648c6e2401648c95140f0001 , currentLocation.name : Receiving , container : null, product.id : ff80818155df9de40155df9e31000001 , productCode : AB12 , product.name : Ibuprofen 200mg , inventoryItem.id : ff808181646b260401646b495487000d , lotNumber : ABC789 , expirationDate : 2020-01-01T06:00:00Z , recipient.id : null, recipient.name : null, availableBins : [ Bin 2 , Bin 3 , Receiving , Bin 1 ], putawayFacility.id : null, putawayFacility.name : null, putawayLocation.id : null, putawayLocation.name : null, quantity : 5 } ] }","title":"Get Putaway Candidates"},{"location":"api-guide/putaway/#create_putaway","text":"","title":"Create Putaway"},{"location":"api-guide/putaway/#request","text":"$ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d @createPutawayItem.json \\ https://openboxes.ngrok.io/openboxes/api/putaways |jsonlint","title":"Request"},{"location":"api-guide/putaway/#data","text":"{ putawayNumber : , putawayAssignee.id : , putawayStatus : , putawayDate : , putawayItems :[{ putawayStatus : TODO , currentFacility.id : ff808181646b260401646b3f2ced0002 , currentLocation.id : ff808181648c6e2401648c95140f0001 , product.id : ff80818155df9de40155df9e31000001 , inventoryItem.id : ff808181646b260401646b495487000d , recipient.id : 1 , putawayFacility.id : , putawayLocation.id : , quantity : 5 }] }","title":"Data"},{"location":"api-guide/putaway/#response","text":"{ data : { putawayNumber : ABC123 , putawayStatus : TODO , putawayDate : 2019-01-01T06:00:00Z , putawayAssignee : { id : 1 , name : Mr Administrator , firstName : Mr , lastName : Administrator , email : admin@pih.org , username : admin }, putawayItems : [ { putawayStatus : TODO , currentFacility.id : ff808181646b260401646b3f2ced0002 , currentFacility.name : Store 1 , currentLocation.id : ff808181648c6e2401648c95140f0001 , currentLocation.name : Receiving , container : null, product.id : ff80818155df9de40155df9e31000001 , productCode : AB12 , product.name : Ibuprofen 200mg , inventoryItem.id : ff808181646b260401646b495487000d , lotNumber : ABC789 , expirationDate : 2020-01-01T06:00:00Z , recipient.id : 1 , recipient.name : Mr Administrator , availableBins : [ Bin 2 , Bin 3 , Receiving , Bin 1 ], putawayFacility.id : null, putawayFacility.name : null, putawayLocation.id : null, putawayLocation.name : null, quantity : 5 } ] } }","title":"Response"},{"location":"api-guide/putaway/#update_putaway","text":"","title":"Update Putaway"},{"location":"api-guide/putaway/#request_1","text":"$ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d @updatePutaway.json \\ https://openboxes.ngrok.io/openboxes/api/putaways |jsonlint","title":"Request"},{"location":"api-guide/putaway/#data_1","text":"{ putawayNumber : ABC123 , putawayAssignee.id : 1 , putawayStatus : TODO , putawayDate : 07/13/2018 , putawayItems :[{ putawayStatus : TODO , currentFacility.id : ff808181646b260401646b3f2ced0002 , currentLocation.id : ff808181648c6e2401648c95140f0001 , product.id : ff80818155df9de40155df9e31000001 , inventoryItem.id : ff808181646b260401646b495487000d , recipient.id : 1 , putawayFacility.id : ff808181646b260401646b3f2ced0002 , putawayLocation.id : ff808181646d3ec101646d5e7d480001 , quantity : 5 }] }","title":"Data"},{"location":"api-guide/putaway/#split_putaway_item","text":"","title":"Split Putaway Item"},{"location":"api-guide/putaway/#request_2","text":"$ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d @splitPutawayItems.json \\ https://openboxes.ngrok.io/openboxes/api/putaways |jsonlint","title":"Request"},{"location":"api-guide/putaway/#data_2","text":"{ putawayNumber : , putawayAssignee.id : 1 , putawayStatus : TODO , putawayDate : 01/01/2019 , putawayItems :[{ putawayStatus : TODO , currentFacility.id : ff808181646b260401646b3f2ced0002 , currentLocation.id : ff808181648c6e2401648c95140f0001 , product.id : ff80818155df9de40155df9e31000001 , inventoryItem.id : ff808181646b260401646b495487000d , recipient.id : 1 , putawayFacility.id : ff808181646b260401646b3f2ced0002 , putawayLocation.id : ff808181646d3ec101646d5e7d480001 , quantity : 5, splitItems :[{ putawayFacility.id : ff808181646b260401646b3f2ced0002 , putawayLocation.id : ff808181646d3ec101646d5e7d480001 , quantity : 2 , }, { putawayFacility.id : ff808181646b260401646b3f2ced0002 , putawayLocation.id : ff808181646d3ec101646d5e7d480001 , quantity : 3 , } ] }] }","title":"Data"},{"location":"api-guide/putaway/#response_1","text":"{ data : { id : null, putawayNumber : 824VDY , putawayStatus : TODO , putawayDate : 2019-01-01T06:00:00Z , putawayAssignee : { id : 1 , name : Mr Administrator , firstName : Mr , lastName : Administrator , email : admin@pih.org , username : admin }, putawayItems : [ { id : null, stockMovement.id : Receiving , stockMovement.name : Receiving , putawayStatus : TODO , transactionNumber : null, currentFacility.id : ff808181646b260401646b3f2ced0002 , currentFacility.name : Store 1 , currentLocation.id : ff808181648c6e2401648c95140f0001 , currentLocation.name : Receiving , container : null, product.id : ff80818155df9de40155df9e31000001 , product.productCode : AB12 , product.name : Ibuprofen 200mg , inventoryItem.id : ff808181646b260401646b495487000d , inventoryItem.lotNumber : ABC789 , inventoryItem.expirationDate : 2020-01-01T06:00:00Z , recipient.id : 1 , recipient.name : Mr Administrator , currentBins : Bin 1,Bin 2,Bin 3,Receiving , currentBinsAbbreviated : Bin 1,Bin 2,Bin 3,Rece... , putawayFacility.id : ff808181646b260401646b3f2ced0002 , putawayFacility.name : Store 1 , putawayLocation.id : ff808181646d3ec101646d5e7d480001 , putawayLocation.name : Bin 1 , quantity : 2 }, { id : null, stockMovement.id : Receiving , stockMovement.name : Receiving , putawayStatus : TODO , transactionNumber : null, currentFacility.id : ff808181646b260401646b3f2ced0002 , currentFacility.name : Store 1 , currentLocation.id : ff808181648c6e2401648c95140f0001 , currentLocation.name : Receiving , container : null, product.id : ff80818155df9de40155df9e31000001 , product.productCode : AB12 , product.name : Ibuprofen 200mg , inventoryItem.id : ff808181646b260401646b495487000d , inventoryItem.lotNumber : ABC789 , inventoryItem.expirationDate : 2020-01-01T06:00:00Z , recipient.id : 1 , recipient.name : Mr Administrator , currentBins : Bin 1,Bin 2,Bin 3,Receiving , currentBinsAbbreviated : Bin 1,Bin 2,Bin 3,Rece... , putawayFacility.id : ff808181646b260401646b3f2ced0002 , putawayFacility.name : Store 1 , putawayLocation.id : ff808181646d3ec101646d5e7d480001 , putawayLocation.name : Bin 1 , quantity : 3 } ] } }","title":"Response"},{"location":"api-guide/putaway/#complete_putaway","text":"Change the putawayStatus of the root object to COMPLETE in order to actually complete the putaway process. NOTE: If you see a transactionNumber associated with each putaway item you will know that it worked. Do not send this request more than once or else you will create multiple putaways.","title":"Complete Putaway"},{"location":"api-guide/putaway/#request_3","text":"$ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d @updatePutaway.json \\ https://openboxes.ngrok.io/openboxes/api/putaways |jsonlint","title":"Request"},{"location":"api-guide/putaway/#data_3","text":"{ putawayNumber : ABC123 , putawayAssignee.id : 1 , putawayStatus : COMPLETE , putawayDate : 07/13/2018 , putawayItems :[{ putawayStatus : TODO , currentFacility.id : ff808181646b260401646b3f2ced0002 , currentLocation.id : ff808181648c6e2401648c95140f0001 , product.id : ff80818155df9de40155df9e31000001 , inventoryItem.id : ff808181646b260401646b495487000d , recipient.id : 1 , putawayFacility.id : ff808181646b260401646b3f2ced0002 , putawayLocation.id : ff808181646d3ec101646d5e7d480001 , quantity : 5 }] }","title":"Data"},{"location":"api-guide/reasonCode/","text":"Reason Codes # Returns a list of translated reason codes based on the locale of the current session. List # Supported Activity Codes SUBSTITUTE_REQUISITION_ITEM MODIFY_REQUISITION_ITEM * MODIFY_PICKLIST_ITEM $ curl -b cookies.txt -X GET -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/reasonCodes?activityCode=SUBSTITUTE_REQUISITION_ITEM |jsonlint { data : [ { id : SUBSTITUTION , name : Pharmacist-approved substitution [5] , sortOrder : 5 }, { id : SUBSTITUTION_WITHIN_PRODUCT_GROUP , name : Substituted with product group item [20] , sortOrder : 20 }, { id : REPLACED_BY_FORMULARY_ITEM , name : Replaced by formulary/stock item [9] , sortOrder : 9 }, { id : STOCKOUT , name : Stock-out [1] , sortOrder : 1 }, { id : LOW_STOCK , name : Low stock [2] , sortOrder : 2 }, { id : EXPIRED , name : Expired product [3] , sortOrder : 3 }, { id : DAMAGED , name : Damaged product [4] , sortOrder : 4 }, { id : AVAILABLE_STOCK_RESERVED , name : Available stock reserved [13] , sortOrder : 13 }, { id : DATA_ENTRY_ERROR , name : Data entry error [16] , sortOrder : 16 }, { id : SUPPLY_MAX_QUANTITY , name : Supply maximum quantity on stock list [17] , sortOrder : 17 }, { id : NOT_ON_STOCK_LIST , name : Not an item on stock list [18] , sortOrder : 18 }, { id : INSUFFICIENT_QUANTITY_RECONDITIONED , name : Insufficient quantity packed down [19] , sortOrder : 19 }, { id : SUPPLIED_BY_GOVERNMENT , name : Supplied by government [21] , sortOrder : 21 }, { id : OTHER , name : Other , sortOrder : 100 } ] } Read # The read action will probably never be used. Because it's not useful. But here it is anyway. Enjoy. $ curl -b cookies.txt -X GET -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/reasonCodes/OTHER |jsonlint { data : { id : OTHER , name : Other , sortOrder : 100 } }","title":"Reason Codes"},{"location":"api-guide/reasonCode/#reason_codes","text":"Returns a list of translated reason codes based on the locale of the current session.","title":"Reason Codes"},{"location":"api-guide/reasonCode/#list","text":"Supported Activity Codes SUBSTITUTE_REQUISITION_ITEM MODIFY_REQUISITION_ITEM * MODIFY_PICKLIST_ITEM $ curl -b cookies.txt -X GET -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/reasonCodes?activityCode=SUBSTITUTE_REQUISITION_ITEM |jsonlint { data : [ { id : SUBSTITUTION , name : Pharmacist-approved substitution [5] , sortOrder : 5 }, { id : SUBSTITUTION_WITHIN_PRODUCT_GROUP , name : Substituted with product group item [20] , sortOrder : 20 }, { id : REPLACED_BY_FORMULARY_ITEM , name : Replaced by formulary/stock item [9] , sortOrder : 9 }, { id : STOCKOUT , name : Stock-out [1] , sortOrder : 1 }, { id : LOW_STOCK , name : Low stock [2] , sortOrder : 2 }, { id : EXPIRED , name : Expired product [3] , sortOrder : 3 }, { id : DAMAGED , name : Damaged product [4] , sortOrder : 4 }, { id : AVAILABLE_STOCK_RESERVED , name : Available stock reserved [13] , sortOrder : 13 }, { id : DATA_ENTRY_ERROR , name : Data entry error [16] , sortOrder : 16 }, { id : SUPPLY_MAX_QUANTITY , name : Supply maximum quantity on stock list [17] , sortOrder : 17 }, { id : NOT_ON_STOCK_LIST , name : Not an item on stock list [18] , sortOrder : 18 }, { id : INSUFFICIENT_QUANTITY_RECONDITIONED , name : Insufficient quantity packed down [19] , sortOrder : 19 }, { id : SUPPLIED_BY_GOVERNMENT , name : Supplied by government [21] , sortOrder : 21 }, { id : OTHER , name : Other , sortOrder : 100 } ] }","title":"List"},{"location":"api-guide/reasonCode/#read","text":"The read action will probably never be used. Because it's not useful. But here it is anyway. Enjoy. $ curl -b cookies.txt -X GET -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/reasonCodes/OTHER |jsonlint { data : { id : OTHER , name : Other , sortOrder : 100 } }","title":"Read"},{"location":"api-guide/receiving/","text":"Receiving API # Get Partial Receipt Candidates # Request # curl -b cookies.txt -X GET -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/partialReceiving/ff808181646b260401646b61df3f0034 |jsonlint Response # { data : { receipt.id : null, receiptStatus : PENDING , shipment.id : ff808181646b260401646b61df3f0034 , shipment.name : shipment to store 1 , shipment.shipmentNumber : 110VZU , shipmentStatus : SHIPPED , origin.id : ff8081816430012d0164301b8eda0008 , origin.name : Depot 1 , destination.id : ff808181646b260401646b3f2ced0002 , destination.name : Store 1 , dateShipped : 2018-07-05T17:03:00Z , dateDelivered : null, containers : [ { container.id : ff808181646b260401646b62d1c10037 , container.name : Box 1\\r , container.type : Box|fr:Boite , shipmentItems : [ { shipmentItem.id : ff808181646b260401646b6256ed0036 , container.id : ff808181646b260401646b62d1c10037 , container.name : Box 1\\r , product.id : ff80818155df9de40155df9e31000001 , product.productCode : AB12 , product.name : Ibuprofen 200mg , inventoryItem.id : ff80818163f7308a0163f73d5bda0002 , inventoryItem.lotNumber : ABC123 , inventoryItem.expirationDate : 01/01/2021 , binLocation.id : null, binLocation.name : null, recipient.id : null, recipient.name : null, quantityShipped : 150, quantityReceived : 0, quantityReceiving : 0, quantityRemaining : 150, cancelRemaining : false } ] } ] } } Create Partial Receipt # This endpoint does not save to the database unless the receiptStatus is set to COMPLETE . That way you can save a draft before checking the receipt and completing it Request # curl -b cookies.txt -X POST -H Content-Type: application/json -d @partialReceiving.json \\ https://openboxes.ngrok.io/openboxes/api/partialReceiving/ff808181646b260401646b61df3f0034 |jsonlint Data # { shipment.id : ff808181646b260401646b61df3f0034 , receiptStatus : PENDING , dateShipped : 07/22/2018 , dateDelivered : 07/24/2018 , containers :[{ container.id : ff808181646b260401646b62d1c10037 , container.name : Box 1\\r , container.type : Box|fr:Boite , shipmentItems :[{ shipmentItem.id : ff808181646b260401646b6256ed0036 , quantityReceiving : 50, binLocation.id : ff808181646d3ec101646d5e7d480001 , recipient.id : 1 , cancelRemaining :false }] }] } Response # { data : { receipt.id : null, receiptStatus : PENDING , shipment.id : ff808181646b260401646b61df3f0034 , shipment.name : shipment to store 1 , shipment.shipmentNumber : 110VZU , shipmentStatus : SHIPPED , origin.id : ff8081816430012d0164301b8eda0008 , origin.name : Depot 1 , destination.id : ff808181646b260401646b3f2ced0002 , destination.name : Store 1 , dateShipped : 2018-07-05T17:03:00Z , dateDelivered : 2018-07-24T05:00:00Z , containers : [ { container.id : ff808181646b260401646b62d1c10037 , container.name : Box 1\\r , container.type : Box|fr:Boite , shipmentItems : [ { shipmentItem.id : ff808181646b260401646b6256ed0036 , container.id : ff808181646b260401646b62d1c10037 , container.name : Box 1\\r , product.id : ff80818155df9de40155df9e31000001 , product.productCode : AB12 , product.name : Ibuprofen 200mg , inventoryItem.id : ff80818163f7308a0163f73d5bda0002 , inventoryItem.lotNumber : ABC123 , inventoryItem.expirationDate : 01/01/2021 , binLocation.id : ff808181646d3ec101646d5e7d480001 , binLocation.name : Bin 1 , recipient.id : 1 , recipient.name : Mr Administrator , quantityShipped : 150, quantityReceived : 0, quantityReceiving : 50, quantityRemaining : 100, cancelRemaining : false } ] } ] } } Complete Partial Receipt # Saves the partial receipt to the database and creates an inbound transaction for the receipt. NOTE: The response is just a GET /api/partialReceiving for the remaining items. The items won't remember previous quantities and bin locations selected. Request # curl -b cookies.txt -X POST -H Content-Type: application/json -d @partialReceiving.json \\ https://openboxes.ngrok.io/openboxes/api/partialReceiving/ff808181646b260401646b61df3f0034 |jsonlint Data (partialReceiving.json) # { shipment.id : ff808181646b260401646b61df3f0034 , receiptStatus : COMPLETE , dateShipped : 07/22/2018 , dateDelivered : 07/24/2018 , containers :[{ container.id : ff808181646b260401646b62d1c10037 , container.name : Box 1\\r , container.type : Box|fr:Boite , shipmentItems :[{ shipmentItem.id : ff808181646b260401646b6256ed0036 , quantityReceiving : 50, binLocation.id : ff808181646d3ec101646d5e7d480001 , recipient.id : 1 , cancelRemaining :false }] }] } Response # { data : { receipt.id : null, receiptStatus : PENDING , shipment.id : ff808181646b260401646b61df3f0034 , shipment.name : shipment to store 1 , shipment.shipmentNumber : 110VZU , shipmentStatus : SHIPPED , origin.id : ff8081816430012d0164301b8eda0008 , origin.name : Depot 1 , destination.id : ff808181646b260401646b3f2ced0002 , destination.name : Store 1 , dateShipped : 2018-07-05T17:03:00Z , dateDelivered : null, containers : [ { container.id : ff808181646b260401646b62d1c10037 , container.name : Box 1\\r , container.type : Box|fr:Boite , shipmentItems : [ { shipmentItem.id : ff808181646b260401646b6256ed0036 , container.id : ff808181646b260401646b62d1c10037 , container.name : Box 1\\r , product.id : ff80818155df9de40155df9e31000001 , product.productCode : AB12 , product.name : Ibuprofen 200mg , inventoryItem.id : ff80818163f7308a0163f73d5bda0002 , inventoryItem.lotNumber : ABC123 , inventoryItem.expirationDate : 01/01/2021 , binLocation.id : null, binLocation.name : null, recipient.id : null, recipient.name : null, quantityShipped : 150, quantityReceived : 50, quantityReceiving : 0, quantityRemaining : 100, cancelRemaining : false } ] } ] } } Rollback Partial Receipts # Request # curl -b cookies.txt -X POST -H Content-Type: application/json -d @partialReceivingRollback.json \\ https://openboxes.ngrok.io/openboxes/api/partialReceiving/ff808181646b260401646b61df3f0034 |jsonlint Data (partialReceivingRollback.json) # { receiptStatus : ROLLBACK } Response # { data : { receipt.id : null, receiptStatus : PENDING , shipment.id : ff808181646b260401646b61df3f0034 , shipment.name : shipment to store 1 , shipment.shipmentNumber : 110VZU , shipmentStatus : SHIPPED , origin.id : ff8081816430012d0164301b8eda0008 , origin.name : Depot 1 , destination.id : ff808181646b260401646b3f2ced0002 , destination.name : Store 1 , dateShipped : 2018-07-05T17:03:00Z , dateDelivered : null, containers : [ { container.id : ff808181646b260401646b62d1c10037 , container.name : Box 1\\r , container.type : Box|fr:Boite , shipmentItems : [ { shipmentItem.id : ff808181646b260401646b6256ed0036 , container.id : ff808181646b260401646b62d1c10037 , container.name : Box 1\\r , product.id : ff80818155df9de40155df9e31000001 , product.productCode : AB12 , product.name : Ibuprofen 200mg , inventoryItem.id : ff80818163f7308a0163f73d5bda0002 , inventoryItem.lotNumber : ABC123 , inventoryItem.expirationDate : 01/01/2021 , binLocation.id : null, binLocation.name : null, recipient.id : null, recipient.name : null, quantityShipped : 150, quantityReceived : 0, quantityReceiving : 0, quantityRemaining : 150, cancelRemaining : false } ] } ] } }","title":"Receiving"},{"location":"api-guide/receiving/#receiving_api","text":"","title":"Receiving API"},{"location":"api-guide/receiving/#get_partial_receipt_candidates","text":"","title":"Get Partial Receipt Candidates"},{"location":"api-guide/receiving/#request","text":"curl -b cookies.txt -X GET -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/partialReceiving/ff808181646b260401646b61df3f0034 |jsonlint","title":"Request"},{"location":"api-guide/receiving/#response","text":"{ data : { receipt.id : null, receiptStatus : PENDING , shipment.id : ff808181646b260401646b61df3f0034 , shipment.name : shipment to store 1 , shipment.shipmentNumber : 110VZU , shipmentStatus : SHIPPED , origin.id : ff8081816430012d0164301b8eda0008 , origin.name : Depot 1 , destination.id : ff808181646b260401646b3f2ced0002 , destination.name : Store 1 , dateShipped : 2018-07-05T17:03:00Z , dateDelivered : null, containers : [ { container.id : ff808181646b260401646b62d1c10037 , container.name : Box 1\\r , container.type : Box|fr:Boite , shipmentItems : [ { shipmentItem.id : ff808181646b260401646b6256ed0036 , container.id : ff808181646b260401646b62d1c10037 , container.name : Box 1\\r , product.id : ff80818155df9de40155df9e31000001 , product.productCode : AB12 , product.name : Ibuprofen 200mg , inventoryItem.id : ff80818163f7308a0163f73d5bda0002 , inventoryItem.lotNumber : ABC123 , inventoryItem.expirationDate : 01/01/2021 , binLocation.id : null, binLocation.name : null, recipient.id : null, recipient.name : null, quantityShipped : 150, quantityReceived : 0, quantityReceiving : 0, quantityRemaining : 150, cancelRemaining : false } ] } ] } }","title":"Response"},{"location":"api-guide/receiving/#create_partial_receipt","text":"This endpoint does not save to the database unless the receiptStatus is set to COMPLETE . That way you can save a draft before checking the receipt and completing it","title":"Create Partial Receipt"},{"location":"api-guide/receiving/#request_1","text":"curl -b cookies.txt -X POST -H Content-Type: application/json -d @partialReceiving.json \\ https://openboxes.ngrok.io/openboxes/api/partialReceiving/ff808181646b260401646b61df3f0034 |jsonlint","title":"Request"},{"location":"api-guide/receiving/#data","text":"{ shipment.id : ff808181646b260401646b61df3f0034 , receiptStatus : PENDING , dateShipped : 07/22/2018 , dateDelivered : 07/24/2018 , containers :[{ container.id : ff808181646b260401646b62d1c10037 , container.name : Box 1\\r , container.type : Box|fr:Boite , shipmentItems :[{ shipmentItem.id : ff808181646b260401646b6256ed0036 , quantityReceiving : 50, binLocation.id : ff808181646d3ec101646d5e7d480001 , recipient.id : 1 , cancelRemaining :false }] }] }","title":"Data"},{"location":"api-guide/receiving/#response_1","text":"{ data : { receipt.id : null, receiptStatus : PENDING , shipment.id : ff808181646b260401646b61df3f0034 , shipment.name : shipment to store 1 , shipment.shipmentNumber : 110VZU , shipmentStatus : SHIPPED , origin.id : ff8081816430012d0164301b8eda0008 , origin.name : Depot 1 , destination.id : ff808181646b260401646b3f2ced0002 , destination.name : Store 1 , dateShipped : 2018-07-05T17:03:00Z , dateDelivered : 2018-07-24T05:00:00Z , containers : [ { container.id : ff808181646b260401646b62d1c10037 , container.name : Box 1\\r , container.type : Box|fr:Boite , shipmentItems : [ { shipmentItem.id : ff808181646b260401646b6256ed0036 , container.id : ff808181646b260401646b62d1c10037 , container.name : Box 1\\r , product.id : ff80818155df9de40155df9e31000001 , product.productCode : AB12 , product.name : Ibuprofen 200mg , inventoryItem.id : ff80818163f7308a0163f73d5bda0002 , inventoryItem.lotNumber : ABC123 , inventoryItem.expirationDate : 01/01/2021 , binLocation.id : ff808181646d3ec101646d5e7d480001 , binLocation.name : Bin 1 , recipient.id : 1 , recipient.name : Mr Administrator , quantityShipped : 150, quantityReceived : 0, quantityReceiving : 50, quantityRemaining : 100, cancelRemaining : false } ] } ] } }","title":"Response"},{"location":"api-guide/receiving/#complete_partial_receipt","text":"Saves the partial receipt to the database and creates an inbound transaction for the receipt. NOTE: The response is just a GET /api/partialReceiving for the remaining items. The items won't remember previous quantities and bin locations selected.","title":"Complete Partial Receipt"},{"location":"api-guide/receiving/#request_2","text":"curl -b cookies.txt -X POST -H Content-Type: application/json -d @partialReceiving.json \\ https://openboxes.ngrok.io/openboxes/api/partialReceiving/ff808181646b260401646b61df3f0034 |jsonlint","title":"Request"},{"location":"api-guide/receiving/#data_partialreceivingjson","text":"{ shipment.id : ff808181646b260401646b61df3f0034 , receiptStatus : COMPLETE , dateShipped : 07/22/2018 , dateDelivered : 07/24/2018 , containers :[{ container.id : ff808181646b260401646b62d1c10037 , container.name : Box 1\\r , container.type : Box|fr:Boite , shipmentItems :[{ shipmentItem.id : ff808181646b260401646b6256ed0036 , quantityReceiving : 50, binLocation.id : ff808181646d3ec101646d5e7d480001 , recipient.id : 1 , cancelRemaining :false }] }] }","title":"Data (partialReceiving.json)"},{"location":"api-guide/receiving/#response_2","text":"{ data : { receipt.id : null, receiptStatus : PENDING , shipment.id : ff808181646b260401646b61df3f0034 , shipment.name : shipment to store 1 , shipment.shipmentNumber : 110VZU , shipmentStatus : SHIPPED , origin.id : ff8081816430012d0164301b8eda0008 , origin.name : Depot 1 , destination.id : ff808181646b260401646b3f2ced0002 , destination.name : Store 1 , dateShipped : 2018-07-05T17:03:00Z , dateDelivered : null, containers : [ { container.id : ff808181646b260401646b62d1c10037 , container.name : Box 1\\r , container.type : Box|fr:Boite , shipmentItems : [ { shipmentItem.id : ff808181646b260401646b6256ed0036 , container.id : ff808181646b260401646b62d1c10037 , container.name : Box 1\\r , product.id : ff80818155df9de40155df9e31000001 , product.productCode : AB12 , product.name : Ibuprofen 200mg , inventoryItem.id : ff80818163f7308a0163f73d5bda0002 , inventoryItem.lotNumber : ABC123 , inventoryItem.expirationDate : 01/01/2021 , binLocation.id : null, binLocation.name : null, recipient.id : null, recipient.name : null, quantityShipped : 150, quantityReceived : 50, quantityReceiving : 0, quantityRemaining : 100, cancelRemaining : false } ] } ] } }","title":"Response"},{"location":"api-guide/receiving/#rollback_partial_receipts","text":"","title":"Rollback Partial Receipts"},{"location":"api-guide/receiving/#request_3","text":"curl -b cookies.txt -X POST -H Content-Type: application/json -d @partialReceivingRollback.json \\ https://openboxes.ngrok.io/openboxes/api/partialReceiving/ff808181646b260401646b61df3f0034 |jsonlint","title":"Request"},{"location":"api-guide/receiving/#data_partialreceivingrollbackjson","text":"{ receiptStatus : ROLLBACK }","title":"Data (partialReceivingRollback.json)"},{"location":"api-guide/receiving/#response_3","text":"{ data : { receipt.id : null, receiptStatus : PENDING , shipment.id : ff808181646b260401646b61df3f0034 , shipment.name : shipment to store 1 , shipment.shipmentNumber : 110VZU , shipmentStatus : SHIPPED , origin.id : ff8081816430012d0164301b8eda0008 , origin.name : Depot 1 , destination.id : ff808181646b260401646b3f2ced0002 , destination.name : Store 1 , dateShipped : 2018-07-05T17:03:00Z , dateDelivered : null, containers : [ { container.id : ff808181646b260401646b62d1c10037 , container.name : Box 1\\r , container.type : Box|fr:Boite , shipmentItems : [ { shipmentItem.id : ff808181646b260401646b6256ed0036 , container.id : ff808181646b260401646b62d1c10037 , container.name : Box 1\\r , product.id : ff80818155df9de40155df9e31000001 , product.productCode : AB12 , product.name : Ibuprofen 200mg , inventoryItem.id : ff80818163f7308a0163f73d5bda0002 , inventoryItem.lotNumber : ABC123 , inventoryItem.expirationDate : 01/01/2021 , binLocation.id : null, binLocation.name : null, recipient.id : null, recipient.name : null, quantityShipped : 150, quantityReceived : 0, quantityReceiving : 0, quantityRemaining : 150, cancelRemaining : false } ] } ] } }","title":"Response"},{"location":"api-guide/stockMovement/","text":"Stock Movements # List # Return stock movements Parameter Description Required max Limits the number of records in response Optional offset Indicate the first record to return Optional exclude Indicate which fields you'd like to exclude from the response Optional $ curl -b cookies.txt -X GET \\ -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/stockMovements?max=1 offset=2 exclude=lineItems|jsonlint { data : [ { id : ff808181644d5e5b01644e5007500001 , name : new stock movement , description : new stock movement , identifier : 483ZSA , origin : { id : 1 , name : Boston Headquarters }, destination : { id : 2 , name : Miami Warehouse }, dateRequested : 06/23/2018 , requestedBy : { id : 1 , name : Mr Administrator , firstName : Mr , lastName : Administrator , email : admin@pih.org , username : admin } } ] } Read # Read an existing stock movement $ curl -b cookies.txt -X GET -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181644d5e5b01644e5007500001 |jsonlint { data : { id : ff808181644d5e5b01644e5007500001 , name : new stock movement , description : new stock movement , identifier : 483ZSA , origin : { id : 1 , name : Boston Headquarters }, destination : { id : 2 , name : Miami Warehouse }, dateRequested : 06/23/2018 , requestedBy : { id : 1 , name : Mr Administrator , firstName : Mr , lastName : Administrator , email : admin@pih.org , username : admin }, lineItems : [] } } Create # Create a new stock movement # curl -X POST -b cookies.txt -H Content-Type: application/json \\ -d '{ name : my new stock movement , description : same as name , origin.id : 1 , destination.id : 2 , requestedBy.id : 1 , dateRequested : 06/23/2018 }' \\ https://openboxes.ngrok.io/openboxes/api/stockMovements | jsonlint { data : { id : ff808181644d5e5b01644e5007500001 , name : my new stock movement , description : , identifier : null, origin : { id : 1 , name : Boston Headquarters }, destination : { id : 2 , name : Miami Warehouse }, dateRequested : 06/23/2018 , requestedBy : { id : 1 , name : Mr Administrator , firstName : Mr , lastName : Administrator , email : admin@pih.org , username : admin }, lineItems : [] } } Create a new stock movement for inbound shipment # $ curl -X POST -b cookies.txt -H Content-Type: application/json \\ -d '{ name : new stock movement , description : same as name , origin.id : ff80818155dd68010155dd6bb9c00001 , destination.id : 2 , requestedBy.id : 1 , dateRequested : 06/23/2018 }' \\ https://openboxes.ngrok.io/openboxes/api/stockMovements | jsonlint { data : { id : ff808181644e51a401644e5a916f0005 , name : new stock movement , description : , identifier : null, origin : { id : ff80818155dd68010155dd6bb9c00001 , name : Test Supplier }, destination : { id : 2 , name : Miami Warehouse }, dateRequested : 06/23/2018 , requestedBy : { id : 1 , name : Mr Administrator , firstName : Mr , lastName : Administrator , email : admin@pih.org , username : admin }, lineItems : [] } } Create a new stock movement based on a stocklist # curl -X POST -b cookies.txt -H Content-Type: application/json \\ -d '{ name : stock movement based on stocklist , description : same as name , origin.id : 1 , destination.id : 2 , requestedBy.id : 1 , dateRequested : 06/23/2018 , stocklist.id : ff808181641b2fd501641b39f4ef0001 }' \\ https://openboxes.ngrok.io/openboxes/api/stockMovements | jsonlint { data : { id : ff808181644e51a401644e5838aa0001 , name : stock movement based on stocklist , description : stock movement based on stocklist , identifier : null, origin : { id : 1 , name : Boston Headquarters }, destination : { id : 2 , name : Miami Warehouse }, dateRequested : 06/23/2018 , requestedBy : { id : 1 , name : Mr Administrator , firstName : Mr , lastName : Administrator , email : admin@pih.org , username : admin }, lineItems : [ { id : ff808181644e51a401644e5838ad0002 , productCode : 00005 , product : { id : ff80818155df9de40155df9e33930011 , productCode : 00005 , name : Similac Advance low iron 400g , description : null, category : { id : 1 , name : Medicines } }, palletName : null, boxName : null, statusCode : PENDING , quantityRequested : 25, quantityAllowed : null, quantityAvailable : null, quantityCanceled : null, quantityRevised : null, reasonCode : null, comments : null, recipient : null, sortOrder : 2 }, { id : ff808181644e51a401644e5838ad0003 , productCode : 00001 , product : { id : ff80818155df9de40155df9e31000001 , productCode : 00001 , name : Ibuprofen 200mg , description : null, category : { id : 1 , name : Medicines } }, palletName : null, boxName : null, statusCode : PENDING , quantityRequested : 100, quantityAllowed : null, quantityAvailable : null, quantityCanceled : null, quantityRevised : null, reasonCode : null, comments : null, recipient : null, sortOrder : 0 }, { id : ff808181644e51a401644e5838ad0004 , productCode : 00002 , product : { id : ff80818155df9de40155df9e321c0005 , productCode : 00002 , name : Tylenol 325mg , description : null, category : { id : 1 , name : Medicines } }, palletName : null, boxName : null, statusCode : PENDING , quantityRequested : 50, quantityAllowed : null, quantityAvailable : null, quantityCanceled : null, quantityRevised : null, reasonCode : null, comments : null, recipient : null, sortOrder : 1 } ] } } Update # curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d '{ name : new stock movement , description : new stock movement , origin.id : 1 , destination.id : 2 , requestedBy.id : 1 , dateRequested : 06/23/2018 }' \\ https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181642fc9c101642fcccc420004 \\ | jsonlint { data : { id : ff808181644d5e5b01644e5007500001 , name : new stock movement , description : new stock movement , identifier : 483ZSA , origin : { id : 1 , name : Boston Headquarters }, destination : { id : 2 , name : Miami Warehouse }, dateRequested : 06/23/2018 , requestedBy : { id : 1 , name : Mr Administrator , firstName : Mr , lastName : Administrator , email : admin@pih.org , username : admin }, lineItems : [] } }","title":"Stock Movement"},{"location":"api-guide/stockMovement/#stock_movements","text":"","title":"Stock Movements"},{"location":"api-guide/stockMovement/#list","text":"Return stock movements Parameter Description Required max Limits the number of records in response Optional offset Indicate the first record to return Optional exclude Indicate which fields you'd like to exclude from the response Optional $ curl -b cookies.txt -X GET \\ -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/stockMovements?max=1 offset=2 exclude=lineItems|jsonlint { data : [ { id : ff808181644d5e5b01644e5007500001 , name : new stock movement , description : new stock movement , identifier : 483ZSA , origin : { id : 1 , name : Boston Headquarters }, destination : { id : 2 , name : Miami Warehouse }, dateRequested : 06/23/2018 , requestedBy : { id : 1 , name : Mr Administrator , firstName : Mr , lastName : Administrator , email : admin@pih.org , username : admin } } ] }","title":"List"},{"location":"api-guide/stockMovement/#read","text":"Read an existing stock movement $ curl -b cookies.txt -X GET -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181644d5e5b01644e5007500001 |jsonlint { data : { id : ff808181644d5e5b01644e5007500001 , name : new stock movement , description : new stock movement , identifier : 483ZSA , origin : { id : 1 , name : Boston Headquarters }, destination : { id : 2 , name : Miami Warehouse }, dateRequested : 06/23/2018 , requestedBy : { id : 1 , name : Mr Administrator , firstName : Mr , lastName : Administrator , email : admin@pih.org , username : admin }, lineItems : [] } }","title":"Read"},{"location":"api-guide/stockMovement/#create","text":"","title":"Create"},{"location":"api-guide/stockMovement/#create_a_new_stock_movement","text":"curl -X POST -b cookies.txt -H Content-Type: application/json \\ -d '{ name : my new stock movement , description : same as name , origin.id : 1 , destination.id : 2 , requestedBy.id : 1 , dateRequested : 06/23/2018 }' \\ https://openboxes.ngrok.io/openboxes/api/stockMovements | jsonlint { data : { id : ff808181644d5e5b01644e5007500001 , name : my new stock movement , description : , identifier : null, origin : { id : 1 , name : Boston Headquarters }, destination : { id : 2 , name : Miami Warehouse }, dateRequested : 06/23/2018 , requestedBy : { id : 1 , name : Mr Administrator , firstName : Mr , lastName : Administrator , email : admin@pih.org , username : admin }, lineItems : [] } }","title":"Create a new stock movement"},{"location":"api-guide/stockMovement/#create_a_new_stock_movement_for_inbound_shipment","text":"$ curl -X POST -b cookies.txt -H Content-Type: application/json \\ -d '{ name : new stock movement , description : same as name , origin.id : ff80818155dd68010155dd6bb9c00001 , destination.id : 2 , requestedBy.id : 1 , dateRequested : 06/23/2018 }' \\ https://openboxes.ngrok.io/openboxes/api/stockMovements | jsonlint { data : { id : ff808181644e51a401644e5a916f0005 , name : new stock movement , description : , identifier : null, origin : { id : ff80818155dd68010155dd6bb9c00001 , name : Test Supplier }, destination : { id : 2 , name : Miami Warehouse }, dateRequested : 06/23/2018 , requestedBy : { id : 1 , name : Mr Administrator , firstName : Mr , lastName : Administrator , email : admin@pih.org , username : admin }, lineItems : [] } }","title":"Create a new stock movement for inbound shipment"},{"location":"api-guide/stockMovement/#create_a_new_stock_movement_based_on_a_stocklist","text":"curl -X POST -b cookies.txt -H Content-Type: application/json \\ -d '{ name : stock movement based on stocklist , description : same as name , origin.id : 1 , destination.id : 2 , requestedBy.id : 1 , dateRequested : 06/23/2018 , stocklist.id : ff808181641b2fd501641b39f4ef0001 }' \\ https://openboxes.ngrok.io/openboxes/api/stockMovements | jsonlint { data : { id : ff808181644e51a401644e5838aa0001 , name : stock movement based on stocklist , description : stock movement based on stocklist , identifier : null, origin : { id : 1 , name : Boston Headquarters }, destination : { id : 2 , name : Miami Warehouse }, dateRequested : 06/23/2018 , requestedBy : { id : 1 , name : Mr Administrator , firstName : Mr , lastName : Administrator , email : admin@pih.org , username : admin }, lineItems : [ { id : ff808181644e51a401644e5838ad0002 , productCode : 00005 , product : { id : ff80818155df9de40155df9e33930011 , productCode : 00005 , name : Similac Advance low iron 400g , description : null, category : { id : 1 , name : Medicines } }, palletName : null, boxName : null, statusCode : PENDING , quantityRequested : 25, quantityAllowed : null, quantityAvailable : null, quantityCanceled : null, quantityRevised : null, reasonCode : null, comments : null, recipient : null, sortOrder : 2 }, { id : ff808181644e51a401644e5838ad0003 , productCode : 00001 , product : { id : ff80818155df9de40155df9e31000001 , productCode : 00001 , name : Ibuprofen 200mg , description : null, category : { id : 1 , name : Medicines } }, palletName : null, boxName : null, statusCode : PENDING , quantityRequested : 100, quantityAllowed : null, quantityAvailable : null, quantityCanceled : null, quantityRevised : null, reasonCode : null, comments : null, recipient : null, sortOrder : 0 }, { id : ff808181644e51a401644e5838ad0004 , productCode : 00002 , product : { id : ff80818155df9de40155df9e321c0005 , productCode : 00002 , name : Tylenol 325mg , description : null, category : { id : 1 , name : Medicines } }, palletName : null, boxName : null, statusCode : PENDING , quantityRequested : 50, quantityAllowed : null, quantityAvailable : null, quantityCanceled : null, quantityRevised : null, reasonCode : null, comments : null, recipient : null, sortOrder : 1 } ] } }","title":"Create a new stock movement based on a stocklist"},{"location":"api-guide/stockMovement/#update","text":"curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d '{ name : new stock movement , description : new stock movement , origin.id : 1 , destination.id : 2 , requestedBy.id : 1 , dateRequested : 06/23/2018 }' \\ https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181642fc9c101642fcccc420004 \\ | jsonlint { data : { id : ff808181644d5e5b01644e5007500001 , name : new stock movement , description : new stock movement , identifier : 483ZSA , origin : { id : 1 , name : Boston Headquarters }, destination : { id : 2 , name : Miami Warehouse }, dateRequested : 06/23/2018 , requestedBy : { id : 1 , name : Mr Administrator , firstName : Mr , lastName : Administrator , email : admin@pih.org , username : admin }, lineItems : [] } }","title":"Update"},{"location":"api-guide/stockMovementItem/","text":"Stock Movement Items # Create # Request # $ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d @addStockMovementItem.json \\ https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181644d5e5b01644e5007500001|jsonlint Post Body (addStockMovementItem.json) # { id : ff808181644d5e5b01644e5007500001 , name : my new stock movement , description : , identifier : 483ZSA , origin.id : 2 , destination.id : 1 , dateRequested : 06/23/2018 , requestedBy.id : 1 , lineItems : [{ product.id : ff8081816407132d0164071eec250001 , quantityRequested : 100 , sortOrder : 0, recipient.id : 1 }] } Response # { data : { id : ff808181644d5e5b01644e5007500001 , name : my new stock movement , description : , identifier : 483ZSA , origin : { id : 2 , name : Miami Warehouse }, destination : { id : 1 , name : Boston Headquarters }, dateRequested : 06/23/2018 , requestedBy : { id : 1 , name : Mr Administrator , firstName : Mr , lastName : Administrator , email : admin@pih.org , username : admin }, lineItems : [ { id : ff808181644e51a401644e85891b0006 , productCode : BK71 , product : { id : ff8081816407132d0164071eec250001 , productCode : BK71 , name : product 1+ , description : This is the penultimate product , category : { id : ROOT , name : ROOT } }, palletName : null, boxName : null, statusCode : PENDING , quantityRequested : 100, quantityAllowed : null, quantityAvailable : null, quantityCanceled : null, quantityRevised : null, reasonCode : null, comments : null, recipient : null, sortOrder : null } ] } } Update # This is used to change the quantity or product associated with an item, as well as other changes like sort order. This is a direct change to the requisition item. If you're looking to record a new quantity and want to keep the originally requested information, then you'll likely want to use the Revise Stock Movement Item example below This will allow you to keep the originally requested quantity and product information, record the new quantity, as well as a reason for the revision (see next section for more information) $ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d @updateStockMovementItem.json \\ https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181644d5e5b01644e5007500001|jsonlint Request Body (updateStockMovementItem.json) # { id : ff808181644d5e5b01644e5007500001 , name : my new stock movement , description : , identifier : 483ZSA , origin.id : 2 , destination.id : 1 , dateRequested : 06/23/2018 , requestedBy.id : 1 , lineItems : [{ id : ff808181644e51a401644e85891b0006 , product.id : ff80818155df9de40155df9e31000001 , quantityRequested : 500 , sortOrder : 0 }] } Response # { data : { id : ff808181644d5e5b01644e5007500001 , name : my new stock movement , description : my new stock movement , identifier : 483ZSA , origin : { id : 2 , name : Miami Warehouse }, destination : { id : 1 , name : Boston Headquarters }, dateRequested : 06/23/2018 , requestedBy : { id : 1 , name : Mr Administrator , firstName : Mr , lastName : Administrator , email : admin@pih.org , username : admin }, lineItems : [ { id : ff808181644e51a401644e85891b0006 , productCode : 00001 , product : { id : ff80818155df9de40155df9e31000001 , productCode : 00001 , name : Ibuprofen 200mg , description : null, category : { id : 1 , name : Medicines } }, palletName : null, boxName : null, statusCode : PENDING , quantityRequested : 500, quantityAllowed : null, quantityAvailable : null, quantityCanceled : 0, quantityRevised : null, reasonCode : null, comments : null, recipient : null, sortOrder : null } ] } } Revise # This is used to record a revision to the quantity requested. This requires the user to choose a reason code (i.e. STOCKOUT) and optionally add comments that may help provide more context for the revision. Request # $ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d @reviseStockMovementItem.json \\ https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181644d5e5b01644e5007500001|jsonlint Post Body (reviseStockMovementItem.json) # { id : ff808181644d5e5b01644e5007500001 , name : my new stock movement , description : , identifier : 483ZSA , origin.id : 2 , destination.id : 1 , dateRequested : 06/23/2018 , requestedBy.id : 1 , lineItems : [ { id : ff808181644e51a401644e85891b0006 , quantityRevised :200, reasonCode : BECAUSE , comments : because i said so , } ] } Response # { data : { id : ff808181644d5e5b01644e5007500001 , name : my new stock movement , description : my new stock movement , identifier : 483ZSA , origin : { id : 2 , name : Miami Warehouse }, destination : { id : 1 , name : Boston Headquarters }, dateRequested : 06/23/2018 , requestedBy : { id : 1 , name : Mr Administrator , firstName : Mr , lastName : Administrator , email : admin@pih.org , username : admin }, lineItems : [ { id : ff808181644e51a401644e85891b0006 , productCode : BK71 , product : { id : ff8081816407132d0164071eec250001 , productCode : BK71 , name : product 1+ , description : This is the penultimate product , category : { id : ROOT , name : ROOT } }, palletName : null, boxName : null, statusCode : CHANGED , quantityRequested : 100, quantityAllowed : null, quantityAvailable : null, quantityCanceled : 100, quantityRevised : 200, reasonCode : BECAUSE , comments : because i said so , recipient : null, sortOrder : null } ] } } Substitute # This is used to record a substitution for an stock movement item. This requires the user to enter a new product and quantity, as well as choose a reason code (i.e. STOCKOUT) and optionally add a comment that may help provide more context for the substitution. Request # $ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d @substituteStockMovementItem.json \\ https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181644d5e5b01644e5007500001|jsonlint Post Body (substituteStockMovementItem.json) # { id : ff808181644d5e5b01644e5007500001 , name : my new stock movement , description : , identifier : 483ZSA , origin.id : 2 , destination.id : 1 , dateRequested : 06/23/2018 , requestedBy.id : 1 , lineItems : [{ id : ff808181644e51a401644e85891b0006 , substitute : true , newProduct.id : ff80818155df9de40155df9e3312000d , newQuantity :100, reasonCode : CLINICAL , comments : A clinical decision that is none of your business , }] } NOTE: You can add multiple substitutions by adding another line item with the same ID along with the substitute instruction. Response # { data : { id : ff808181644d5e5b01644e5007500001 , name : my new stock movement , description : my new stock movement , identifier : 483ZSA , origin : { id : 2 , name : Miami Warehouse }, destination : { id : 1 , name : Boston Headquarters }, dateRequested : 06/23/2018 , requestedBy : { id : 1 , name : Mr Administrator , firstName : Mr , lastName : Administrator , email : admin@pih.org , username : admin }, lineItems : [ { id : ff808181644e51a401644e85891b0006 , productCode : BK71 , product : { id : ff8081816407132d0164071eec250001 , productCode : BK71 , name : product 1+ , description : This is the penultimate product , category : { id : ROOT , name : ROOT } }, palletName : null, boxName : null, statusCode : SUBSTITUTED , quantityRequested : 100, quantityAllowed : null, quantityAvailable : null, quantityCanceled : 100, quantityRevised : null, substitutions : [ { id : ff8081816458c881016458d22b5f0002 , productCode : 00005 , product : { id : ff80818155df9de40155df9e33930011 , productCode : 00005 , name : Similac Advance low iron 400g , description : null, category : { id : 1 , name : Medicines } }, palletName : null, boxName : null, statusCode : APPROVED , quantityRequested : 100, quantityAllowed : null, quantityAvailable : null, quantityCanceled : null, quantityRevised : null, substitutions : [], reasonCode : null, comments : null, recipient : null, sortOrder : null } ], reasonCode : CLINICAL , comments : A clinical decision that is none of your business , recipient : null, sortOrder : null } ] } } IMPORTANT : If you want to make changes to an existing substitution item, the request body should include an instruction to revert the changes along with the modified substitution items. You can also modify ANY stock movement item by editing it's corresponding requisition item through the Requisition Item API endpoint (currently /api/generic/requisitionItem/:id ). Substitutions and modifications are just children requisition items under the original requisition item. { id : ff808181644d5e5b01644e5007500001 , name : my new stock movement , description : , identifier : 483ZSA , origin.id : 2 , destination.id : 1 , dateRequested : 06/23/2018 , requestedBy.id : 1 , lineItems : [{ id : ff8081816458c881016458ca819e0001 , revert : true }, { id : ff8081816458c881016458ca819e0001 , substitute : true , newProduct.id : ff80818155df9de40155df9e33930011 , newQuantity :1000, reasonCode : CLINICAL , comments : A clinical decision that is none of your business , }, { id : ff8081816458c881016458ca819e0001 , substitute : true , newProduct.id : ff80818155df9de40155df9e3312000d , newQuantity :500, reasonCode : CLINICAL , comments : A clinical decision that is none of your business , }] } Exceptions # Cannot substitute a product that is not in the original product's list of available substitutions. See the Substitutions API. { errorCode : 500, errorMessage : Product 00004 General Pain Reliever is not a valid substitution of BK71 product 1+ } You also cannot substitute the product for itself. { errorCode : 500, errorMessage : Product BK71 product 1+ is not a valid substitution of BK71 product 1+ } Cancel # Similar to a revision, this operation allows you to cancel the stock movement item. Request # $ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d @cancelStockMovementItem.json \\ https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181644d5e5b01644e5007500001|jsonlint Post Body (cancelStockMovementItem.json) # { id : ff808181644d5e5b01644e5007500001 , name : my new stock movement , description : , identifier : 483ZSA , origin.id : 2 , destination.id : 1 , dateRequested : 06/23/2018 , requestedBy.id : 1 , lineItems : [ { id : ff808181644e51a401644e85891b0006 , cancel : true , reasonCode : BECAUSE , comments : more information since BECAUSE is not a good reason } ] } Response # { data : { id : ff808181644d5e5b01644e5007500001 , name : my new stock movement , description : my new stock movement , identifier : 483ZSA , origin : { id : 2 , name : Miami Warehouse }, destination : { id : 1 , name : Boston Headquarters }, dateRequested : 06/23/2018 , requestedBy : { id : 1 , name : Mr Administrator , firstName : Mr , lastName : Administrator , email : admin@pih.org , username : admin }, lineItems : [ { id : ff808181644e51a401644e85891b0006 , productCode : BK71 , product : { id : ff8081816407132d0164071eec250001 , productCode : BK71 , name : product 1+ , description : This is the penultimate product , category : { id : ROOT , name : ROOT } }, palletName : null, boxName : null, statusCode : CANCELED , quantityRequested : 100, quantityAllowed : null, quantityAvailable : null, quantityCanceled : 100, quantityRevised : null, reasonCode : BECAUSE , comments : more information since BECAUSE is not a good reason , recipient : null, sortOrder : null } ] } } Revert # This allows you to revert any changes made to the stock movement item (including revisions, cancellations, and substitutions). However it does not allow you to revert deletes and updates. Request # $ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d @revertStockMovementItem.json \\ https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181644d5e5b01644e5007500001|jsonlint Post Body (revertStockMovementItem.json) # { id : ff808181644d5e5b01644e5007500001 , name : my new stock movement , description : , identifier : 483ZSA , origin.id : 2 , destination.id : 1 , dateRequested : 06/23/2018 , requestedBy.id : 1 , lineItems : [ { id : ff808181644e51a401644e85891b0006 , revert : true } ] } Response # { data : { id : ff808181644d5e5b01644e5007500001 , name : my new stock movement , description : my new stock movement , identifier : 483ZSA , origin : { id : 2 , name : Miami Warehouse }, destination : { id : 1 , name : Boston Headquarters }, dateRequested : 06/23/2018 , requestedBy : { id : 1 , name : Mr Administrator , firstName : Mr , lastName : Administrator , email : admin@pih.org , username : admin }, lineItems : [ { id : ff808181644e51a401644e85891b0006 , productCode : BK71 , product : { id : ff8081816407132d0164071eec250001 , productCode : BK71 , name : product 1+ , description : This is the penultimate product , category : { id : ROOT , name : ROOT } }, palletName : null, boxName : null, statusCode : PENDING , quantityRequested : 100, quantityAllowed : null, quantityAvailable : null, quantityCanceled : 0, quantityRevised : null, reasonCode : null, comments : null, recipient : null, sortOrder : null } ] } } Delete # This operation allows you to delete the stock movement item completely. Request # $ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d @deleteStockMovementItem.json \\ https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181644d5e5b01644e5007500001|jsonlint Post Body (deleteStockMovementItem.json) # { id : ff808181644d5e5b01644e5007500001 , name : my new stock movement , description : , identifier : 483ZSA , origin.id : 2 , destination.id : 1 , dateRequested : 06/23/2018 , requestedBy.id : 1 , lineItems : [ { id : ff808181644e51a401644e85891b0006 , delete : true , } ] } Response # { data : { id : ff808181644d5e5b01644e5007500001 , name : my new stock movement , description : my new stock movement , identifier : 483ZSA , origin : { id : 2 , name : Miami Warehouse }, destination : { id : 1 , name : Boston Headquarters }, dateRequested : 06/23/2018 , requestedBy : { id : 1 , name : Mr Administrator , firstName : Mr , lastName : Administrator , email : admin@pih.org , username : admin }, lineItems : [] } } Exceptions # This operation cannot be performed on a stock movement item that has been revised (due to a bug with foreign key constraints). { errorCode : 500, errorMessage : Cannot delete or update a parent row: a foreign key constraint fails (`openboxes_integration`.`requisition_item`, CONSTRAINT `FK5358E4D6405AC22D` FOREIGN KEY (`modification_item_id`) REFERENCES `requisition_item` (`id`)) } Therefore you must revert all changes to the stock movement item before deleting. Picking # Request # curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d @pickStockMovementItems.json \\ https://openboxes.ngrok.io/openboxes/api/stockMovementItems/ff808181646b260401646b5bf4cb002b Post Body (pickStockMovementItem.json) # { picklistItems :[{ id : ff80818164787ed10164788a0f190022 , inventoryItem.id : ff8081816473166d0164731d419f000c , binLocation.id : ff808181646d3ec101646d5e8e3e0003 , quantityPicked : 10 }] } NOTE: To create a pick list item, remove the ID field from the post body (value can also be empty string). To edit an existing picklist item, specify the ID from the picklistItems array. To delete the picklist item assign a value of 0 to the quantityPicked field. Exceptions # This operation might fail if the quantity picked of the selected item is greater than the quantity on hand of that item in stock.","title":"Stock Movement Item"},{"location":"api-guide/stockMovementItem/#stock_movement_items","text":"","title":"Stock Movement Items"},{"location":"api-guide/stockMovementItem/#create","text":"","title":"Create"},{"location":"api-guide/stockMovementItem/#request","text":"$ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d @addStockMovementItem.json \\ https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181644d5e5b01644e5007500001|jsonlint","title":"Request"},{"location":"api-guide/stockMovementItem/#post_body_addstockmovementitemjson","text":"{ id : ff808181644d5e5b01644e5007500001 , name : my new stock movement , description : , identifier : 483ZSA , origin.id : 2 , destination.id : 1 , dateRequested : 06/23/2018 , requestedBy.id : 1 , lineItems : [{ product.id : ff8081816407132d0164071eec250001 , quantityRequested : 100 , sortOrder : 0, recipient.id : 1 }] }","title":"Post Body (addStockMovementItem.json)"},{"location":"api-guide/stockMovementItem/#response","text":"{ data : { id : ff808181644d5e5b01644e5007500001 , name : my new stock movement , description : , identifier : 483ZSA , origin : { id : 2 , name : Miami Warehouse }, destination : { id : 1 , name : Boston Headquarters }, dateRequested : 06/23/2018 , requestedBy : { id : 1 , name : Mr Administrator , firstName : Mr , lastName : Administrator , email : admin@pih.org , username : admin }, lineItems : [ { id : ff808181644e51a401644e85891b0006 , productCode : BK71 , product : { id : ff8081816407132d0164071eec250001 , productCode : BK71 , name : product 1+ , description : This is the penultimate product , category : { id : ROOT , name : ROOT } }, palletName : null, boxName : null, statusCode : PENDING , quantityRequested : 100, quantityAllowed : null, quantityAvailable : null, quantityCanceled : null, quantityRevised : null, reasonCode : null, comments : null, recipient : null, sortOrder : null } ] } }","title":"Response"},{"location":"api-guide/stockMovementItem/#update","text":"This is used to change the quantity or product associated with an item, as well as other changes like sort order. This is a direct change to the requisition item. If you're looking to record a new quantity and want to keep the originally requested information, then you'll likely want to use the Revise Stock Movement Item example below This will allow you to keep the originally requested quantity and product information, record the new quantity, as well as a reason for the revision (see next section for more information) $ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d @updateStockMovementItem.json \\ https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181644d5e5b01644e5007500001|jsonlint","title":"Update"},{"location":"api-guide/stockMovementItem/#request_body_updatestockmovementitemjson","text":"{ id : ff808181644d5e5b01644e5007500001 , name : my new stock movement , description : , identifier : 483ZSA , origin.id : 2 , destination.id : 1 , dateRequested : 06/23/2018 , requestedBy.id : 1 , lineItems : [{ id : ff808181644e51a401644e85891b0006 , product.id : ff80818155df9de40155df9e31000001 , quantityRequested : 500 , sortOrder : 0 }] }","title":"Request Body (updateStockMovementItem.json)"},{"location":"api-guide/stockMovementItem/#response_1","text":"{ data : { id : ff808181644d5e5b01644e5007500001 , name : my new stock movement , description : my new stock movement , identifier : 483ZSA , origin : { id : 2 , name : Miami Warehouse }, destination : { id : 1 , name : Boston Headquarters }, dateRequested : 06/23/2018 , requestedBy : { id : 1 , name : Mr Administrator , firstName : Mr , lastName : Administrator , email : admin@pih.org , username : admin }, lineItems : [ { id : ff808181644e51a401644e85891b0006 , productCode : 00001 , product : { id : ff80818155df9de40155df9e31000001 , productCode : 00001 , name : Ibuprofen 200mg , description : null, category : { id : 1 , name : Medicines } }, palletName : null, boxName : null, statusCode : PENDING , quantityRequested : 500, quantityAllowed : null, quantityAvailable : null, quantityCanceled : 0, quantityRevised : null, reasonCode : null, comments : null, recipient : null, sortOrder : null } ] } }","title":"Response"},{"location":"api-guide/stockMovementItem/#revise","text":"This is used to record a revision to the quantity requested. This requires the user to choose a reason code (i.e. STOCKOUT) and optionally add comments that may help provide more context for the revision.","title":"Revise"},{"location":"api-guide/stockMovementItem/#request_1","text":"$ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d @reviseStockMovementItem.json \\ https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181644d5e5b01644e5007500001|jsonlint","title":"Request"},{"location":"api-guide/stockMovementItem/#post_body_revisestockmovementitemjson","text":"{ id : ff808181644d5e5b01644e5007500001 , name : my new stock movement , description : , identifier : 483ZSA , origin.id : 2 , destination.id : 1 , dateRequested : 06/23/2018 , requestedBy.id : 1 , lineItems : [ { id : ff808181644e51a401644e85891b0006 , quantityRevised :200, reasonCode : BECAUSE , comments : because i said so , } ] }","title":"Post Body (reviseStockMovementItem.json)"},{"location":"api-guide/stockMovementItem/#response_2","text":"{ data : { id : ff808181644d5e5b01644e5007500001 , name : my new stock movement , description : my new stock movement , identifier : 483ZSA , origin : { id : 2 , name : Miami Warehouse }, destination : { id : 1 , name : Boston Headquarters }, dateRequested : 06/23/2018 , requestedBy : { id : 1 , name : Mr Administrator , firstName : Mr , lastName : Administrator , email : admin@pih.org , username : admin }, lineItems : [ { id : ff808181644e51a401644e85891b0006 , productCode : BK71 , product : { id : ff8081816407132d0164071eec250001 , productCode : BK71 , name : product 1+ , description : This is the penultimate product , category : { id : ROOT , name : ROOT } }, palletName : null, boxName : null, statusCode : CHANGED , quantityRequested : 100, quantityAllowed : null, quantityAvailable : null, quantityCanceled : 100, quantityRevised : 200, reasonCode : BECAUSE , comments : because i said so , recipient : null, sortOrder : null } ] } }","title":"Response"},{"location":"api-guide/stockMovementItem/#substitute","text":"This is used to record a substitution for an stock movement item. This requires the user to enter a new product and quantity, as well as choose a reason code (i.e. STOCKOUT) and optionally add a comment that may help provide more context for the substitution.","title":"Substitute"},{"location":"api-guide/stockMovementItem/#request_2","text":"$ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d @substituteStockMovementItem.json \\ https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181644d5e5b01644e5007500001|jsonlint","title":"Request"},{"location":"api-guide/stockMovementItem/#post_body_substitutestockmovementitemjson","text":"{ id : ff808181644d5e5b01644e5007500001 , name : my new stock movement , description : , identifier : 483ZSA , origin.id : 2 , destination.id : 1 , dateRequested : 06/23/2018 , requestedBy.id : 1 , lineItems : [{ id : ff808181644e51a401644e85891b0006 , substitute : true , newProduct.id : ff80818155df9de40155df9e3312000d , newQuantity :100, reasonCode : CLINICAL , comments : A clinical decision that is none of your business , }] } NOTE: You can add multiple substitutions by adding another line item with the same ID along with the substitute instruction.","title":"Post Body (substituteStockMovementItem.json)"},{"location":"api-guide/stockMovementItem/#response_3","text":"{ data : { id : ff808181644d5e5b01644e5007500001 , name : my new stock movement , description : my new stock movement , identifier : 483ZSA , origin : { id : 2 , name : Miami Warehouse }, destination : { id : 1 , name : Boston Headquarters }, dateRequested : 06/23/2018 , requestedBy : { id : 1 , name : Mr Administrator , firstName : Mr , lastName : Administrator , email : admin@pih.org , username : admin }, lineItems : [ { id : ff808181644e51a401644e85891b0006 , productCode : BK71 , product : { id : ff8081816407132d0164071eec250001 , productCode : BK71 , name : product 1+ , description : This is the penultimate product , category : { id : ROOT , name : ROOT } }, palletName : null, boxName : null, statusCode : SUBSTITUTED , quantityRequested : 100, quantityAllowed : null, quantityAvailable : null, quantityCanceled : 100, quantityRevised : null, substitutions : [ { id : ff8081816458c881016458d22b5f0002 , productCode : 00005 , product : { id : ff80818155df9de40155df9e33930011 , productCode : 00005 , name : Similac Advance low iron 400g , description : null, category : { id : 1 , name : Medicines } }, palletName : null, boxName : null, statusCode : APPROVED , quantityRequested : 100, quantityAllowed : null, quantityAvailable : null, quantityCanceled : null, quantityRevised : null, substitutions : [], reasonCode : null, comments : null, recipient : null, sortOrder : null } ], reasonCode : CLINICAL , comments : A clinical decision that is none of your business , recipient : null, sortOrder : null } ] } } IMPORTANT : If you want to make changes to an existing substitution item, the request body should include an instruction to revert the changes along with the modified substitution items. You can also modify ANY stock movement item by editing it's corresponding requisition item through the Requisition Item API endpoint (currently /api/generic/requisitionItem/:id ). Substitutions and modifications are just children requisition items under the original requisition item. { id : ff808181644d5e5b01644e5007500001 , name : my new stock movement , description : , identifier : 483ZSA , origin.id : 2 , destination.id : 1 , dateRequested : 06/23/2018 , requestedBy.id : 1 , lineItems : [{ id : ff8081816458c881016458ca819e0001 , revert : true }, { id : ff8081816458c881016458ca819e0001 , substitute : true , newProduct.id : ff80818155df9de40155df9e33930011 , newQuantity :1000, reasonCode : CLINICAL , comments : A clinical decision that is none of your business , }, { id : ff8081816458c881016458ca819e0001 , substitute : true , newProduct.id : ff80818155df9de40155df9e3312000d , newQuantity :500, reasonCode : CLINICAL , comments : A clinical decision that is none of your business , }] }","title":"Response"},{"location":"api-guide/stockMovementItem/#exceptions","text":"Cannot substitute a product that is not in the original product's list of available substitutions. See the Substitutions API. { errorCode : 500, errorMessage : Product 00004 General Pain Reliever is not a valid substitution of BK71 product 1+ } You also cannot substitute the product for itself. { errorCode : 500, errorMessage : Product BK71 product 1+ is not a valid substitution of BK71 product 1+ }","title":"Exceptions"},{"location":"api-guide/stockMovementItem/#cancel","text":"Similar to a revision, this operation allows you to cancel the stock movement item.","title":"Cancel"},{"location":"api-guide/stockMovementItem/#request_3","text":"$ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d @cancelStockMovementItem.json \\ https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181644d5e5b01644e5007500001|jsonlint","title":"Request"},{"location":"api-guide/stockMovementItem/#post_body_cancelstockmovementitemjson","text":"{ id : ff808181644d5e5b01644e5007500001 , name : my new stock movement , description : , identifier : 483ZSA , origin.id : 2 , destination.id : 1 , dateRequested : 06/23/2018 , requestedBy.id : 1 , lineItems : [ { id : ff808181644e51a401644e85891b0006 , cancel : true , reasonCode : BECAUSE , comments : more information since BECAUSE is not a good reason } ] }","title":"Post Body (cancelStockMovementItem.json)"},{"location":"api-guide/stockMovementItem/#response_4","text":"{ data : { id : ff808181644d5e5b01644e5007500001 , name : my new stock movement , description : my new stock movement , identifier : 483ZSA , origin : { id : 2 , name : Miami Warehouse }, destination : { id : 1 , name : Boston Headquarters }, dateRequested : 06/23/2018 , requestedBy : { id : 1 , name : Mr Administrator , firstName : Mr , lastName : Administrator , email : admin@pih.org , username : admin }, lineItems : [ { id : ff808181644e51a401644e85891b0006 , productCode : BK71 , product : { id : ff8081816407132d0164071eec250001 , productCode : BK71 , name : product 1+ , description : This is the penultimate product , category : { id : ROOT , name : ROOT } }, palletName : null, boxName : null, statusCode : CANCELED , quantityRequested : 100, quantityAllowed : null, quantityAvailable : null, quantityCanceled : 100, quantityRevised : null, reasonCode : BECAUSE , comments : more information since BECAUSE is not a good reason , recipient : null, sortOrder : null } ] } }","title":"Response"},{"location":"api-guide/stockMovementItem/#revert","text":"This allows you to revert any changes made to the stock movement item (including revisions, cancellations, and substitutions). However it does not allow you to revert deletes and updates.","title":"Revert"},{"location":"api-guide/stockMovementItem/#request_4","text":"$ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d @revertStockMovementItem.json \\ https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181644d5e5b01644e5007500001|jsonlint","title":"Request"},{"location":"api-guide/stockMovementItem/#post_body_revertstockmovementitemjson","text":"{ id : ff808181644d5e5b01644e5007500001 , name : my new stock movement , description : , identifier : 483ZSA , origin.id : 2 , destination.id : 1 , dateRequested : 06/23/2018 , requestedBy.id : 1 , lineItems : [ { id : ff808181644e51a401644e85891b0006 , revert : true } ] }","title":"Post Body (revertStockMovementItem.json)"},{"location":"api-guide/stockMovementItem/#response_5","text":"{ data : { id : ff808181644d5e5b01644e5007500001 , name : my new stock movement , description : my new stock movement , identifier : 483ZSA , origin : { id : 2 , name : Miami Warehouse }, destination : { id : 1 , name : Boston Headquarters }, dateRequested : 06/23/2018 , requestedBy : { id : 1 , name : Mr Administrator , firstName : Mr , lastName : Administrator , email : admin@pih.org , username : admin }, lineItems : [ { id : ff808181644e51a401644e85891b0006 , productCode : BK71 , product : { id : ff8081816407132d0164071eec250001 , productCode : BK71 , name : product 1+ , description : This is the penultimate product , category : { id : ROOT , name : ROOT } }, palletName : null, boxName : null, statusCode : PENDING , quantityRequested : 100, quantityAllowed : null, quantityAvailable : null, quantityCanceled : 0, quantityRevised : null, reasonCode : null, comments : null, recipient : null, sortOrder : null } ] } }","title":"Response"},{"location":"api-guide/stockMovementItem/#delete","text":"This operation allows you to delete the stock movement item completely.","title":"Delete"},{"location":"api-guide/stockMovementItem/#request_5","text":"$ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d @deleteStockMovementItem.json \\ https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181644d5e5b01644e5007500001|jsonlint","title":"Request"},{"location":"api-guide/stockMovementItem/#post_body_deletestockmovementitemjson","text":"{ id : ff808181644d5e5b01644e5007500001 , name : my new stock movement , description : , identifier : 483ZSA , origin.id : 2 , destination.id : 1 , dateRequested : 06/23/2018 , requestedBy.id : 1 , lineItems : [ { id : ff808181644e51a401644e85891b0006 , delete : true , } ] }","title":"Post Body (deleteStockMovementItem.json)"},{"location":"api-guide/stockMovementItem/#response_6","text":"{ data : { id : ff808181644d5e5b01644e5007500001 , name : my new stock movement , description : my new stock movement , identifier : 483ZSA , origin : { id : 2 , name : Miami Warehouse }, destination : { id : 1 , name : Boston Headquarters }, dateRequested : 06/23/2018 , requestedBy : { id : 1 , name : Mr Administrator , firstName : Mr , lastName : Administrator , email : admin@pih.org , username : admin }, lineItems : [] } }","title":"Response"},{"location":"api-guide/stockMovementItem/#exceptions_1","text":"This operation cannot be performed on a stock movement item that has been revised (due to a bug with foreign key constraints). { errorCode : 500, errorMessage : Cannot delete or update a parent row: a foreign key constraint fails (`openboxes_integration`.`requisition_item`, CONSTRAINT `FK5358E4D6405AC22D` FOREIGN KEY (`modification_item_id`) REFERENCES `requisition_item` (`id`)) } Therefore you must revert all changes to the stock movement item before deleting.","title":"Exceptions"},{"location":"api-guide/stockMovementItem/#picking","text":"","title":"Picking"},{"location":"api-guide/stockMovementItem/#request_6","text":"curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d @pickStockMovementItems.json \\ https://openboxes.ngrok.io/openboxes/api/stockMovementItems/ff808181646b260401646b5bf4cb002b","title":"Request"},{"location":"api-guide/stockMovementItem/#post_body_pickstockmovementitemjson","text":"{ picklistItems :[{ id : ff80818164787ed10164788a0f190022 , inventoryItem.id : ff8081816473166d0164731d419f000c , binLocation.id : ff808181646d3ec101646d5e8e3e0003 , quantityPicked : 10 }] } NOTE: To create a pick list item, remove the ID field from the post body (value can also be empty string). To edit an existing picklist item, specify the ID from the picklistItems array. To delete the picklist item assign a value of 0 to the quantityPicked field.","title":"Post Body (pickStockMovementItem.json)"},{"location":"api-guide/stockMovementItem/#exceptions_2","text":"This operation might fail if the quantity picked of the selected item is greater than the quantity on hand of that item in stock.","title":"Exceptions"},{"location":"api-guide/stockMovementStatus/","text":"Stock Movement Status # For stock movements, the Status API provides a way to transition the stock movement between states. The API is currently only configured to change the stock movement status and return the JSON required for the page associated with the next status. For example, moving from REVIEWING to PICKING would return the customized JSON response required for the Picking stage of the stock movement workflow. In future versions we'll add the ability to validate the stock movement between transitions as well as custom business logic related to the transition. For example in the transition to the ISSUED state, we'll want that to trigger a shipment to be sent if the stock movement has been fully picked. The data returned by Status API is the same data returned by a GET request on the Stock Movement API. Therefore, you can use the stepNumber parameter if you want to transform the response data for a specific step. At, the moment only ?stepNumber=4 transforms the data, but that might change in a later version. Read # $ curl -b cookies.txt -X GET -H Content-Type: application/json https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181646b260401646b5bf4ca002a/status |jsonlint { data : CHECKING } Create # Not supported at this time. Delete # The DELETE action allows you to rollback the current status for a stock movement. $ curl -b cookies.txt -X DELETE -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181646b260401646b5bf4ca002a/status |jsonlint Update # Supported request parameters # stepNumber : Allows you to customize the JSON response for the step number. In the case you are tranisitioning to the PICKING state, you may want to change the step number to 4 so that the JSON response is customized for that page. If you don't provide the step number you'll get the default JSON response. At the moment, only stepNumber=4 returns a custom JSON response. But this will likely change in a future version. Supported attributes # status : The status you want to transition to. statusOnly : Allows you to change the status only (not apply business logic for the transition). Useful for testing and/or getting a stock movement back into a known state. rollback : Allows you to rollback the current status (see Delete). Supported attributes related to the PICKING state # clearPicklist : Allows you to clear the picklist in case you want to start fresh. createPicklist : Allows you to auto-generate a picklist when entering the PICKING state. Created # The first state in the stock movement lifecycle is the CREATED state. You can also transition to PENDING OPEN if that's more clear to your users. $ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d '{ status : CREATED }' \\ https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181646b260401646b5bf4ca002a/status |jsonlint { data : { id : ff808181646b260401646b5bf4ca002a , name : Stock - Store 1 - Mixed - Jul 05 2018 , description : null, statusCode : CREATED , identifier : 916SUB , origin : { id : ff808181646b260401646b3f2ced0002 , name : Store 1 }, destination : { id : ff8081816430012d0164301b8eda0008 , name : Depot 1 }, dateRequested : 07/05/2018 , requestedBy : { id : 3 , name : Justin Miranda , firstName : Justin , lastName : Miranda , email : jmiranda@pih.org , username : jmiranda }, lineItems : [ { id : ff808181646b260401646b5bf4cb002b , productCode : AB12 , product : { id : ff80818155df9de40155df9e31000001 , productCode : AB12 , name : Ibuprofen 200mg , description : null, category.id : 1 , category.name : Medicines }, palletName : null, boxName : null, statusCode : APPROVED , quantityRequested : 25, quantityAllowed : null, quantityAvailable : null, quantityCanceled : null, quantityRevised : null, quantityPicked : 0, reasonCode : null, comments : null, recipient : null, substitutionItems : [], sortOrder : 0 }, { id : ff808181646b260401646b5bf4cb002c , productCode : 00002 , product : { id : ff80818155df9de40155df9e321c0005 , productCode : 00002 , name : Tylenol 325mg , description : null, category.id : 1 , category.name : Medicines }, palletName : null, boxName : null, statusCode : CANCELED , quantityRequested : 50, quantityAllowed : null, quantityAvailable : null, quantityCanceled : 50, quantityRevised : null, quantityPicked : 0, reasonCode : STOCKOUT , comments : temporary stock out , recipient : null, substitutionItems : [], sortOrder : 1 }, { id : ff8081816472adba016472cc9b460001 , productCode : 00005 , product : { id : ff80818155df9de40155df9e33930011 , productCode : 00005 , name : Similac Advance low iron 400g , description : null, category.id : 1 , category.name : Medicines }, palletName : null, boxName : null, statusCode : PENDING , quantityRequested : 20, quantityAllowed : null, quantityAvailable : null, quantityCanceled : null, quantityRevised : null, quantityPicked : 0, reasonCode : null, comments : null, recipient : null, substitutionItems : [], sortOrder : 2 } ], pickPage : null } Editing # After creating the stock movement you are brought to the EDITING state (step 2) of the workflow which allows you to edit the line items. Honestly, there's no requirement to move into this state from the current UI so this state can probably be ignored. $ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d '{ status : EDITING }' \\ https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181646b260401646b5bf4ca002a/status?stepNumber=2 |jsonlint Verifying # Once items have been added to the stock movement you'll move into the VERIFYING state (step 3) which allows you to revise quantity, substitute items, cancel items, and generally $ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d '{ status : VERIFYING }' \\ https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181646b260401646b5bf4ca002a/status?stepNumber=3 |jsonlint Picking # The PICKING state (step 4) is the one state that currently has custom business logic associated with it. To trigger this business logic, you can choose to include optional attributes \"clearPicklist\":\"true\" or \"createPicklist\":\"true\" to your JSON body in order to, respectively: clear the current picklist of all items or automatically created a picklist and fill it with suggested items. NOTE: We use a first-expiry-first-out (FEFO) algorithm for stock picking. In the future, this might be configurable by product. $ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d '{ status : PICKING , createPicklist : true }' \\ https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181646b260401646b5bf4ca002a/status?stepNumber=4 |jsonlint Picked # Once you have finished picking items for the stock movement, you'll move to the PICKED state (step 5). $ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d '{ status : PICKED }' \\ https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181646b260401646b5bf4ca002a/status |jsonlint Issued # In the PICKED state you will be prompoted to enter information about the shipment used to send stock to the destination. Once this information has been filled out and saved to the database, you can transitition to the ISSUED state which will attempt to send the stock movement to the destination as a shipment. As you can see in the response below, this state transition has not been implemented yet. curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d '{ status : ISSUED }' https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181646b260401646b5bf4ca002a/status?stepNumber=6 { errorCode : 500, errorMessage : Cannot send stock movement 916SUB - method has not been implemented yet } Canceled # If at any point you'd like to cancel the stock movement you can transition to the CANCELED state. If the stock movement is canceled after it has been moved to the ISSUED state then any transaction created as part of the stock movement will be reverted and the stock movement will be transitioned to the CANCELED state. $ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d '{ status : CANCELED }' \\ https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181646b260401646b5bf4ca002a/status |jsonlint Exceptions # Cannot re-issue an ISSUED stock movement # If you really need to rollback the ISSUED state, you'll need to use the Rollback Status feature. $ curl -b cookies.txt -X POST -H Content-Type: application/json -d '{ status : ISSUED }' https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181646b260401646b5bf4ca002a/status?stepNumber=5 |jsonlint { errorCode : 400, exception : grails.validation.ValidationException , errorMessage : Validation errors , data : [ { arguments : null, class : org.springframework.validation.ObjectError , code : shipment.invalid.alreadyShipped , codes : [ shipment.invalid.alreadyShipped.org.pih.warehouse.shipping.Shipment , shipment.invalid.alreadyShipped ], defaultMessage : Shipment has already shipped , objectName : org.pih.warehouse.shipping.Shipment } ] }","title":"Stock Movement Status"},{"location":"api-guide/stockMovementStatus/#stock_movement_status","text":"For stock movements, the Status API provides a way to transition the stock movement between states. The API is currently only configured to change the stock movement status and return the JSON required for the page associated with the next status. For example, moving from REVIEWING to PICKING would return the customized JSON response required for the Picking stage of the stock movement workflow. In future versions we'll add the ability to validate the stock movement between transitions as well as custom business logic related to the transition. For example in the transition to the ISSUED state, we'll want that to trigger a shipment to be sent if the stock movement has been fully picked. The data returned by Status API is the same data returned by a GET request on the Stock Movement API. Therefore, you can use the stepNumber parameter if you want to transform the response data for a specific step. At, the moment only ?stepNumber=4 transforms the data, but that might change in a later version.","title":"Stock Movement Status"},{"location":"api-guide/stockMovementStatus/#read","text":"$ curl -b cookies.txt -X GET -H Content-Type: application/json https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181646b260401646b5bf4ca002a/status |jsonlint { data : CHECKING }","title":"Read"},{"location":"api-guide/stockMovementStatus/#create","text":"Not supported at this time.","title":"Create"},{"location":"api-guide/stockMovementStatus/#delete","text":"The DELETE action allows you to rollback the current status for a stock movement. $ curl -b cookies.txt -X DELETE -H Content-Type: application/json \\ https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181646b260401646b5bf4ca002a/status |jsonlint","title":"Delete"},{"location":"api-guide/stockMovementStatus/#update","text":"","title":"Update"},{"location":"api-guide/stockMovementStatus/#supported_request_parameters","text":"stepNumber : Allows you to customize the JSON response for the step number. In the case you are tranisitioning to the PICKING state, you may want to change the step number to 4 so that the JSON response is customized for that page. If you don't provide the step number you'll get the default JSON response. At the moment, only stepNumber=4 returns a custom JSON response. But this will likely change in a future version.","title":"Supported request parameters"},{"location":"api-guide/stockMovementStatus/#supported_attributes","text":"status : The status you want to transition to. statusOnly : Allows you to change the status only (not apply business logic for the transition). Useful for testing and/or getting a stock movement back into a known state. rollback : Allows you to rollback the current status (see Delete).","title":"Supported attributes"},{"location":"api-guide/stockMovementStatus/#supported_attributes_related_to_the_picking_state","text":"clearPicklist : Allows you to clear the picklist in case you want to start fresh. createPicklist : Allows you to auto-generate a picklist when entering the PICKING state.","title":"Supported attributes related to the PICKING state"},{"location":"api-guide/stockMovementStatus/#created","text":"The first state in the stock movement lifecycle is the CREATED state. You can also transition to PENDING OPEN if that's more clear to your users. $ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d '{ status : CREATED }' \\ https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181646b260401646b5bf4ca002a/status |jsonlint { data : { id : ff808181646b260401646b5bf4ca002a , name : Stock - Store 1 - Mixed - Jul 05 2018 , description : null, statusCode : CREATED , identifier : 916SUB , origin : { id : ff808181646b260401646b3f2ced0002 , name : Store 1 }, destination : { id : ff8081816430012d0164301b8eda0008 , name : Depot 1 }, dateRequested : 07/05/2018 , requestedBy : { id : 3 , name : Justin Miranda , firstName : Justin , lastName : Miranda , email : jmiranda@pih.org , username : jmiranda }, lineItems : [ { id : ff808181646b260401646b5bf4cb002b , productCode : AB12 , product : { id : ff80818155df9de40155df9e31000001 , productCode : AB12 , name : Ibuprofen 200mg , description : null, category.id : 1 , category.name : Medicines }, palletName : null, boxName : null, statusCode : APPROVED , quantityRequested : 25, quantityAllowed : null, quantityAvailable : null, quantityCanceled : null, quantityRevised : null, quantityPicked : 0, reasonCode : null, comments : null, recipient : null, substitutionItems : [], sortOrder : 0 }, { id : ff808181646b260401646b5bf4cb002c , productCode : 00002 , product : { id : ff80818155df9de40155df9e321c0005 , productCode : 00002 , name : Tylenol 325mg , description : null, category.id : 1 , category.name : Medicines }, palletName : null, boxName : null, statusCode : CANCELED , quantityRequested : 50, quantityAllowed : null, quantityAvailable : null, quantityCanceled : 50, quantityRevised : null, quantityPicked : 0, reasonCode : STOCKOUT , comments : temporary stock out , recipient : null, substitutionItems : [], sortOrder : 1 }, { id : ff8081816472adba016472cc9b460001 , productCode : 00005 , product : { id : ff80818155df9de40155df9e33930011 , productCode : 00005 , name : Similac Advance low iron 400g , description : null, category.id : 1 , category.name : Medicines }, palletName : null, boxName : null, statusCode : PENDING , quantityRequested : 20, quantityAllowed : null, quantityAvailable : null, quantityCanceled : null, quantityRevised : null, quantityPicked : 0, reasonCode : null, comments : null, recipient : null, substitutionItems : [], sortOrder : 2 } ], pickPage : null }","title":"Created"},{"location":"api-guide/stockMovementStatus/#editing","text":"After creating the stock movement you are brought to the EDITING state (step 2) of the workflow which allows you to edit the line items. Honestly, there's no requirement to move into this state from the current UI so this state can probably be ignored. $ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d '{ status : EDITING }' \\ https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181646b260401646b5bf4ca002a/status?stepNumber=2 |jsonlint","title":"Editing"},{"location":"api-guide/stockMovementStatus/#verifying","text":"Once items have been added to the stock movement you'll move into the VERIFYING state (step 3) which allows you to revise quantity, substitute items, cancel items, and generally $ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d '{ status : VERIFYING }' \\ https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181646b260401646b5bf4ca002a/status?stepNumber=3 |jsonlint","title":"Verifying"},{"location":"api-guide/stockMovementStatus/#picking","text":"The PICKING state (step 4) is the one state that currently has custom business logic associated with it. To trigger this business logic, you can choose to include optional attributes \"clearPicklist\":\"true\" or \"createPicklist\":\"true\" to your JSON body in order to, respectively: clear the current picklist of all items or automatically created a picklist and fill it with suggested items. NOTE: We use a first-expiry-first-out (FEFO) algorithm for stock picking. In the future, this might be configurable by product. $ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d '{ status : PICKING , createPicklist : true }' \\ https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181646b260401646b5bf4ca002a/status?stepNumber=4 |jsonlint","title":"Picking"},{"location":"api-guide/stockMovementStatus/#picked","text":"Once you have finished picking items for the stock movement, you'll move to the PICKED state (step 5). $ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d '{ status : PICKED }' \\ https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181646b260401646b5bf4ca002a/status |jsonlint","title":"Picked"},{"location":"api-guide/stockMovementStatus/#issued","text":"In the PICKED state you will be prompoted to enter information about the shipment used to send stock to the destination. Once this information has been filled out and saved to the database, you can transitition to the ISSUED state which will attempt to send the stock movement to the destination as a shipment. As you can see in the response below, this state transition has not been implemented yet. curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d '{ status : ISSUED }' https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181646b260401646b5bf4ca002a/status?stepNumber=6 { errorCode : 500, errorMessage : Cannot send stock movement 916SUB - method has not been implemented yet }","title":"Issued"},{"location":"api-guide/stockMovementStatus/#canceled","text":"If at any point you'd like to cancel the stock movement you can transition to the CANCELED state. If the stock movement is canceled after it has been moved to the ISSUED state then any transaction created as part of the stock movement will be reverted and the stock movement will be transitioned to the CANCELED state. $ curl -b cookies.txt -X POST -H Content-Type: application/json \\ -d '{ status : CANCELED }' \\ https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181646b260401646b5bf4ca002a/status |jsonlint","title":"Canceled"},{"location":"api-guide/stockMovementStatus/#exceptions","text":"","title":"Exceptions"},{"location":"api-guide/stockMovementStatus/#cannot_re-issue_an_issued_stock_movement","text":"If you really need to rollback the ISSUED state, you'll need to use the Rollback Status feature. $ curl -b cookies.txt -X POST -H Content-Type: application/json -d '{ status : ISSUED }' https://openboxes.ngrok.io/openboxes/api/stockMovements/ff808181646b260401646b5bf4ca002a/status?stepNumber=5 |jsonlint { errorCode : 400, exception : grails.validation.ValidationException , errorMessage : Validation errors , data : [ { arguments : null, class : org.springframework.validation.ObjectError , code : shipment.invalid.alreadyShipped , codes : [ shipment.invalid.alreadyShipped.org.pih.warehouse.shipping.Shipment , shipment.invalid.alreadyShipped ], defaultMessage : Shipment has already shipped , objectName : org.pih.warehouse.shipping.Shipment } ] }","title":"Cannot re-issue an ISSUED stock movement"},{"location":"configuration/ajp/","text":"AJP # Configure mod_jk # sudo apt-get install libapache2-mod-jk Enable mod_jk # sudo a2enmod jk Update workers.properties # /etc/libapache2-mod-jk/workers.properties workers.tomcat_home=/opt/tomcat/apache-tomcat-7.0.91 workers.java_home=/usr/lib/jvm/java-7-openjdk-amd64 Configure Tomcat server.xml # Make sure that the following line in server.xml is uncommented. Connector port= 8009 protocol= AJP/1.3 redirectPort= 8443 / If you needed to uncomment it, save the file, and then restart Tomcat for the changes to take effect. sudo service tomcat restart To delegate requests from Apache to Tomcat # Add the following line to your apache configuration in sites-enabled. If you've enabled HTTPS already, you might have to edit two files. However, if you enabled redirect /etc/apache2/sites-enabled/000-default.conf /etc/apache2/sites-enabled/000-default-le-ssl.conf JkMount /manager* ajp13_worker JkMount /openboxes* ajp13_worker To redirect requests from the root context to /openboxes # RedirectMatch ^/$ /openboxes/ Restart Apache # sudo service apache2 restart","title":"Tomcat AJP"},{"location":"configuration/ajp/#ajp","text":"","title":"AJP"},{"location":"configuration/ajp/#configure_mod_jk","text":"sudo apt-get install libapache2-mod-jk","title":"Configure mod_jk"},{"location":"configuration/ajp/#enable_mod_jk","text":"sudo a2enmod jk","title":"Enable mod_jk"},{"location":"configuration/ajp/#update_workersproperties","text":"/etc/libapache2-mod-jk/workers.properties workers.tomcat_home=/opt/tomcat/apache-tomcat-7.0.91 workers.java_home=/usr/lib/jvm/java-7-openjdk-amd64","title":"Update workers.properties"},{"location":"configuration/ajp/#configure_tomcat_serverxml","text":"Make sure that the following line in server.xml is uncommented. Connector port= 8009 protocol= AJP/1.3 redirectPort= 8443 / If you needed to uncomment it, save the file, and then restart Tomcat for the changes to take effect. sudo service tomcat restart","title":"Configure Tomcat server.xml"},{"location":"configuration/ajp/#to_delegate_requests_from_apache_to_tomcat","text":"Add the following line to your apache configuration in sites-enabled. If you've enabled HTTPS already, you might have to edit two files. However, if you enabled redirect /etc/apache2/sites-enabled/000-default.conf /etc/apache2/sites-enabled/000-default-le-ssl.conf JkMount /manager* ajp13_worker JkMount /openboxes* ajp13_worker","title":"To delegate requests from Apache to Tomcat"},{"location":"configuration/ajp/#to_redirect_requests_from_the_root_context_to_openboxes","text":"RedirectMatch ^/$ /openboxes/","title":"To redirect requests from the root context to /openboxes"},{"location":"configuration/ajp/#restart_apache","text":"sudo service apache2 restart","title":"Restart Apache"},{"location":"configuration/application/","text":"Application properties # General # Settings # | Setting | Required | Description | | ---- | ---- | ---- | ---- | | openboxes.signup.defaultRoles | No | Used to specify default roles assigned to newly registered users (implies automatic activation). Should only be used in cases where you either trust your registered users (e.g. app is running on LAN) or you don't care what users are allowed to do (e.g. demo server). | | openboxes.system.defaultTimezone | No | Not currently supported. | | openboxes.fixtures.enabled | No | Only used on local machines when dataSource.url is overriden. When set to true this will trigger the creation of data fixtures used for testing. | Examples # openboxes.fixtures.enabled=false openboxes.signup.defaultRoles=ROLE_MANAGER,ROLE_ASSISTANT openboxes.system.defaultTimezone=America/Chicago Identifier Formats # You can configure all of the identifiers according to your specifications (N = Numeric, L = Letter, A = Alphanumeric). The default configuration looks like the following, but feel free to configure identifiers however you'd like. Once the format has been choosen, values for these identifiers are randomly generated when an item is created. There's also a Quartz process that runs in the background that generates a unique identifier for any object that does not currently have one. openboxes.identifier.order.format = NNNLLL openboxes.identifier.product.format = LLNN openboxes.identifier.requisition.format = NNNLLL openboxes.identifier.shipment.format = NNNLLL openboxes.identifier.transaction.format = AAA-AAA-AAA","title":"OpenBoxes"},{"location":"configuration/application/#application_properties","text":"","title":"Application properties"},{"location":"configuration/application/#general","text":"","title":"General"},{"location":"configuration/application/#settings","text":"| Setting | Required | Description | | ---- | ---- | ---- | ---- | | openboxes.signup.defaultRoles | No | Used to specify default roles assigned to newly registered users (implies automatic activation). Should only be used in cases where you either trust your registered users (e.g. app is running on LAN) or you don't care what users are allowed to do (e.g. demo server). | | openboxes.system.defaultTimezone | No | Not currently supported. | | openboxes.fixtures.enabled | No | Only used on local machines when dataSource.url is overriden. When set to true this will trigger the creation of data fixtures used for testing. |","title":"Settings"},{"location":"configuration/application/#examples","text":"openboxes.fixtures.enabled=false openboxes.signup.defaultRoles=ROLE_MANAGER,ROLE_ASSISTANT openboxes.system.defaultTimezone=America/Chicago","title":"Examples"},{"location":"configuration/application/#identifier_formats","text":"You can configure all of the identifiers according to your specifications (N = Numeric, L = Letter, A = Alphanumeric). The default configuration looks like the following, but feel free to configure identifiers however you'd like. Once the format has been choosen, values for these identifiers are randomly generated when an item is created. There's also a Quartz process that runs in the background that generates a unique identifier for any object that does not currently have one. openboxes.identifier.order.format = NNNLLL openboxes.identifier.product.format = LLNN openboxes.identifier.requisition.format = NNNLLL openboxes.identifier.shipment.format = NNNLLL openboxes.identifier.transaction.format = AAA-AAA-AAA","title":"Identifier Formats"},{"location":"configuration/configuration/","text":"Configuration # Configuration file location # As mentioned in the installation instructions, you can override application configuration properties by creating a file called $USER_HOME/.grails/openboxes-config.properties . If you are a developer, $USER_HOME should resolve to your home directory (e.g. /home/jmiranda on Ubuntu). If you are deploying the application to Tomcat, the file is usually located under the TOMCAT_HOME/.grails/openboxes-config.properties . If you are having trouble locating where the application is looking for the file you can determine the path by deploying the application to Tomcat and checking the log file. The first few lines of the Tomcat catalina.out file display the path(s) being used. You can safely ignore the \"Unable to load specified config location\" for the locations that you are not using. Notice below that there are 4 configuration locations and only 3 Unable to load specified config location lines. That means that there was a file found at one of the locations (namely, file:/usr/local/tomcat6/.grails/openboxes-config.properties . INFO: Deploying web application archive openboxes.war Using configuration locations [classpath:openboxes-config.groovy, classpath:openboxes-config.properties, file:/usr/local/tomcat6/.grails/openboxes-config.groovy, file:/usr/local/tomcat6/.grails/openboxes- config.properties] [staging] Unable to load specified config location classpath:openboxes-config.groovy : class path resource [openboxes-config.groovy] cannot be opened because it does not exist Unable to load specified config location classpath:openboxes-config.properties : class path resource [openboxes-config.properties] cannot be opened because it does not exist Unable to load specified config location file:/usr/local/tomcat6/.grails/openboxes-config.groovy : /usr/local/tomcat6/.grails/openboxes-config.groovy (No such file or directory)","title":"General"},{"location":"configuration/configuration/#configuration","text":"","title":"Configuration"},{"location":"configuration/configuration/#configuration_file_location","text":"As mentioned in the installation instructions, you can override application configuration properties by creating a file called $USER_HOME/.grails/openboxes-config.properties . If you are a developer, $USER_HOME should resolve to your home directory (e.g. /home/jmiranda on Ubuntu). If you are deploying the application to Tomcat, the file is usually located under the TOMCAT_HOME/.grails/openboxes-config.properties . If you are having trouble locating where the application is looking for the file you can determine the path by deploying the application to Tomcat and checking the log file. The first few lines of the Tomcat catalina.out file display the path(s) being used. You can safely ignore the \"Unable to load specified config location\" for the locations that you are not using. Notice below that there are 4 configuration locations and only 3 Unable to load specified config location lines. That means that there was a file found at one of the locations (namely, file:/usr/local/tomcat6/.grails/openboxes-config.properties . INFO: Deploying web application archive openboxes.war Using configuration locations [classpath:openboxes-config.groovy, classpath:openboxes-config.properties, file:/usr/local/tomcat6/.grails/openboxes-config.groovy, file:/usr/local/tomcat6/.grails/openboxes- config.properties] [staging] Unable to load specified config location classpath:openboxes-config.groovy : class path resource [openboxes-config.groovy] cannot be opened because it does not exist Unable to load specified config location classpath:openboxes-config.properties : class path resource [openboxes-config.properties] cannot be opened because it does not exist Unable to load specified config location file:/usr/local/tomcat6/.grails/openboxes-config.groovy : /usr/local/tomcat6/.grails/openboxes-config.groovy (No such file or directory)","title":"Configuration file location"},{"location":"configuration/database/","text":"Database # Database connection properties # Settings # | Setting | Required | Description | | ---- | ---- | ---- | ---- | | dataSource.url | Yes | JDBC connection string | | dataSource.username | Yes | JDBC username | | dataSource.password | Yes | JDBC password | Examples # dataSource.url=jdbc:mysql://localhost:3306/openboxes dataSource.username= username dataSource.password= password","title":"Database Connection"},{"location":"configuration/database/#database","text":"","title":"Database"},{"location":"configuration/database/#database_connection_properties","text":"","title":"Database connection properties"},{"location":"configuration/database/#settings","text":"| Setting | Required | Description | | ---- | ---- | ---- | ---- | | dataSource.url | Yes | JDBC connection string | | dataSource.username | Yes | JDBC username | | dataSource.password | Yes | JDBC password |","title":"Settings"},{"location":"configuration/database/#examples","text":"dataSource.url=jdbc:mysql://localhost:3306/openboxes dataSource.username= username dataSource.password= password","title":"Examples"},{"location":"configuration/email/","text":"Email # Using a transactional email service # Add the following properties if you want to use a service like Mailgun, Sendgrid, or Mandrillapp as your SMTP server. Configuration # Mandrill # grails.mail.enabled=true grails.mail.debug=true grails.mail.from= from-email grails.mail.host=smtp.mandrillapp.com grails.mail.port=587 grails.mail.username= username grails.mail.password= password Sendgrid # grails.mail.enabled=true grails.mail.debug=true grails.mail.from= from-email grails.mail.host=smtp.sendgrid.net grails.mail.port=587 grails.mail.username= username grails.mail.password= password Gmail # grails.mail.enabled=true grails.mail.debug=true grails.mail.from= from-email grails.mail.host=smtp.gmail.com grails.mail.port=465 grails.mail.username= your-username grails.mail.password= password-generated-from-google-accounts grails.mail.props=[ mail.smtp.auth : true , mail.smtp.socketFactory.port : 465 , mail.smtp.socketFactory.class : javax.net.ssl.SSLSocketFactory , mail.smtp.socketFactory.fallback : false ] NOTE: I have not been able to able to get the Gmail configuration to work, but I'm sure someone with more time and intelligence will have no trouble figuring it out. Using local SMTP (not recommended) # Install postfix # https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-postfix-as-a-send-only-smtp-server-on-ubuntu-14-04 Configuration # The default email configuration properties. grails.mail.enabled = true grails.mail.debug = true grails.mail.from = info@openboxes.com grails.mail.prefix = [OpenBoxes] grails.mail.host = localhost grails.mail.port = 25 # These are commented out on purpose. #grails.mail.username = username #grails.mail.password = password","title":"Email"},{"location":"configuration/email/#email","text":"","title":"Email"},{"location":"configuration/email/#using_a_transactional_email_service","text":"Add the following properties if you want to use a service like Mailgun, Sendgrid, or Mandrillapp as your SMTP server.","title":"Using a transactional email service"},{"location":"configuration/email/#configuration","text":"","title":"Configuration"},{"location":"configuration/email/#mandrill","text":"grails.mail.enabled=true grails.mail.debug=true grails.mail.from= from-email grails.mail.host=smtp.mandrillapp.com grails.mail.port=587 grails.mail.username= username grails.mail.password= password","title":"Mandrill"},{"location":"configuration/email/#sendgrid","text":"grails.mail.enabled=true grails.mail.debug=true grails.mail.from= from-email grails.mail.host=smtp.sendgrid.net grails.mail.port=587 grails.mail.username= username grails.mail.password= password","title":"Sendgrid"},{"location":"configuration/email/#gmail","text":"grails.mail.enabled=true grails.mail.debug=true grails.mail.from= from-email grails.mail.host=smtp.gmail.com grails.mail.port=465 grails.mail.username= your-username grails.mail.password= password-generated-from-google-accounts grails.mail.props=[ mail.smtp.auth : true , mail.smtp.socketFactory.port : 465 , mail.smtp.socketFactory.class : javax.net.ssl.SSLSocketFactory , mail.smtp.socketFactory.fallback : false ] NOTE: I have not been able to able to get the Gmail configuration to work, but I'm sure someone with more time and intelligence will have no trouble figuring it out.","title":"Gmail"},{"location":"configuration/email/#using_local_smtp_not_recommended","text":"","title":"Using local SMTP (not recommended)"},{"location":"configuration/email/#install_postfix","text":"https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-postfix-as-a-send-only-smtp-server-on-ubuntu-14-04","title":"Install postfix"},{"location":"configuration/email/#configuration_1","text":"The default email configuration properties. grails.mail.enabled = true grails.mail.debug = true grails.mail.from = info@openboxes.com grails.mail.prefix = [OpenBoxes] grails.mail.host = localhost grails.mail.port = 25 # These are commented out on purpose. #grails.mail.username = username #grails.mail.password = password","title":"Configuration"},{"location":"configuration/example/","text":"Example # openboxes-config.properties # # Database connection settings dataSource.url=jdbc:mysql://localhost:3306/openboxes dataSource.username=openboxes dataSource.password=openboxes # OpenBoxes administrator emails openboxes.admin.email=justin.miranda@gmail.com,jmiranda@pih.org # Only used on local machines when dataSource.url is overriden openboxes.fixtures.enabled=false # OpenBoxes Identifier Formats # N: Numeric, L: Letter, A: Alphanumeric # For example, NNNLLL might lead to the following random identifier being generated 123ABC. openboxes.identifier.order.format = NNNLLL openboxes.identifier.product.format = LLNN openboxes.identifier.requisition.format = NNNLLL openboxes.identifier.shipment.format = NNNLLL openboxes.identifier.transaction.format = AAA-AAA-AAA # OpenBoxes Identifier Characters openboxes.identifier.numeric = 0123456789 openboxes.identifier.alphabetic = ABCDEFGHJKMNPQRSTUVXYZ openboxes.identifier.alphanumeric = 0123456789ABCDEFGHJKMNPQRSTUVWXYZ # Report logo header (not supported yet) # openboxes.report.header.logo = file:///home/jmiranda/Desktop/images.jpg openboxes.report.header.logo = http://localhost:8080/openboxes/images/hands.jpg openboxes.report.header.title = OpenBoxes # OpenBoxes Error Email feature (bug report) # Use your own address if you want to handle bug reports yourself. Otherwise leave as-is and OpenBoxes # support these support requests. openboxes.mail.errors.enabled = true openboxes.mail.errors.recipients = support@openboxes.com # OpenBoxes Barcode Scanner detection # NOTE: This feature is an experimentation. If enabled you can scan barcode on any page and the app will # try to locate an object (product, shipment, etc) that is associated with that barcode. If an object is # found, the app just redirects to the details page for that database object. In the future, I'm hoping to # improve the barcode scanner to integrate with workflows (e.g. add item to purchase order). openboxes.scannerDetection.enabled = true # Used to specify default roles for newly registered users (implies automatic activation) #openboxes.signup.defaultRoles=ROLE_MANAGER,ROLE_ASSISTANT # General mail settings grails.mail.enabled=true grails.mail.host= smtp server grails.mail.port= smtp port grails.mail.username= username grails.mail.password= password grails.mail.from= from address # Example of general mail settings #grails.mail.default.from=username@gmail.com #grails.mail.host=smtp.gmail.com #grails.mail.port=465 #grails.mail.username=username@gmail.com #grails.mail.password=password #grails.mail.props = [ mail.smtp.auth : true , mail.smtp.socketFactory.port : 465 , mail.smtp.socketFactory.class : javax.net.ssl.SSLSocketFactory , mail.smtp.socketFactory.fallback : false ] # Error email properties mail.error.debug=true mail.error.server= smtp server mail.error.username= smtp username mail.error.password= smtp password mail.error.port= smtp port mail.error.to= to address # Example of error email properties #mail.error.server=localhost #mail.error.server=smtp.pih.org #mail.error.username=openboxes #mail.error.password=password #mail.error.to=justin.miranda@gmail.com #Possible values: default|dynamic|alternate mail.error.appender=dynamic # OpenBoxes Choose Location Required Activities # The supported activities required in order for a location a location to show up on Choose Location page. # Possible values: MANAGE_INVENTORY, PLACE_ORDER, PLACE_REQUEST, FULFILL_ORDER, FULFILL_REQUEST, SEND_STOCK, RECEIVE_STOCK, EXTERNAL openboxes.chooseLocation.requiredActivities = MANAGE_INVENTORY # Amazon web service (not supported yet) aws.s3.domain=s3.amazonaws.com aws.s3.accessKey=0123456789ABCDEFG aws.s3.secretKey=0123456789ABCDEFGHIJKLMNOPQRS aws.s3.bucketName=files # Google Product Search (no longer supported -- Google deprecated API) # URL: https://www.googleapis.com/shopping/search/v1/public/products?key=${google.productSearch.key} country=US q=${q} alt=scp crowdBy=brand:1 google.api.key= no longer supported # Hipaaspace.com NDC Lookup (not supported yet) hipaaspace.api.key= not supported yet # RXNorm (not supported yet) # URL: http://rxnav.nlm.nih.gov/REST/ rxnorm.api.key= not supported yet # Google analytics google.analytics.enabled = false google.analytics.webPropertyID = enter your google analytics property ID","title":"Example"},{"location":"configuration/example/#example","text":"","title":"Example"},{"location":"configuration/example/#openboxes-configproperties","text":"# Database connection settings dataSource.url=jdbc:mysql://localhost:3306/openboxes dataSource.username=openboxes dataSource.password=openboxes # OpenBoxes administrator emails openboxes.admin.email=justin.miranda@gmail.com,jmiranda@pih.org # Only used on local machines when dataSource.url is overriden openboxes.fixtures.enabled=false # OpenBoxes Identifier Formats # N: Numeric, L: Letter, A: Alphanumeric # For example, NNNLLL might lead to the following random identifier being generated 123ABC. openboxes.identifier.order.format = NNNLLL openboxes.identifier.product.format = LLNN openboxes.identifier.requisition.format = NNNLLL openboxes.identifier.shipment.format = NNNLLL openboxes.identifier.transaction.format = AAA-AAA-AAA # OpenBoxes Identifier Characters openboxes.identifier.numeric = 0123456789 openboxes.identifier.alphabetic = ABCDEFGHJKMNPQRSTUVXYZ openboxes.identifier.alphanumeric = 0123456789ABCDEFGHJKMNPQRSTUVWXYZ # Report logo header (not supported yet) # openboxes.report.header.logo = file:///home/jmiranda/Desktop/images.jpg openboxes.report.header.logo = http://localhost:8080/openboxes/images/hands.jpg openboxes.report.header.title = OpenBoxes # OpenBoxes Error Email feature (bug report) # Use your own address if you want to handle bug reports yourself. Otherwise leave as-is and OpenBoxes # support these support requests. openboxes.mail.errors.enabled = true openboxes.mail.errors.recipients = support@openboxes.com # OpenBoxes Barcode Scanner detection # NOTE: This feature is an experimentation. If enabled you can scan barcode on any page and the app will # try to locate an object (product, shipment, etc) that is associated with that barcode. If an object is # found, the app just redirects to the details page for that database object. In the future, I'm hoping to # improve the barcode scanner to integrate with workflows (e.g. add item to purchase order). openboxes.scannerDetection.enabled = true # Used to specify default roles for newly registered users (implies automatic activation) #openboxes.signup.defaultRoles=ROLE_MANAGER,ROLE_ASSISTANT # General mail settings grails.mail.enabled=true grails.mail.host= smtp server grails.mail.port= smtp port grails.mail.username= username grails.mail.password= password grails.mail.from= from address # Example of general mail settings #grails.mail.default.from=username@gmail.com #grails.mail.host=smtp.gmail.com #grails.mail.port=465 #grails.mail.username=username@gmail.com #grails.mail.password=password #grails.mail.props = [ mail.smtp.auth : true , mail.smtp.socketFactory.port : 465 , mail.smtp.socketFactory.class : javax.net.ssl.SSLSocketFactory , mail.smtp.socketFactory.fallback : false ] # Error email properties mail.error.debug=true mail.error.server= smtp server mail.error.username= smtp username mail.error.password= smtp password mail.error.port= smtp port mail.error.to= to address # Example of error email properties #mail.error.server=localhost #mail.error.server=smtp.pih.org #mail.error.username=openboxes #mail.error.password=password #mail.error.to=justin.miranda@gmail.com #Possible values: default|dynamic|alternate mail.error.appender=dynamic # OpenBoxes Choose Location Required Activities # The supported activities required in order for a location a location to show up on Choose Location page. # Possible values: MANAGE_INVENTORY, PLACE_ORDER, PLACE_REQUEST, FULFILL_ORDER, FULFILL_REQUEST, SEND_STOCK, RECEIVE_STOCK, EXTERNAL openboxes.chooseLocation.requiredActivities = MANAGE_INVENTORY # Amazon web service (not supported yet) aws.s3.domain=s3.amazonaws.com aws.s3.accessKey=0123456789ABCDEFG aws.s3.secretKey=0123456789ABCDEFGHIJKLMNOPQRS aws.s3.bucketName=files # Google Product Search (no longer supported -- Google deprecated API) # URL: https://www.googleapis.com/shopping/search/v1/public/products?key=${google.productSearch.key} country=US q=${q} alt=scp crowdBy=brand:1 google.api.key= no longer supported # Hipaaspace.com NDC Lookup (not supported yet) hipaaspace.api.key= not supported yet # RXNorm (not supported yet) # URL: http://rxnav.nlm.nih.gov/REST/ rxnorm.api.key= not supported yet # Google analytics google.analytics.enabled = false google.analytics.webPropertyID = enter your google analytics property ID","title":"openboxes-config.properties"},{"location":"configuration/https/","text":"Configure HTTPS # The easiest way to do this is to use Let's Encrypt (Certbot). See docs here https://www.digitalocean.com/community/tutorials/how-to-secure-apache-with-let-s-encrypt-on-ubuntu-18-04 Register your domain name or add an A record for a new # Instructions are specific to your domain name registrar. The important part is that you need to be Let's say you want to use openboxes.example.com. You need to create an A record for this domain so that it resolves to your server. It's probably best to have Apache running so you can test that a web page is returned. If your domain name has been registered properly, execute the $ nslookup openboxes.example.com Server: 127.0.0.53 Address: 127.0.0.53#53 Non-authoritative answer: Name: openboxes.example.com Address: ###.###.###.### If the domain has not been registered or if the domain name has not been propagated yet, then you'll see a message like this: $ nslookup openboxes.example.com Server: 127.0.0.53 Address: 127.0.0.53#53 ** server can't find openboxes.example.com: NXDOMAIN If you're impatient, you can run the nslookup query against the nameserver where the domain is registered. For example, if you've registered with GoDaddy, it would be something like this: nslookup openboxes.example.com NS01.DOMAINCONTROL.COM # Server: NS01.DOMAINCONTROL.COM Address: 2603:5:2140::1#53 Name: openboxes.example.com Address: ###.###.###.### Install Certbot for Apache # sudo add-apt-repository ppa:certbot/certbot sudo apt-get update sudo apt-get install python-certbot-apache Create new HTTPS certificate # sudo certbot --apache -d openboxes.example.com Answer Questions # Saving debug log to /var/log/letsencrypt/letsencrypt.log Plugins selected: Authenticator apache, Installer apache Enter email address (used for urgent renewal and security notices) (Enter 'c' to cancel): email@example.com - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - Please read the Terms of Service at https://letsencrypt.org/documents/LE-SA-v1.2-November-15-2017.pdf. You must agree in order to register with the ACME server at https://acme-v02.api.letsencrypt.org/directory - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - (A)gree/(C)ancel: A - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - Would you be willing to share your email address with the Electronic Frontier Foundation, a founding partner of the Let's Encrypt project and the non-profit organization that develops Certbot? We'd like to send you email about our work encrypting the web, EFF news, campaigns, and ways to support digital freedom. - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - (Y)es/(N)o: Y Obtaining a new certificate Performing the following challenges: http-01 challenge for openboxes.example.com Enabled Apache rewrite module Waiting for verification... Cleaning up challenges Created an SSL vhost at /etc/apache2/sites-available/000-default-le-ssl.conf Enabled Apache socache_shmcb module Enabled Apache ssl module Deploying Certificate to VirtualHost /etc/apache2/sites-available/000-default-le-ssl.conf Enabling available site: /etc/apache2/sites-available/000-default-le-ssl.conf Please choose whether or not to redirect HTTP traffic to HTTPS, removing HTTP access. - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 1: No redirect - Make no further changes to the webserver configuration. 2: Redirect - Make all requests redirect to secure HTTPS access. Choose this for new sites, or if you're confident your site works on HTTPS. You can undo this change by editing your web server's configuration. - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - Select the appropriate number [1-2] then [enter] (press 'c' to cancel): 2 Enabled Apache rewrite module Redirecting vhost in /etc/apache2/sites-enabled/000-default.conf to ssl vhost in /etc/apache2/sites-available/000-default-le-ssl.conf - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - Congratulations! You have successfully enabled https://openboxes.example.com You should test your configuration at: https://www.ssllabs.com/ssltest/analyze.html?d=openboxes.example.com - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - IMPORTANT NOTES: - Congratulations! Your certificate and chain have been saved at: /etc/letsencrypt/live/openboxes.example.com/fullchain.pem Your key file has been saved at: /etc/letsencrypt/live/openboxes.example.com/privkey.pem Your cert will expire on 2019-08-05. To obtain a new or tweaked version of this certificate in the future, simply run certbot again with the certonly option. To non-interactively renew *all* of your certificates, run certbot renew - Your account credentials have been saved in your Certbot configuration directory at /etc/letsencrypt. You should make a secure backup of this folder now. This configuration directory will also contain certificates and private keys obtained by Certbot so making regular backups of this folder is ideal. - If you like Certbot, please consider supporting our work by: Donating to ISRG / Let's Encrypt: https://letsencrypt.org/donate Donating to EFF: https://eff.org/donate-le Configure automatic update of certificate # sudo certbot renew --dry-run","title":"Apache HTTPS"},{"location":"configuration/https/#configure_https","text":"The easiest way to do this is to use Let's Encrypt (Certbot). See docs here https://www.digitalocean.com/community/tutorials/how-to-secure-apache-with-let-s-encrypt-on-ubuntu-18-04","title":"Configure HTTPS"},{"location":"configuration/https/#register_your_domain_name_or_add_an_a_record_for_a_new","text":"Instructions are specific to your domain name registrar. The important part is that you need to be Let's say you want to use openboxes.example.com. You need to create an A record for this domain so that it resolves to your server. It's probably best to have Apache running so you can test that a web page is returned. If your domain name has been registered properly, execute the $ nslookup openboxes.example.com Server: 127.0.0.53 Address: 127.0.0.53#53 Non-authoritative answer: Name: openboxes.example.com Address: ###.###.###.### If the domain has not been registered or if the domain name has not been propagated yet, then you'll see a message like this: $ nslookup openboxes.example.com Server: 127.0.0.53 Address: 127.0.0.53#53 ** server can't find openboxes.example.com: NXDOMAIN If you're impatient, you can run the nslookup query against the nameserver where the domain is registered. For example, if you've registered with GoDaddy, it would be something like this:","title":"Register your domain name or add an A record for a new"},{"location":"configuration/https/#nslookup_openboxesexamplecom_ns01domaincontrolcom","text":"Server: NS01.DOMAINCONTROL.COM Address: 2603:5:2140::1#53 Name: openboxes.example.com Address: ###.###.###.###","title":"nslookup openboxes.example.com NS01.DOMAINCONTROL.COM"},{"location":"configuration/https/#install_certbot_for_apache","text":"sudo add-apt-repository ppa:certbot/certbot sudo apt-get update sudo apt-get install python-certbot-apache","title":"Install Certbot for Apache"},{"location":"configuration/https/#create_new_https_certificate","text":"sudo certbot --apache -d openboxes.example.com","title":"Create new HTTPS certificate"},{"location":"configuration/https/#answer_questions","text":"Saving debug log to /var/log/letsencrypt/letsencrypt.log Plugins selected: Authenticator apache, Installer apache Enter email address (used for urgent renewal and security notices) (Enter 'c' to cancel): email@example.com - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - Please read the Terms of Service at https://letsencrypt.org/documents/LE-SA-v1.2-November-15-2017.pdf. You must agree in order to register with the ACME server at https://acme-v02.api.letsencrypt.org/directory - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - (A)gree/(C)ancel: A - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - Would you be willing to share your email address with the Electronic Frontier Foundation, a founding partner of the Let's Encrypt project and the non-profit organization that develops Certbot? We'd like to send you email about our work encrypting the web, EFF news, campaigns, and ways to support digital freedom. - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - (Y)es/(N)o: Y Obtaining a new certificate Performing the following challenges: http-01 challenge for openboxes.example.com Enabled Apache rewrite module Waiting for verification... Cleaning up challenges Created an SSL vhost at /etc/apache2/sites-available/000-default-le-ssl.conf Enabled Apache socache_shmcb module Enabled Apache ssl module Deploying Certificate to VirtualHost /etc/apache2/sites-available/000-default-le-ssl.conf Enabling available site: /etc/apache2/sites-available/000-default-le-ssl.conf Please choose whether or not to redirect HTTP traffic to HTTPS, removing HTTP access. - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 1: No redirect - Make no further changes to the webserver configuration. 2: Redirect - Make all requests redirect to secure HTTPS access. Choose this for new sites, or if you're confident your site works on HTTPS. You can undo this change by editing your web server's configuration. - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - Select the appropriate number [1-2] then [enter] (press 'c' to cancel): 2 Enabled Apache rewrite module Redirecting vhost in /etc/apache2/sites-enabled/000-default.conf to ssl vhost in /etc/apache2/sites-available/000-default-le-ssl.conf - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - Congratulations! You have successfully enabled https://openboxes.example.com You should test your configuration at: https://www.ssllabs.com/ssltest/analyze.html?d=openboxes.example.com - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - IMPORTANT NOTES: - Congratulations! Your certificate and chain have been saved at: /etc/letsencrypt/live/openboxes.example.com/fullchain.pem Your key file has been saved at: /etc/letsencrypt/live/openboxes.example.com/privkey.pem Your cert will expire on 2019-08-05. To obtain a new or tweaked version of this certificate in the future, simply run certbot again with the certonly option. To non-interactively renew *all* of your certificates, run certbot renew - Your account credentials have been saved in your Certbot configuration directory at /etc/letsencrypt. You should make a secure backup of this folder now. This configuration directory will also contain certificates and private keys obtained by Certbot so making regular backups of this folder is ideal. - If you like Certbot, please consider supporting our work by: Donating to ISRG / Let's Encrypt: https://letsencrypt.org/donate Donating to EFF: https://eff.org/donate-le","title":"Answer Questions"},{"location":"configuration/https/#configure_automatic_update_of_certificate","text":"sudo certbot renew --dry-run","title":"Configure automatic update of certificate"},{"location":"configuration/sentry/","text":"","title":"Sentry"},{"location":"developer-guide/","text":"Introduction #","title":"Introduction"},{"location":"developer-guide/#introduction","text":"","title":"Introduction"},{"location":"developer-guide/contributing/","text":"Contributing # There are many ways to contribute to OpenBoxes, and not just through making changes to the source code. Here are a few examples of areas we need a considerable amount of help. Develop a new feature Patch a bug / hotfix Improve translations Improve documentation Write unit, integration, functional tests Resources # GitHub Guide on Forking Procedure # Find or create an issue for the feature or bug in GitHub Issues. Fork the openboxes/openboxes GitHub repository. Create a branch for your changes (create a hotfix for bugs if working off master or a feature branch for features if working off develop ). NOTE: The use of the hotfix or develop prefix will help us identify which branch we need to merge your changes into. git checkout -b hotfix/123-short-summary-of-issue git checkout -b feature/123-short-summary-of-issue Implement your feature or hotfix in your new branch. Write a test for your changes (if you have trouble with this step please comment in your ticket that you'd like some help). NOTE: Tests are required for features and bug fixes, but not for documentation and translation changes. Run tests. grails test-app unit: grails test-app integration: Commit your changes git commit -m \"Implemented feature #123\" Push to your fork. git push Submit a pull request.","title":"Contributing"},{"location":"developer-guide/contributing/#contributing","text":"There are many ways to contribute to OpenBoxes, and not just through making changes to the source code. Here are a few examples of areas we need a considerable amount of help. Develop a new feature Patch a bug / hotfix Improve translations Improve documentation Write unit, integration, functional tests","title":"Contributing"},{"location":"developer-guide/contributing/#resources","text":"GitHub Guide on Forking","title":"Resources"},{"location":"developer-guide/contributing/#procedure","text":"Find or create an issue for the feature or bug in GitHub Issues. Fork the openboxes/openboxes GitHub repository. Create a branch for your changes (create a hotfix for bugs if working off master or a feature branch for features if working off develop ). NOTE: The use of the hotfix or develop prefix will help us identify which branch we need to merge your changes into. git checkout -b hotfix/123-short-summary-of-issue git checkout -b feature/123-short-summary-of-issue Implement your feature or hotfix in your new branch. Write a test for your changes (if you have trouble with this step please comment in your ticket that you'd like some help). NOTE: Tests are required for features and bug fixes, but not for documentation and translation changes. Run tests. grails test-app unit: grails test-app integration: Commit your changes git commit -m \"Implemented feature #123\" Push to your fork. git push Submit a pull request.","title":"Procedure"},{"location":"developer-guide/getting-started/","text":"Getting Started # Dependencies # Required # Java 7 MySQL 5.5+ [SDK Man] (http://sdkman.io/install.html) Grails 1.3.9 NPM NOTE: We are in the process of upgrading to Grails 2.5.5 (see this feature branch). Once that is complete you will be able to use Java 8. Optional, but recommended # [IntelliJ IDEA] (https://www.jetbrains.com/idea/download/) Instructions # These instructions are for developers only. If you are a system administrator looking to install OpenBoxes on your own server, please check out our Installation page. 1. Install Dependencies # Install dependencies above sudo apt-get install openjdk7 sudo apt-get install mysql-server 2. Install Grails # Check that you have SDK Man installed properly (otherwise follow instructions on the skdman install page). $ sdk version SDKMAN 3.1.0 To install Grails 1.3.9 $ sdk install grails 1.3.9 3. Clone repository # If you are a core contributor: git clone git@github.com:openboxes/openboxes.git If you are a not core contributor, fork the openboxes GitHub repository , then replace git url with the one of your forked repository git clone git@github.com: username /openboxes.git 4. Create database # Create openboxes database mysql -u root -p -e 'create database openboxes default charset utf8;' Create openboxes user mysql -u root -p -e 'grant all on openboxes.* to openboxes @ localhost identified by openboxes ;' 5. Create configuration file(s) # Create or edit a file called $HOME/.grails/openboxes-config.properties . # Database connection settings # You can use dataSource.url when you are using a non-dev/non-test database (test-app may not run properly). # If you want to run $ grails test-app you should comment out the dataSource.url below and create a new # openboxes_test database. Eventually, we will move to an in-memory H2 database for testing, but we're # currently stuck with MySQL because I'm using some MySQL-specific statements in the Liquibase changesets. My bad. dataSource.url=jdbc:mysql://localhost:3306/openboxes?autoReconnect=true zeroDateTimeBehavior=convertToNull sessionVariables=storage_engine=InnoDB dataSource.username=openboxes dataSource.password=openboxes # OpenBoxes mail settings - disabled by default grails.mail.enabled=false # OpenBoxes Inventory Browser Quick categories #openboxes.inventoryBrowser.quickCategories=ARVs,MEDICAL SUPPLIES,FOOD,EQUIPMENT,MEDICINE # OpenBoxes Choose Location Required Activities # The supported activities required in order for a location a location to show up on Choose Location page. # Possible values: MANAGE_INVENTORY, PLACE_ORDER, PLACE_REQUEST, FULFILL_ORDER, FULFILL_REQUEST, SEND_STOCK, RECEIVE_STOCK, EXTERNAL #openboxes.chooseLocation.requiredActivities = MANAGE_INVENTORY # If you wish to not set up any test data, you can indicate this per the below # (eg. if you are running from a copy of a production db) # openboxes.fixtures.enabled=false # If you want to track users via Google analytics #google.analytics.enabled = false #google.analytics.webPropertyID = Google Analytics Key NOTE: If you are running in development mode with a copy of an existing database, you may want to instruct the application to bypass the test data fixtures automatically. You can achieve this by commenting out the openboxes.fixtures.enabled property. Unfortunately, the .properties files DO NOT deal well with boolean values so commenting out is the only way to set this property. If you want a more elegant approach, you can add all boolean properties to openboxes-config.groovy . #openboxes.fixtures.enabled=true 6. Install NPM dependencies # npm install 7. Build React frontend # You can build React frontend with this command, but it will be automatically build when starting the application. npm run bundle 8. React frontend Hot-Reload # When using this command React fronted will be rebuild automatically after any change, you just need to refresh the browser to see the effect. npm run watch 9. Grails Upgrade or Grails Compile # Either of the following actions (upgrade, compile, run-app) should generate the all important Spring configuration ( /WEB-INF/applicationContext.xml ) and start the dependency resolution process. grails upgrade OR grails compile The grails compile step is not necessary since grails run-app will invoke the compilation step, but it doesn't hurt anything. If you see any errors, run the command again. IMPORTANT That last line is important. Because of some quirkiness with the way older versions of Grails resolve dependencies and generates config files, you may need to run either of these commands multiple times in order to resolve all dependencies and generate the config files. Once the dependency resolution phase has completed, all dependencies will be stored in a local ivy cache (usually under $USER_HOME/.grails/ivy-cache ). You do not have to worry about this, just know that the dependencies are now on your machine and Grails will attempt to find them there before it tries to resolve them in a remote repository. 10. Start application in development mode # The application can be run in development mode. This starts the application running in an instance of Tomcat within the Grails console. You may need to run 'grails run-app' several times in order to download all dependencies. grails run-app 11. Open application in Google Chrome # http://localhost:8080/openboxes 12. Log into OpenBoxes # You can use the default accounts (manager:password OR admin:password). Once you are logged in as an admin, you can create own account. Or you can use the signup form to create a new account. 13. React tests # To run new frontend (React) tests type: npm test","title":"Getting Started"},{"location":"developer-guide/getting-started/#getting_started","text":"","title":"Getting Started"},{"location":"developer-guide/getting-started/#dependencies","text":"","title":"Dependencies"},{"location":"developer-guide/getting-started/#required","text":"Java 7 MySQL 5.5+ [SDK Man] (http://sdkman.io/install.html) Grails 1.3.9 NPM NOTE: We are in the process of upgrading to Grails 2.5.5 (see this feature branch). Once that is complete you will be able to use Java 8.","title":"Required"},{"location":"developer-guide/getting-started/#optional_but_recommended","text":"[IntelliJ IDEA] (https://www.jetbrains.com/idea/download/)","title":"Optional, but recommended"},{"location":"developer-guide/getting-started/#instructions","text":"These instructions are for developers only. If you are a system administrator looking to install OpenBoxes on your own server, please check out our Installation page.","title":"Instructions"},{"location":"developer-guide/getting-started/#1_install_dependencies","text":"Install dependencies above sudo apt-get install openjdk7 sudo apt-get install mysql-server","title":"1. Install Dependencies"},{"location":"developer-guide/getting-started/#2_install_grails","text":"Check that you have SDK Man installed properly (otherwise follow instructions on the skdman install page). $ sdk version SDKMAN 3.1.0 To install Grails 1.3.9 $ sdk install grails 1.3.9","title":"2. Install Grails"},{"location":"developer-guide/getting-started/#3_clone_repository","text":"If you are a core contributor: git clone git@github.com:openboxes/openboxes.git If you are a not core contributor, fork the openboxes GitHub repository , then replace git url with the one of your forked repository git clone git@github.com: username /openboxes.git","title":"3. Clone repository"},{"location":"developer-guide/getting-started/#4_create_database","text":"Create openboxes database mysql -u root -p -e 'create database openboxes default charset utf8;' Create openboxes user mysql -u root -p -e 'grant all on openboxes.* to openboxes @ localhost identified by openboxes ;'","title":"4. Create database"},{"location":"developer-guide/getting-started/#5_create_configuration_files","text":"Create or edit a file called $HOME/.grails/openboxes-config.properties . # Database connection settings # You can use dataSource.url when you are using a non-dev/non-test database (test-app may not run properly). # If you want to run $ grails test-app you should comment out the dataSource.url below and create a new # openboxes_test database. Eventually, we will move to an in-memory H2 database for testing, but we're # currently stuck with MySQL because I'm using some MySQL-specific statements in the Liquibase changesets. My bad. dataSource.url=jdbc:mysql://localhost:3306/openboxes?autoReconnect=true zeroDateTimeBehavior=convertToNull sessionVariables=storage_engine=InnoDB dataSource.username=openboxes dataSource.password=openboxes # OpenBoxes mail settings - disabled by default grails.mail.enabled=false # OpenBoxes Inventory Browser Quick categories #openboxes.inventoryBrowser.quickCategories=ARVs,MEDICAL SUPPLIES,FOOD,EQUIPMENT,MEDICINE # OpenBoxes Choose Location Required Activities # The supported activities required in order for a location a location to show up on Choose Location page. # Possible values: MANAGE_INVENTORY, PLACE_ORDER, PLACE_REQUEST, FULFILL_ORDER, FULFILL_REQUEST, SEND_STOCK, RECEIVE_STOCK, EXTERNAL #openboxes.chooseLocation.requiredActivities = MANAGE_INVENTORY # If you wish to not set up any test data, you can indicate this per the below # (eg. if you are running from a copy of a production db) # openboxes.fixtures.enabled=false # If you want to track users via Google analytics #google.analytics.enabled = false #google.analytics.webPropertyID = Google Analytics Key NOTE: If you are running in development mode with a copy of an existing database, you may want to instruct the application to bypass the test data fixtures automatically. You can achieve this by commenting out the openboxes.fixtures.enabled property. Unfortunately, the .properties files DO NOT deal well with boolean values so commenting out is the only way to set this property. If you want a more elegant approach, you can add all boolean properties to openboxes-config.groovy . #openboxes.fixtures.enabled=true","title":"5. Create configuration file(s)"},{"location":"developer-guide/getting-started/#6_install_npm_dependencies","text":"npm install","title":"6. Install NPM dependencies"},{"location":"developer-guide/getting-started/#7_build_react_frontend","text":"You can build React frontend with this command, but it will be automatically build when starting the application. npm run bundle","title":"7. Build React frontend"},{"location":"developer-guide/getting-started/#8_react_frontend_hot-reload","text":"When using this command React fronted will be rebuild automatically after any change, you just need to refresh the browser to see the effect. npm run watch","title":"8. React frontend Hot-Reload"},{"location":"developer-guide/getting-started/#9_grails_upgrade_or_grails_compile","text":"Either of the following actions (upgrade, compile, run-app) should generate the all important Spring configuration ( /WEB-INF/applicationContext.xml ) and start the dependency resolution process. grails upgrade OR grails compile The grails compile step is not necessary since grails run-app will invoke the compilation step, but it doesn't hurt anything. If you see any errors, run the command again. IMPORTANT That last line is important. Because of some quirkiness with the way older versions of Grails resolve dependencies and generates config files, you may need to run either of these commands multiple times in order to resolve all dependencies and generate the config files. Once the dependency resolution phase has completed, all dependencies will be stored in a local ivy cache (usually under $USER_HOME/.grails/ivy-cache ). You do not have to worry about this, just know that the dependencies are now on your machine and Grails will attempt to find them there before it tries to resolve them in a remote repository.","title":"9. Grails Upgrade or Grails Compile"},{"location":"developer-guide/getting-started/#10_start_application_in_development_mode","text":"The application can be run in development mode. This starts the application running in an instance of Tomcat within the Grails console. You may need to run 'grails run-app' several times in order to download all dependencies. grails run-app","title":"10. Start application in development mode"},{"location":"developer-guide/getting-started/#11_open_application_in_google_chrome","text":"http://localhost:8080/openboxes","title":"11. Open application in Google Chrome"},{"location":"developer-guide/getting-started/#12_log_into_openboxes","text":"You can use the default accounts (manager:password OR admin:password). Once you are logged in as an admin, you can create own account. Or you can use the signup form to create a new account.","title":"12. Log into OpenBoxes"},{"location":"developer-guide/getting-started/#13_react_tests","text":"To run new frontend (React) tests type: npm test","title":"13. React tests"},{"location":"developer-guide/syncing-a-fork/","text":"Syncing your fork # Resources # Configuring a Remote for a Fork Syncing a Fork List your remote repositories # $ git remote -v origin https://github.com/YOUR_USERNAME/openboxes.git (fetch) origin https://github.com/YOUR_USERNAME/openboxes.git (push) Add the upstream remote # $ git remote add upstream https://github.com/openboxes/openboxes.git Verify upstream remote # $ git remote -v origin https://github.com/YOUR_USERNAME/YOUR_FORK.git (fetch) origin https://github.com/YOUR_USERNAME/YOUR_FORK.git (push) upstream https://github.com/ORIGINAL_OWNER/ORIGINAL_REPOSITORY.git (fetch) upstream https://github.com/ORIGINAL_OWNER/ORIGINAL_REPOSITORY.git (push) Pull changes into your fork as upstream/master # $ git fetch upstream remote: Counting objects: 4165, done. remote: Compressing objects: 100% (22/22), done. remote: Total 4165 (delta 1920), reused 1928 (delta 1918), pack-reused 2225 Receiving objects: 100% (4165/4165), 1.83 MiB | 329.00 KiB/s, done. Resolving deltas: 100% (2728/2728), completed with 583 local objects. From https://github.com/openboxes/openboxes * [new branch] develop - upstream/develop * [new branch] feature/94-upgrade-to-grails-2.5.x - upstream/feature/94-upgrade-to-grails-2.5.x * [new branch] hotfix/100-improve-performance-qoh-calculation - upstream/hotfix/100-improve-performance-qoh-calculation * [new branch] hotfix/161-support-additional-languages - upstream/hotfix/161-support-additional-languages * [new branch] hotfix/163-add-health-endpoint-for-monitoring - upstream/hotfix/163-add-health-endpoint-for-monitoring * [new branch] hotfix/165-replace-inventory-with-adjustment - upstream/hotfix/165-replace-inventory-with-adjustment * [new branch] hotfix/22-override-grails-config-locations - upstream/hotfix/22-override-grails-config-locations * [new branch] master - upstream/master * [new branch] user-guide-docs - upstream/user-guide-docs Checkout the branch you want to sync # This will likely either be develop or master . $ git checkout master Merge upstream/master into you local master # $ git merge upstream/master Push changes up to your repository # $ git push Profit #","title":"Syncing a Fork"},{"location":"developer-guide/syncing-a-fork/#syncing_your_fork","text":"","title":"Syncing your fork"},{"location":"developer-guide/syncing-a-fork/#resources","text":"Configuring a Remote for a Fork Syncing a Fork","title":"Resources"},{"location":"developer-guide/syncing-a-fork/#list_your_remote_repositories","text":"$ git remote -v origin https://github.com/YOUR_USERNAME/openboxes.git (fetch) origin https://github.com/YOUR_USERNAME/openboxes.git (push)","title":"List your remote repositories"},{"location":"developer-guide/syncing-a-fork/#add_the_upstream_remote","text":"$ git remote add upstream https://github.com/openboxes/openboxes.git","title":"Add the upstream remote"},{"location":"developer-guide/syncing-a-fork/#verify_upstream_remote","text":"$ git remote -v origin https://github.com/YOUR_USERNAME/YOUR_FORK.git (fetch) origin https://github.com/YOUR_USERNAME/YOUR_FORK.git (push) upstream https://github.com/ORIGINAL_OWNER/ORIGINAL_REPOSITORY.git (fetch) upstream https://github.com/ORIGINAL_OWNER/ORIGINAL_REPOSITORY.git (push)","title":"Verify upstream remote"},{"location":"developer-guide/syncing-a-fork/#pull_changes_into_your_fork_as_upstreammaster","text":"$ git fetch upstream remote: Counting objects: 4165, done. remote: Compressing objects: 100% (22/22), done. remote: Total 4165 (delta 1920), reused 1928 (delta 1918), pack-reused 2225 Receiving objects: 100% (4165/4165), 1.83 MiB | 329.00 KiB/s, done. Resolving deltas: 100% (2728/2728), completed with 583 local objects. From https://github.com/openboxes/openboxes * [new branch] develop - upstream/develop * [new branch] feature/94-upgrade-to-grails-2.5.x - upstream/feature/94-upgrade-to-grails-2.5.x * [new branch] hotfix/100-improve-performance-qoh-calculation - upstream/hotfix/100-improve-performance-qoh-calculation * [new branch] hotfix/161-support-additional-languages - upstream/hotfix/161-support-additional-languages * [new branch] hotfix/163-add-health-endpoint-for-monitoring - upstream/hotfix/163-add-health-endpoint-for-monitoring * [new branch] hotfix/165-replace-inventory-with-adjustment - upstream/hotfix/165-replace-inventory-with-adjustment * [new branch] hotfix/22-override-grails-config-locations - upstream/hotfix/22-override-grails-config-locations * [new branch] master - upstream/master * [new branch] user-guide-docs - upstream/user-guide-docs","title":"Pull changes into your fork as upstream/master"},{"location":"developer-guide/syncing-a-fork/#checkout_the_branch_you_want_to_sync","text":"This will likely either be develop or master . $ git checkout master","title":"Checkout the branch you want to sync"},{"location":"developer-guide/syncing-a-fork/#merge_upstreammaster_into_you_local_master","text":"$ git merge upstream/master","title":"Merge upstream/master into you local master"},{"location":"developer-guide/syncing-a-fork/#push_changes_up_to_your_repository","text":"$ git push","title":"Push changes up to your repository"},{"location":"developer-guide/syncing-a-fork/#profit","text":"","title":"Profit"},{"location":"developer-guide/tagging/","text":"Tagging a release # Find the current build number in the footer of the page for the desired version of the application: # Build Number: v0.5.0-329-gc1b3544 In this case, the tag v0.5.0 is out-of-date, so we want to update this to v0.5.1. We first need to find the commit related to this build number (e.g. c1b3544 ). You can view the commit log to view the history or you might need to browse through old commits on github to double check that it's correct. $ git log --pretty=oneline | grep c1b3544 Create tag release # Once you've determined that this is the correct commit and you're ready to create a new tag, run the following command: $ git tag -a v0.5.1 -m 'Release 0.5.1' c1b3544 Push tags to git remote repo # Then you can push this (and all other tags) to your repository to share: $ git push --tags Additional reading # See the following article for more informaton http://git-scm.com/book/en/Git-Basics-Tagging","title":"Tagging a Release"},{"location":"developer-guide/tagging/#tagging_a_release","text":"","title":"Tagging a release"},{"location":"developer-guide/tagging/#find_the_current_build_number_in_the_footer_of_the_page_for_the_desired_version_of_the_application","text":"Build Number: v0.5.0-329-gc1b3544 In this case, the tag v0.5.0 is out-of-date, so we want to update this to v0.5.1. We first need to find the commit related to this build number (e.g. c1b3544 ). You can view the commit log to view the history or you might need to browse through old commits on github to double check that it's correct. $ git log --pretty=oneline | grep c1b3544","title":"Find the current build number in the footer of the page for the desired version of the application:"},{"location":"developer-guide/tagging/#create_tag_release","text":"Once you've determined that this is the correct commit and you're ready to create a new tag, run the following command: $ git tag -a v0.5.1 -m 'Release 0.5.1' c1b3544","title":"Create tag release"},{"location":"developer-guide/tagging/#push_tags_to_git_remote_repo","text":"Then you can push this (and all other tags) to your repository to share: $ git push --tags","title":"Push tags to git remote repo"},{"location":"developer-guide/tagging/#additional_reading","text":"See the following article for more informaton http://git-scm.com/book/en/Git-Basics-Tagging","title":"Additional reading"},{"location":"developer-guide/troubleshooting/","text":"Troubleshooting # Could not open ServletContext resource [/WEB-INF/applicationContext.xml] # Problem # Caused by: java.io.FileNotFoundException: Could not open ServletContext resource [/WEB-INF/applicationContext.xml] Solution # Execute the grails upgrade command in order to generate the files nece $ grails upgrade See the following stackoverflow article: http://stackoverflow.com/questions/24243027/grails-spring-security-sample-application-not-working","title":"Troubleshooting"},{"location":"developer-guide/troubleshooting/#troubleshooting","text":"","title":"Troubleshooting"},{"location":"developer-guide/troubleshooting/#could_not_open_servletcontext_resource_91web-infapplicationcontextxml93","text":"","title":"Could not open ServletContext resource [/WEB-INF/applicationContext.xml]"},{"location":"developer-guide/troubleshooting/#problem","text":"Caused by: java.io.FileNotFoundException: Could not open ServletContext resource [/WEB-INF/applicationContext.xml]","title":"Problem"},{"location":"developer-guide/troubleshooting/#solution","text":"Execute the grails upgrade command in order to generate the files nece $ grails upgrade See the following stackoverflow article: http://stackoverflow.com/questions/24243027/grails-spring-security-sample-application-not-working","title":"Solution"},{"location":"installation/","text":"Installation # Supported Platforms # Ubuntu 14.04+ Mac 10.6+ Windows 10 Requirements # System Requirements # Internet connection (recommended) 2GB RAM (minimum), 4GB RAM (recommended) 25GB disk storage (minimum) Software Requirements # Java 7 (required) Tomcat 7 (recommended) Database - MySQL 5.7 (recommended) SMTP server - Sendgrid, Mailgun, etc (recommended) Web Browser - Chrome/Firefox (recommended) Basic Instructions # Install dependencies Download latest release Create new database in MySQL Grant permissions to new database user Configure runtime properties (openboxes-config.properties) Copy WAR file to Tomcat Configure Tomcat Start Tomcat Watch the Tomcat logs during startup Open application using Chrome browser","title":"Overview"},{"location":"installation/#installation","text":"","title":"Installation"},{"location":"installation/#supported_platforms","text":"Ubuntu 14.04+ Mac 10.6+ Windows 10","title":"Supported Platforms"},{"location":"installation/#requirements","text":"","title":"Requirements"},{"location":"installation/#system_requirements","text":"Internet connection (recommended) 2GB RAM (minimum), 4GB RAM (recommended) 25GB disk storage (minimum)","title":"System Requirements"},{"location":"installation/#software_requirements","text":"Java 7 (required) Tomcat 7 (recommended) Database - MySQL 5.7 (recommended) SMTP server - Sendgrid, Mailgun, etc (recommended) Web Browser - Chrome/Firefox (recommended)","title":"Software Requirements"},{"location":"installation/#basic_instructions","text":"Install dependencies Download latest release Create new database in MySQL Grant permissions to new database user Configure runtime properties (openboxes-config.properties) Copy WAR file to Tomcat Configure Tomcat Start Tomcat Watch the Tomcat logs during startup Open application using Chrome browser","title":"Basic Instructions"},{"location":"installation/advanced/","text":"Advanced # Now that you have OpenBoxes running on Tomcat you might have noticed that you need to access the server using an IP address over port 8080. That doesn't seem great. On top of that the connection is not secure () (add screenshot showing insecure connection) Enable HTTPS # Install Apache2 # sudo apt-get install apache2 Install Let's Encrypt (Certbot) # Follow the instructions in the tutorial below. https://www.digitalocean.com/community/tutorials/how-to-secure-nginx-with-let-s-encrypt-on-ubuntu-14-04 Configure Apache to delegate requests to Tomcat # You can configure this however you'd like (mod_jk, mod_proxy_ajp) but the easiest way is probably to use mod_jk and configure your Apache VirtualHost to delegate /openboxes requests to Tomcat. Install mod_jk # Following the instructions from the tutorial below. https://www.digitalocean.com/community/tutorials/how-to-encrypt-tomcat-8-connections-with-apache-or-nginx-on-ubuntu-16-04 sudo apt-get install libapache2-mod-jk Configure Tomcat to listen on port 8009 (AJP) # Uncomment the following line in /var/lib/tomcat7/conf/server.xml !-- Define an AJP 1.3 Connector on port 8009 -- Connector port=\"8009\" protocol=\"AJP/1.3\" redirectPort=\"8443\" / Configure Apache to delegate requests to Tomcat # Check workers.properties (/etc/libapache2-mod-jk/workers.properties) # Make sure these properties look ok. workers.tomcat_home=/usr/share/tomcat7 workers.java_home=/usr/lib/jvm/default-java ls -al /usr/share/tomcat7 ls -al /usr/lib/jvm/default-java","title":"Advanced"},{"location":"installation/advanced/#advanced","text":"Now that you have OpenBoxes running on Tomcat you might have noticed that you need to access the server using an IP address over port 8080. That doesn't seem great. On top of that the connection is not secure () (add screenshot showing insecure connection)","title":"Advanced"},{"location":"installation/advanced/#enable_https","text":"","title":"Enable HTTPS"},{"location":"installation/advanced/#install_apache2","text":"sudo apt-get install apache2","title":"Install Apache2"},{"location":"installation/advanced/#install_lets_encrypt_certbot","text":"Follow the instructions in the tutorial below. https://www.digitalocean.com/community/tutorials/how-to-secure-nginx-with-let-s-encrypt-on-ubuntu-14-04","title":"Install Let's Encrypt (Certbot)"},{"location":"installation/advanced/#configure_apache_to_delegate_requests_to_tomcat","text":"You can configure this however you'd like (mod_jk, mod_proxy_ajp) but the easiest way is probably to use mod_jk and configure your Apache VirtualHost to delegate /openboxes requests to Tomcat.","title":"Configure Apache to delegate requests to Tomcat"},{"location":"installation/advanced/#install_mod_jk","text":"Following the instructions from the tutorial below. https://www.digitalocean.com/community/tutorials/how-to-encrypt-tomcat-8-connections-with-apache-or-nginx-on-ubuntu-16-04 sudo apt-get install libapache2-mod-jk","title":"Install mod_jk"},{"location":"installation/advanced/#configure_tomcat_to_listen_on_port_8009_ajp","text":"Uncomment the following line in /var/lib/tomcat7/conf/server.xml !-- Define an AJP 1.3 Connector on port 8009 -- Connector port=\"8009\" protocol=\"AJP/1.3\" redirectPort=\"8443\" /","title":"Configure Tomcat to listen on port 8009 (AJP)"},{"location":"installation/advanced/#configure_apache_to_delegate_requests_to_tomcat_1","text":"","title":"Configure Apache to delegate requests to Tomcat"},{"location":"installation/advanced/#check_workersproperties_etclibapache2-mod-jkworkersproperties","text":"Make sure these properties look ok. workers.tomcat_home=/usr/share/tomcat7 workers.java_home=/usr/lib/jvm/default-java ls -al /usr/share/tomcat7 ls -al /usr/lib/jvm/default-java","title":"Check workers.properties (/etc/libapache2-mod-jk/workers.properties)"},{"location":"installation/docker/","text":"Installing OpenBoxes using Docker # Looking to contribute? # We would love for you to create a pull request to add installation instructions for using Docker. Otherwise, stay tuned and hopefully we'll get a chance to work on this soon.","title":"Installing OpenBoxes using Docker"},{"location":"installation/docker/#installing_openboxes_using_docker","text":"","title":"Installing OpenBoxes using Docker"},{"location":"installation/docker/#looking_to_contribute","text":"We would love for you to create a pull request to add installation instructions for using Docker. Otherwise, stay tuned and hopefully we'll get a chance to work on this soon.","title":"Looking to contribute?"},{"location":"installation/macos/","text":"Looking to contribute? # We would love for you to create a pull request to add installation instructions for the Mac.","title":"Mac OS"},{"location":"installation/macos/#looking_to_contribute","text":"We would love for you to create a pull request to add installation instructions for the Mac.","title":"Looking to contribute?"},{"location":"installation/ubuntu1404/","text":"Installing OpenBoxes on Ubuntu 14.04 # 1. Watch the Video # NOTE: If the video does not render properly above you can watch it directly on YouTube . 2. Choose a cloud provider # Here are a few options for cheapish cloud hosting providers. RimuHosting - Customizable VPS (~20/month) Amazon Web Services EC2 - t2.small 2GB (~$20/month) Google Compute Engine - g1-small 1.7GB (~$20/month) Digital Ocean droplet - Droplet 2GB ($20/month) Linode - Linode 2GB ($10/month) NOTE: AWS has a free-tier that includes a free year of 750 hours per month for t2.micro EC2 instances (as well as other services). It's a great deal it if you're not going to be using OpenBoxes too heavily. Unfortunately, keeping a Java-based web application like OpenBoxes happy on a t2.micro (1GB of RAM) is not easy. You may need to reduce the heap size and perm generation memory allocated to Tomcat to something minimal (see step 5 for more details). 3. Install dependencies # Required # Ubuntu 14.04 LTS (your cloud provider should allow you to choose this as the base image for your server) Tomcat 7 ( sudo apt-get install tomcat7 ) MySQL 5.5+ ( sudo apt-get install mysql-server ) Java 7 ( sudo apt-get install openjdk-7-jre ) IMPORTANT: For the time being, you MUST use Java 7! The version of Grails that we're using does not support Java 8. We are working on upgrading to the latest version of Grails, but we're still several months away from completing that migration. Optional dependencies # SMTP Server (runs over localhost:25 by default) Chrome Browser (currently using Version 29.0.1547.57 ) 4. Create database # $ mysql -u root -p -e 'create database openboxes default charset utf8;' Grant permissions to new new database user mysql -u root -p -e 'grant all on openboxes.* to ' username '@'localhost' identified by password ;' NOTE: For security reasons, you will want to set a decent password. These values should be used in the dataSource.username and dataSource.password configuration properties in openboxes-config.properties . 5. Configure application properties # Download the sample external configuration properties file ( openboxes-config.properties ) and save it under /usr/share/tomcat7/.grails/openboxes-config.properties . REMINDER: Change dataSource.password to the password you set in the grant all command above. Here's another example of the openboxes-config.properties file: # Database connection settings dataSource.username= username dataSource.password= password # Example of a simple JDBC URL (not to be used in production) dataSource.url=jdbc:mysql://localhost:3306/openboxes # Example of a more complex JDBC URL (used in our ccurent production environment) #dataSource.url=jdbc:mysql://localhost:3306/openboxes?autoReconnect=true zeroDateTimeBehavior=convertToNull sessionVariables=storage_engine=InnoDB # Used primarily with g:link when absoluteUrl is true (e.g. links in emails) grails.serverURL=http://localhost:8080/openboxes # OpenBoxes mail settings - disabled by default (unless you set up an SMTP server) #grails.mail.enabled=true NOTE: Documentation for each available configuration will be provided in the Configuration section. 6. Configure Tomcat # You will likely encounter OutOfMemoryErrors with Tomcat's default memory settings. Therefore, I usually add a file ( /usr/share/tomcat7/bin/setenv.sh ) that is invoked by the Tomcat startup script and is used to control the amount of memory allocated to your instance of Tomcat. A basic setenv.sh script will look like this: export CATALINA_OPTS= $CATALINA_OPTS -server -Xms512m -Xmx1024m -XX:MaxPermSize=256m -Djava.security.egd=file:/dev/./urandom Make the script executable. $ sudo chmod +x /usr/share/tomcat7/bin/setenv.sh You may be able to get away with using 256m as the max heap size, but 512m is a good setting, even for production environments. Using more memory will allow you to cache more data, but does not always result in a better performing application. So there's no need in getting carried away. We've been using about 1024m in production for over a year and that suits us fine. If you are in a limited memory environment (like an EC2 t2.micro which only has 1GB of memory) you will need to tune these command line arguments a little more. export CATALINA_OPTS= $CATALINA_OPTS -Xms128m -Xmx256m -XX:MaxPermSize=128m -Djava.security.egd=file:/dev/./urandom Unfortunately you will probably run into several types of memory issues when running OpenBoxes in a short amount of memory. Here are a few examples to look out for. Java OutOfMemoryError # The following errors are related to the -Xms (min heap), -Xmx (max heap) , and -XX:MaxPermSize=256m (max perm gen space) memory settings. These errors indicate that the heap / permgen memory spaces are not allocated appropriately and/or there's a memory leak in the application. Heap space ( OutOfMemoryError: Java heap space ) PermGen ( OutOfMemoryError: PermGen space ) See [this article] (https://plumbr.eu/outofmemoryerror/java-heap-space) for a good description of the problem. Contact support@openboxes.com if you have further questions. Out of Memory: Killed process 31088 (java) # In this case, the Linux kernel has killed your Tomcat instance because it over stepped the OS bounds on memory. At this point, you may have increased the max heap size as much as you can. This probably means you need to upgrade to a larger instance type (i.e. as we mentioned above, an instance type that has 2GB of memory is a good start). 7. Deploy the application to Tomcat # Stop tomcat # $ sudo service tomcat7 stop Download latest release # Go to the latest release page on GitHub. Download the WAR file ( openboxes.war ) associated with the latest release. If you wanted to do this from the shell use wget with the following URL to get the latest WAR file. $ wget https://github.com/openboxes/openboxes/releases/download/ version /openboxes.war Copy WAR file to Tomcat # $ sudo cp openboxes.war /var/lib/tomcat7/webapps/openboxes.war NOTE: If you'd like to deploy the application to the root context (to avoid having /openboxes) in every URL, you can copy the $ sudo cp openboxes.war /var/lib/tomcat7/webapps/ROOT.war Restart Tomcat # $ sudo service tomcat7 start Tail Tomcat logs # Keep an eye out for any errors/exceptions that pop up in the catalina.out log file. $ tail -f /var/log/tomcat7/catalina.out","title":"Ubuntu 14.04"},{"location":"installation/ubuntu1404/#installing_openboxes_on_ubuntu_1404","text":"","title":"Installing OpenBoxes on Ubuntu 14.04"},{"location":"installation/ubuntu1404/#1_watch_the_video","text":"NOTE: If the video does not render properly above you can watch it directly on YouTube .","title":"1. Watch the Video"},{"location":"installation/ubuntu1404/#2_choose_a_cloud_provider","text":"Here are a few options for cheapish cloud hosting providers. RimuHosting - Customizable VPS (~20/month) Amazon Web Services EC2 - t2.small 2GB (~$20/month) Google Compute Engine - g1-small 1.7GB (~$20/month) Digital Ocean droplet - Droplet 2GB ($20/month) Linode - Linode 2GB ($10/month) NOTE: AWS has a free-tier that includes a free year of 750 hours per month for t2.micro EC2 instances (as well as other services). It's a great deal it if you're not going to be using OpenBoxes too heavily. Unfortunately, keeping a Java-based web application like OpenBoxes happy on a t2.micro (1GB of RAM) is not easy. You may need to reduce the heap size and perm generation memory allocated to Tomcat to something minimal (see step 5 for more details).","title":"2. Choose a cloud provider"},{"location":"installation/ubuntu1404/#3_install_dependencies","text":"","title":"3. Install dependencies"},{"location":"installation/ubuntu1404/#required","text":"Ubuntu 14.04 LTS (your cloud provider should allow you to choose this as the base image for your server) Tomcat 7 ( sudo apt-get install tomcat7 ) MySQL 5.5+ ( sudo apt-get install mysql-server ) Java 7 ( sudo apt-get install openjdk-7-jre ) IMPORTANT: For the time being, you MUST use Java 7! The version of Grails that we're using does not support Java 8. We are working on upgrading to the latest version of Grails, but we're still several months away from completing that migration.","title":"Required"},{"location":"installation/ubuntu1404/#optional_dependencies","text":"SMTP Server (runs over localhost:25 by default) Chrome Browser (currently using Version 29.0.1547.57 )","title":"Optional dependencies"},{"location":"installation/ubuntu1404/#4_create_database","text":"$ mysql -u root -p -e 'create database openboxes default charset utf8;' Grant permissions to new new database user mysql -u root -p -e 'grant all on openboxes.* to ' username '@'localhost' identified by password ;' NOTE: For security reasons, you will want to set a decent password. These values should be used in the dataSource.username and dataSource.password configuration properties in openboxes-config.properties .","title":"4. Create database"},{"location":"installation/ubuntu1404/#5_configure_application_properties","text":"Download the sample external configuration properties file ( openboxes-config.properties ) and save it under /usr/share/tomcat7/.grails/openboxes-config.properties . REMINDER: Change dataSource.password to the password you set in the grant all command above. Here's another example of the openboxes-config.properties file: # Database connection settings dataSource.username= username dataSource.password= password # Example of a simple JDBC URL (not to be used in production) dataSource.url=jdbc:mysql://localhost:3306/openboxes # Example of a more complex JDBC URL (used in our ccurent production environment) #dataSource.url=jdbc:mysql://localhost:3306/openboxes?autoReconnect=true zeroDateTimeBehavior=convertToNull sessionVariables=storage_engine=InnoDB # Used primarily with g:link when absoluteUrl is true (e.g. links in emails) grails.serverURL=http://localhost:8080/openboxes # OpenBoxes mail settings - disabled by default (unless you set up an SMTP server) #grails.mail.enabled=true NOTE: Documentation for each available configuration will be provided in the Configuration section.","title":"5. Configure application properties"},{"location":"installation/ubuntu1404/#6_configure_tomcat","text":"You will likely encounter OutOfMemoryErrors with Tomcat's default memory settings. Therefore, I usually add a file ( /usr/share/tomcat7/bin/setenv.sh ) that is invoked by the Tomcat startup script and is used to control the amount of memory allocated to your instance of Tomcat. A basic setenv.sh script will look like this: export CATALINA_OPTS= $CATALINA_OPTS -server -Xms512m -Xmx1024m -XX:MaxPermSize=256m -Djava.security.egd=file:/dev/./urandom Make the script executable. $ sudo chmod +x /usr/share/tomcat7/bin/setenv.sh You may be able to get away with using 256m as the max heap size, but 512m is a good setting, even for production environments. Using more memory will allow you to cache more data, but does not always result in a better performing application. So there's no need in getting carried away. We've been using about 1024m in production for over a year and that suits us fine. If you are in a limited memory environment (like an EC2 t2.micro which only has 1GB of memory) you will need to tune these command line arguments a little more. export CATALINA_OPTS= $CATALINA_OPTS -Xms128m -Xmx256m -XX:MaxPermSize=128m -Djava.security.egd=file:/dev/./urandom Unfortunately you will probably run into several types of memory issues when running OpenBoxes in a short amount of memory. Here are a few examples to look out for.","title":"6. Configure Tomcat"},{"location":"installation/ubuntu1404/#java_outofmemoryerror","text":"The following errors are related to the -Xms (min heap), -Xmx (max heap) , and -XX:MaxPermSize=256m (max perm gen space) memory settings. These errors indicate that the heap / permgen memory spaces are not allocated appropriately and/or there's a memory leak in the application. Heap space ( OutOfMemoryError: Java heap space ) PermGen ( OutOfMemoryError: PermGen space ) See [this article] (https://plumbr.eu/outofmemoryerror/java-heap-space) for a good description of the problem. Contact support@openboxes.com if you have further questions.","title":"Java OutOfMemoryError"},{"location":"installation/ubuntu1404/#out_of_memory_killed_process_31088_java","text":"In this case, the Linux kernel has killed your Tomcat instance because it over stepped the OS bounds on memory. At this point, you may have increased the max heap size as much as you can. This probably means you need to upgrade to a larger instance type (i.e. as we mentioned above, an instance type that has 2GB of memory is a good start).","title":"Out of Memory: Killed process 31088 (java)"},{"location":"installation/ubuntu1404/#7_deploy_the_application_to_tomcat","text":"","title":"7. Deploy the application to Tomcat"},{"location":"installation/ubuntu1404/#stop_tomcat","text":"$ sudo service tomcat7 stop","title":"Stop tomcat"},{"location":"installation/ubuntu1404/#download_latest_release","text":"Go to the latest release page on GitHub. Download the WAR file ( openboxes.war ) associated with the latest release. If you wanted to do this from the shell use wget with the following URL to get the latest WAR file. $ wget https://github.com/openboxes/openboxes/releases/download/ version /openboxes.war","title":"Download latest release"},{"location":"installation/ubuntu1404/#copy_war_file_to_tomcat","text":"$ sudo cp openboxes.war /var/lib/tomcat7/webapps/openboxes.war NOTE: If you'd like to deploy the application to the root context (to avoid having /openboxes) in every URL, you can copy the $ sudo cp openboxes.war /var/lib/tomcat7/webapps/ROOT.war","title":"Copy WAR file to Tomcat"},{"location":"installation/ubuntu1404/#restart_tomcat","text":"$ sudo service tomcat7 start","title":"Restart Tomcat"},{"location":"installation/ubuntu1404/#tail_tomcat_logs","text":"Keep an eye out for any errors/exceptions that pop up in the catalina.out log file. $ tail -f /var/log/tomcat7/catalina.out","title":"Tail Tomcat logs"},{"location":"installation/ubuntu1604-notes/","text":"References # SSH https://www.digitalocean.com/community/tutorials/how-to-create-a-sudo-user-on-ubuntu-quickstart SSH https://www.digitalocean.com/community/tutorials/how-to-set-up-ssh-keys-on-ubuntu-1604 OpenJDK https://askubuntu.com/questions/761127/how-do-i-install-openjdk-7-on-ubuntu-16-04-or-higher Mailutils https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-postfix-as-a-send-only-smtp-server-on-ubuntu-16-04 Tomcat https://www.digitalocean.com/community/tutorials/how-to-install-apache-tomcat-8-on-ubuntu-16-04 Certbot https://www.digitalocean.com/community/tutorials/how-to-secure-apache-with-let-s-encrypt-on-ubuntu-16-04 Apache2 + mod JK http://www.brandsoftonline.com/installing-tomcat-7-and-apache2-with-mod_jk-on-ubuntu-14-04/ Tomcat 8 https://www.liquidweb.com/kb/how-to-install-apache-tomcat-7-on-ubuntu-16-04/ Tomcat 8 https://www.digitalocean.com/community/questions/how-to-access-tomcat-8-admin-gui-from-different-host Installation # Log onto server # ssh root-username @server.domain.tld Create new user # sudo adduser username sudo usermod -aG sudo username Copy ssh public key to server # ssh-copy-id username @server.domain.tld Or alternatively manually copy your public key to the server sudo cat /home/username/.ssh/id_rsa.pub | ssh username @server.domain.tld 'cat - ~/.ssh/authorized_keys' NOTE: we need to copy the root user's public key because that's the user running Bamboo Update apt-get repo # sudo apt update Install various dependencies # sudo apt-get install mailutils sudo apt-get install unzip Install Java 7 # You have a few options here and I would recommend the first one, but follow the instructions carefully. Automatic Installation #1 [recommended] # See option 2 in StackOverflow answer https://askubuntu.com/a/803616/292943 Automatic Installation #2 # Easiest, but very insecure [not recommended] https://askubuntu.com/a/761527/292943 Manual Installation #1 # See option 1 in StackOverflow answer https://askubuntu.com/a/803616/292943 Manual Installation #2 # Manually install OpenJDK7 from Azul https://www.azul.com/downloads/zulu/zulu-linux/ Check Java Version # Check to make sure that $ java -version java version 1.7.0_161 OpenJDK Runtime Environment (IcedTea 2.6.12) (7u161-2.6.12-1) OpenJDK 64-Bit Server VM (build 24.161-b01, mixed mode) MySQL 5.7 # Install MySQL # sudo apt-get install mysql-server Configure MySQL # Add the following lines to /etc/alternatives/my.cnf using your favorite text editor. [mysqld] sql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION External Connections [optional] # If you need to allow external connections to MySQL then you'll need to edit the mysqld configuration. /etc/mysql/mysql.conf.d/mysqld.cnf Instead of skip-networking the default is now to listen only on # localhost which is more compatible and is not less secure. # bind-address = 127.0.0.1 # bind-address = 0.0.0.0 Restart MySQL # sudo service mysql restart Install Tomcat 7 # https://www.liquidweb.com/kb/how-to-install-apache-tomcat-7-on-ubuntu-16-04/ Create tomcat directory mkdir /opt/tomcat cd /opt/tomcat Find download https://tomcat.apache.org/download-70.cgi Copy 'zip' link under Core # Download zip file # wget http://mirrors.gigenet.com/apache/tomcat/tomcat-7/v7.0.91/bin/apache-tomcat-7.0.91.zip unzip apache-tomcat-7.0.91.zip Create new tomcat user # Configure tomcat-users.xml [optional] # This configuration can be used for future upgrades. Make sure the file is only readable by root and/or the user that runs Tomcat. Replace and with appropriate values. See Tomcat docs for more information (https://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html#Configuring_Manager_Application_Access). tomcat-users role rolename= manager-gui / role rolename= manager-script / role rolename= manager-jmx / role rolename= manager-status / user username= gui-username password= gui-password roles= manager-gui / user username= script-username password= script-password roles= manager-script / /tomcat-users NOTE: Please don't use obvious passwords (i.e. tomcat, password, s3cret, etc) because your server will get exploited. Install Tomcat 8 # Tomcat 7 https://www.liquidweb.com/kb/how-to-install-apache-tomcat-7-on-ubuntu-16-04/ Tomcat 8 https://www.digitalocean.com/community/questions/how-to-access-tomcat-8-admin-gui-from-different-host sudo groupadd tomcat TODO Start Tomcat automatically # Also note that we're setting memory config in tomcat.service so we no longer need to edit $CATALINA_HOME/bin/setenv.sh sudo vi /etc/systemd/system/tomcat.service tomcat.service [Unit] Description=Apache Tomcat Web Application Container After=network.target [Service] Type=forking Environment=JAVA_HOME=/usr/lib/jvm/java-1.7.0-openjdk-amd64/jre Environment=CATALINA_PID=/opt/tomcat/apache-tomcat-8.5.34/temp/tomcat.pid Environment=CATALINA_HOME=/opt/tomcat/apache-tomcat-8.5.34 Environment=CATALINA_BASE=/opt/tomcat/apache-tomcat-8.5.34 Environment='CATALINA_OPTS=-Xms2048M -Xmx2048M -server -XX:+UseParallelGC' Environment='JAVA_OPTS=-Djava.awt.headless=true -Djava.security.egd=file:/dev/./urandom' ExecStart=/opt/tomcat/apache-tomcat-8.5.34/bin/startup.sh ExecStop=/opt/tomcat/apache-tomcat-8.5.34/bin/shutdown.sh User=tomcat Group=tomcat UMask=0007 RestartSec=10 Restart=always [Install] WantedBy=multi-user.target Deployment # Create database # mysql -u root -p -e 'create database openboxes default charset utf8;' mysql -u root -p -e 'grant all on openboxes.* to 'openboxes'@'localhost' identified by openboxes ;' Configuration # Create openboxes-config.properties file # mkdir ~/.grails vi ~/.grails/openboxes-config.properties Copy the following into ~/.grails/openboxes-config.properties # # Database connection settings dataSource.username=openboxes dataSource.password= password dataSource.url=jdbc:mysql://localhost:3306/openboxes TODO Advanced configuration # Email Sentry ?? Add environment variables to ~/.bashrc # export JAVA_HOME=/usr/lib/jvm/java-8-oracle export CATALINA_HOME=/opt/tomcat/apache-tomcat-7.0.91 Execute ~/.bashrc to setup environment # . ~/.bashrc Ensure the correct Java version is running # sudo update-alternatives --config java There is 1 choice for the alternative java (providing /usr/bin/java). Selection Path Priority Status ------------------------------------------------------------ 0 /usr/lib/jvm/java-8-oracle/jre/bin/java 1081 auto mode * 1 /usr/lib/jvm/java-8-oracle/jre/bin/java 1081 manual mode Press enter to keep the current choice[*], or type selection number: Download latest development verison # cd ~ wget http://bamboo.pih-emr.org:8085/browse/OPENBOXES-SDDEV-226/artifact/DJ/Latest-WAR/openboxes.war Deploy WAR file # cp openboxes.war /opt/tomcat/apache-tomcat-7.0.91/webapps Tail the log file and wait awhile (could take about 10 minutes to create the database) # tail -f /opt/tomcat/apache-tomcat-7.0.91/logs/catalina.out Open Chrome and profit # Additional Configuration # In order to get rid of the port 8080 and enable HTTPs, a common solution is to run a web server in front of Tomcat. Install Apache 2.2 # sudo apt-get install apache2 NOTE: You can configure Tomcat to listen on port 80/443 and enable HTTPS. Configure HTTPS # The easiest way to do this is to use Let's Encrypt (Certbot). See docs here https://www.digitalocean.com/community/tutorials/how-to-secure-apache-with-let-s-encrypt-on-ubuntu-16-04 Install Certbot for Apache # sudo add-apt-repository ppa:certbot/certbot sudo apt-get update sudo apt-get install python-certbot-apache Create new HTTPS certificate # Ensure that your domain is accessible before proceeding. sudo certbot --apache -d subdomain.domain.tld Configure automatic update of certificate # # Configure mod_jk # sudo apt-get install libapache2-mod-jk Enable mod_jk # sudo a2enmod mod_jk Update workers.properties # workers.tomcat_home=/opt/tomcat/apache-tomcat-7.0.91 workers.java_home=/usr/lib/jvm/java-7-openjdk-amd64 Configure Tomcat server.xml # Uncomment the following line in server.xml Connector port= 8009 protocol= AJP/1.3 redirectPort= 8443 / Configure Apache # Add the following line to all of your apache configuration in sites-enabled /etc/apache2/sites-enabled/000-default.conf /etc/apache2/sites-enabled/000-default-le-ssl.conf JkMount /openboxes/* ajp13_worker JkMount /manager/* ajp13_worker Restart Apache # Restart Tomcat # Troubleshooting # Unable to add the resource at [/WEB-INF/classes/] to the cache for web application # Stacktrace # 27-Sep-2018 03:30:09.077 WARNING [localhost-startStop-1] org.apache.catalina.webresources.Cache.getResource Unable to add the resource at [/WEB-INF/classes/] to the cache for web application [/openboxes] because there was insufficient free space available after evicting expired cache entries - consider increasing the maximum size of the cache Solution # Increase size of cache in tomcat configuration. Errors were encountered while processing ... # Stacktrace # Errors were encountered while processing: fontconfig libpango-1.0-0:amd64 libpangoft2-1.0-0:amd64 libpangocairo-1.0-0:amd64 libgtk2.0-0:amd64 libgtk2.0-bin openjdk-7-jre:amd64 openjdk-7-jdk:amd64 E: Sub-process /usr/bin/dpkg returned an error code (1) NullPointerException: Cannot invoke method getAt() on null object # This means that you're running Java 8 instead of Java 7. Stacktrace # 2018-09-26 15:31:48,575 [localhost-startStop-1] ERROR context.ContextLoader - Context initialization failed org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'pluginManager' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nested exception is java.lang.NullPointerException: Cannot invoke method getAt() on null object Full logs # Sep 26, 2018 3:20:39 PM org.apache.catalina.core.StandardServer await INFO: A valid shutdown command was received via the shutdown port. Stopping the Server instance. Sep 26, 2018 3:20:39 PM org.apache.coyote.AbstractProtocol pause INFO: Pausing ProtocolHandler [ http-bio-8080 ] Sep 26, 2018 3:20:39 PM org.apache.coyote.AbstractProtocol pause INFO: Pausing ProtocolHandler [ ajp-bio-8009 ] Sep 26, 2018 3:20:39 PM org.apache.catalina.core.StandardService stopInternal INFO: Stopping service Catalina Sep 26, 2018 3:20:39 PM org.apache.coyote.AbstractProtocol stop INFO: Stopping ProtocolHandler [ http-bio-8080 ] Sep 26, 2018 3:20:39 PM org.apache.coyote.AbstractProtocol stop INFO: Stopping ProtocolHandler [ ajp-bio-8009 ] Sep 26, 2018 3:20:39 PM org.apache.coyote.AbstractProtocol destroy INFO: Destroying ProtocolHandler [ http-bio-8080 ] Sep 26, 2018 3:20:39 PM org.apache.coyote.AbstractProtocol destroy INFO: Destroying ProtocolHandler [ ajp-bio-8009 ] Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: Server version: Apache Tomcat/7.0.91 Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: Server built: Sep 13 2018 19:52:12 UTC Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: Server number: 7.0.91.0 Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: OS Name: Linux Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: OS Version: 4.15.0-1023-azure Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: Architecture: amd64 Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: Java Home: /usr/lib/jvm/java-8-oracle/jre Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: JVM Version: 1.8.0_181-b13 Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: JVM Vendor: Oracle Corporation Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: CATALINA_BASE: /opt/tomcat/apache-tomcat-7.0.91 Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: CATALINA_HOME: /opt/tomcat/apache-tomcat-7.0.91 Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: Command line argument: -Djava.util.logging.config.file=/opt/tomcat/apache-tomcat-7.0.91/conf/logging.properties Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: Command line argument: -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: Command line argument: -Djdk.tls.ephemeralDHKeySize=2048 Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: Command line argument: -Dignore.endorsed.dirs= Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: Command line argument: -Dcatalina.base=/opt/tomcat/apache-tomcat-7.0.91 Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: Command line argument: -Dcatalina.home=/opt/tomcat/apache-tomcat-7.0.91 Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: Command line argument: -Djava.io.tmpdir=/opt/tomcat/apache-tomcat-7.0.91/temp Sep 26, 2018 3:31:39 PM org.apache.catalina.core.AprLifecycleListener lifecycleEvent INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: /usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib Sep 26, 2018 3:31:39 PM org.apache.coyote.AbstractProtocol init INFO: Initializing ProtocolHandler [ http-bio-8080 ] Sep 26, 2018 3:31:39 PM org.apache.coyote.AbstractProtocol init INFO: Initializing ProtocolHandler [ ajp-bio-8009 ] Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.Catalina load INFO: Initialization processed in 567 ms Sep 26, 2018 3:31:39 PM org.apache.catalina.core.StandardService startInternal INFO: Starting service Catalina Sep 26, 2018 3:31:39 PM org.apache.catalina.core.StandardEngine startInternal INFO: Starting Servlet Engine: Apache Tomcat/7.0.91 Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.HostConfig deployWAR INFO: Deploying web application archive /opt/tomcat/apache-tomcat-7.0.91/webapps/openboxes.war Sep 26, 2018 3:31:44 PM org.apache.catalina.startup.TldConfig execute INFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time. log4j:WARN No appenders could be found for logger (com.opensymphony.clickstream.ClickstreamListener). log4j:WARN Please initialize the log4j system properly. log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info. Using configuration locations [classpath:openboxes-config.properties, classpath:openboxes-config.groovy, file:/home/jmiranda/.grails/openboxes-config.properties, file:/home/jmiranda/.grails/openboxes-config.groovy] [production] Unable to load specified config location classpath:openboxes-config.properties : class path resource [openboxes-config.properties] cannot be opened because it does not exist Unable to load specified config location classpath:openboxes-config.groovy : class path resource [openboxes-config.groovy] cannot be opened because it does not exist Unable to load specified config location file:/home/jmiranda/.grails/openboxes-config.groovy : /home/jmiranda/.grails/openboxes-config.groovy (No such file or directory) grails.mail.enabled: 'true' Using [:] SMTP appender org.apache.log4j.net.SMTPAppender 2018-09-26 15:31:45,314 [localhost-startStop-1] INFO context.ContextLoader - Root WebApplicationContext: initialization started 2018-09-26 15:31:45,334 [localhost-startStop-1] INFO support.XmlWebApplicationContext - Refreshing Root WebApplicationContext: startup date [Wed Sep 26 15:31:45 UTC 2018]; root of context hierarchy 2018-09-26 15:31:45,366 [localhost-startStop-1] INFO xml.XmlBeanDefinitionReader - Loading XML bean definitions from ServletContext resource [/WEB-INF/applicationContext.xml] 2018-09-26 15:31:45,774 [localhost-startStop-1] INFO support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@4e04539a: defining beans [grailsApplication,pluginManager,grailsConfigurator,grailsResourceLoader,grailsResourceHolder,characterEncodingFilter]; root of factory hierarchy 2018-09-26 15:31:48,382 [localhost-startStop-1] INFO cfg.Environment - Hibernate 3.3.1.GA 2018-09-26 15:31:48,385 [localhost-startStop-1] INFO cfg.Environment - hibernate.properties not found 2018-09-26 15:31:48,387 [localhost-startStop-1] INFO cfg.Environment - Bytecode provider name : javassist 2018-09-26 15:31:48,389 [localhost-startStop-1] INFO cfg.Environment - using JDK 1.4 java.sql.Timestamp handling 2018-09-26 15:31:48,567 [localhost-startStop-1] INFO support.DefaultListableBeanFactory - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@4e04539a: defining beans [grailsApplication,pluginManager,grailsConfigurator,grailsResourceLoader,grailsResourceHolder,characterEncodingFilter]; root of factory hierarchy 2018-09-26 15:31:48,575 [localhost-startStop-1] ERROR context.ContextLoader - Context initialization failed org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'pluginManager' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nested exception is java.lang.NullPointerException: Cannot invoke method getAt() on null object at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) at java.util.concurrent.FutureTask.run(FutureTask.java:266) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at java.lang.Thread.run(Thread.java:748) Caused by: java.lang.NullPointerException: Cannot invoke method getAt() on null object ... 5 more log4j:ERROR Error occured while sending e-mail notification. javax.mail.MessagingException: Could not connect to SMTP host: localhost, port: 25; nested exception is: java.net.ConnectException: Connection refused (Connection refused) at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1391) at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:412) at javax.mail.Service.connect(Service.java:288) at javax.mail.Service.connect(Service.java:169) at javax.mail.Service.connect(Service.java:118) at javax.mail.Transport.send0(Transport.java:188) at javax.mail.Transport.send(Transport.java:118) at org.apache.log4j.net.SMTPAppender.sendBuffer(SMTPAppender.java:416) at org.apache.log4j.net.SMTPAppender.append(SMTPAppender.java:256) at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:251) at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:66) at org.apache.log4j.Category.callAppenders(Category.java:206) at org.apache.log4j.Category.forcedLog(Category.java:391) at org.apache.log4j.Category.log(Category.java:856) at org.slf4j.impl.Log4jLoggerAdapter.log(Log4jLoggerAdapter.java:597) at org.apache.commons.logging.impl.SLF4JLocationAwareLog.error(SLF4JLocationAwareLog.java:225) at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:220) at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47) at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:5157) at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5680) at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145) at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:1018) at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:994) at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:652) at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1127) at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:2021) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) at java.util.concurrent.FutureTask.run(FutureTask.java:266) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at java.lang.Thread.run(Thread.java:748) Caused by: java.net.ConnectException: Connection refused (Connection refused) at java.net.PlainSocketImpl.socketConnect(Native Method) at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) at java.net.Socket.connect(Socket.java:589) at com.sun.mail.util.SocketFetcher.createSocket(SocketFetcher.java:231) at com.sun.mail.util.SocketFetcher.getSocket(SocketFetcher.java:189) at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1359) ... 30 more Sep 26, 2018 3:31:48 PM org.apache.catalina.core.StandardContext startInternal SEVERE: One or more listeners failed to start. Full details will be found in the appropriate container log file Sep 26, 2018 3:31:48 PM org.apache.catalina.core.StandardContext startInternal SEVERE: Context [/openboxes] startup failed due to previous errors Sep 26, 2018 3:31:48 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads SEVERE: The web application [/openboxes] appears to have started a thread named [AsyncAppender-Dispatcher-Thread-2] but has failed to stop it. This is very likely to create a memory leak. Sep 26, 2018 3:31:48 PM org.apache.catalina.startup.HostConfig deployWAR INFO: Deployment of web application archive /opt/tomcat/apache-tomcat-7.0.91/webapps/openboxes.war has finished in 9,229 ms Sep 26, 2018 3:31:48 PM org.apache.catalina.startup.HostConfig deployDirectory INFO: Deploying web application directory /opt/tomcat/apache-tomcat-7.0.91/webapps/ROOT Sep 26, 2018 3:31:48 PM org.apache.catalina.startup.HostConfig deployDirectory INFO: Deployment of web application directory /opt/tomcat/apache-tomcat-7.0.91/webapps/ROOT has finished in 62 ms Sep 26, 2018 3:31:48 PM org.apache.catalina.startup.HostConfig deployDirectory INFO: Deploying web application directory /opt/tomcat/apache-tomcat-7.0.91/webapps/docs Sep 26, 2018 3:31:48 PM org.apache.catalina.startup.HostConfig deployDirectory INFO: Deployment of web application directory /opt/tomcat/apache-tomcat-7.0.91/webapps/docs has finished in 33 ms MessagingException: Could not connect to SMTP host: localhost, port: 25; # Solution # Configure OpenBoxes to use an external SMTP server [recommended] Install and configure an SMTP server on localhost [not recommended] Stacktrace # ```log4j:ERROR Error occured while sending e-mail notification. javax.mail.MessagingException: Could not connect to SMTP host: localhost, port: 25; nested exception is: java.net.ConnectException: Connection refused (Connection refused)","title":"References"},{"location":"installation/ubuntu1604-notes/#references","text":"SSH https://www.digitalocean.com/community/tutorials/how-to-create-a-sudo-user-on-ubuntu-quickstart SSH https://www.digitalocean.com/community/tutorials/how-to-set-up-ssh-keys-on-ubuntu-1604 OpenJDK https://askubuntu.com/questions/761127/how-do-i-install-openjdk-7-on-ubuntu-16-04-or-higher Mailutils https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-postfix-as-a-send-only-smtp-server-on-ubuntu-16-04 Tomcat https://www.digitalocean.com/community/tutorials/how-to-install-apache-tomcat-8-on-ubuntu-16-04 Certbot https://www.digitalocean.com/community/tutorials/how-to-secure-apache-with-let-s-encrypt-on-ubuntu-16-04 Apache2 + mod JK http://www.brandsoftonline.com/installing-tomcat-7-and-apache2-with-mod_jk-on-ubuntu-14-04/ Tomcat 8 https://www.liquidweb.com/kb/how-to-install-apache-tomcat-7-on-ubuntu-16-04/ Tomcat 8 https://www.digitalocean.com/community/questions/how-to-access-tomcat-8-admin-gui-from-different-host","title":"References"},{"location":"installation/ubuntu1604-notes/#installation","text":"","title":"Installation"},{"location":"installation/ubuntu1604-notes/#log_onto_server","text":"ssh root-username @server.domain.tld","title":"Log onto server"},{"location":"installation/ubuntu1604-notes/#create_new_user","text":"sudo adduser username sudo usermod -aG sudo username","title":"Create new user"},{"location":"installation/ubuntu1604-notes/#copy_ssh_public_key_to_server","text":"ssh-copy-id username @server.domain.tld Or alternatively manually copy your public key to the server sudo cat /home/username/.ssh/id_rsa.pub | ssh username @server.domain.tld 'cat - ~/.ssh/authorized_keys' NOTE: we need to copy the root user's public key because that's the user running Bamboo","title":"Copy ssh public key to server"},{"location":"installation/ubuntu1604-notes/#update_apt-get_repo","text":"sudo apt update","title":"Update apt-get repo"},{"location":"installation/ubuntu1604-notes/#install_various_dependencies","text":"sudo apt-get install mailutils sudo apt-get install unzip","title":"Install various dependencies"},{"location":"installation/ubuntu1604-notes/#install_java_7","text":"You have a few options here and I would recommend the first one, but follow the instructions carefully.","title":"Install Java 7"},{"location":"installation/ubuntu1604-notes/#automatic_installation_1_recommended","text":"See option 2 in StackOverflow answer https://askubuntu.com/a/803616/292943","title":"Automatic Installation #1 [recommended]"},{"location":"installation/ubuntu1604-notes/#automatic_installation_2","text":"Easiest, but very insecure [not recommended] https://askubuntu.com/a/761527/292943","title":"Automatic Installation #2"},{"location":"installation/ubuntu1604-notes/#manual_installation_1","text":"See option 1 in StackOverflow answer https://askubuntu.com/a/803616/292943","title":"Manual Installation #1"},{"location":"installation/ubuntu1604-notes/#manual_installation_2","text":"Manually install OpenJDK7 from Azul https://www.azul.com/downloads/zulu/zulu-linux/","title":"Manual Installation #2"},{"location":"installation/ubuntu1604-notes/#check_java_version","text":"Check to make sure that $ java -version java version 1.7.0_161 OpenJDK Runtime Environment (IcedTea 2.6.12) (7u161-2.6.12-1) OpenJDK 64-Bit Server VM (build 24.161-b01, mixed mode)","title":"Check Java Version"},{"location":"installation/ubuntu1604-notes/#mysql_57","text":"","title":"MySQL 5.7"},{"location":"installation/ubuntu1604-notes/#install_mysql","text":"sudo apt-get install mysql-server","title":"Install MySQL"},{"location":"installation/ubuntu1604-notes/#configure_mysql","text":"Add the following lines to /etc/alternatives/my.cnf using your favorite text editor. [mysqld] sql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION","title":"Configure MySQL"},{"location":"installation/ubuntu1604-notes/#external_connections_optional","text":"If you need to allow external connections to MySQL then you'll need to edit the mysqld configuration. /etc/mysql/mysql.conf.d/mysqld.cnf","title":"External Connections [optional]"},{"location":"installation/ubuntu1604-notes/#instead_of_skip-networking_the_default_is_now_to_listen_only_on","text":"","title":"Instead of skip-networking the default is now to listen only on"},{"location":"installation/ubuntu1604-notes/#localhost_which_is_more_compatible_and_is_not_less_secure","text":"","title":"localhost which is more compatible and is not less secure."},{"location":"installation/ubuntu1604-notes/#bind-address_127001","text":"bind-address = 0.0.0.0","title":"bind-address           = 127.0.0.1"},{"location":"installation/ubuntu1604-notes/#restart_mysql","text":"sudo service mysql restart","title":"Restart MySQL"},{"location":"installation/ubuntu1604-notes/#install_tomcat_7","text":"https://www.liquidweb.com/kb/how-to-install-apache-tomcat-7-on-ubuntu-16-04/ Create tomcat directory mkdir /opt/tomcat cd /opt/tomcat Find download https://tomcat.apache.org/download-70.cgi","title":"Install Tomcat 7"},{"location":"installation/ubuntu1604-notes/#copy_zip_link_under_core","text":"","title":"Copy 'zip' link under Core"},{"location":"installation/ubuntu1604-notes/#download_zip_file","text":"wget http://mirrors.gigenet.com/apache/tomcat/tomcat-7/v7.0.91/bin/apache-tomcat-7.0.91.zip unzip apache-tomcat-7.0.91.zip","title":"Download zip file"},{"location":"installation/ubuntu1604-notes/#create_new_tomcat_user","text":"","title":"Create new tomcat user"},{"location":"installation/ubuntu1604-notes/#configure_tomcat-usersxml_optional","text":"This configuration can be used for future upgrades. Make sure the file is only readable by root and/or the user that runs Tomcat. Replace and with appropriate values. See Tomcat docs for more information (https://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html#Configuring_Manager_Application_Access). tomcat-users role rolename= manager-gui / role rolename= manager-script / role rolename= manager-jmx / role rolename= manager-status / user username= gui-username password= gui-password roles= manager-gui / user username= script-username password= script-password roles= manager-script / /tomcat-users NOTE: Please don't use obvious passwords (i.e. tomcat, password, s3cret, etc) because your server will get exploited.","title":"Configure tomcat-users.xml [optional]"},{"location":"installation/ubuntu1604-notes/#install_tomcat_8","text":"Tomcat 7 https://www.liquidweb.com/kb/how-to-install-apache-tomcat-7-on-ubuntu-16-04/ Tomcat 8 https://www.digitalocean.com/community/questions/how-to-access-tomcat-8-admin-gui-from-different-host sudo groupadd tomcat","title":"Install Tomcat 8"},{"location":"installation/ubuntu1604-notes/#todo_start_tomcat_automatically","text":"Also note that we're setting memory config in tomcat.service so we no longer need to edit $CATALINA_HOME/bin/setenv.sh sudo vi /etc/systemd/system/tomcat.service tomcat.service [Unit] Description=Apache Tomcat Web Application Container After=network.target [Service] Type=forking Environment=JAVA_HOME=/usr/lib/jvm/java-1.7.0-openjdk-amd64/jre Environment=CATALINA_PID=/opt/tomcat/apache-tomcat-8.5.34/temp/tomcat.pid Environment=CATALINA_HOME=/opt/tomcat/apache-tomcat-8.5.34 Environment=CATALINA_BASE=/opt/tomcat/apache-tomcat-8.5.34 Environment='CATALINA_OPTS=-Xms2048M -Xmx2048M -server -XX:+UseParallelGC' Environment='JAVA_OPTS=-Djava.awt.headless=true -Djava.security.egd=file:/dev/./urandom' ExecStart=/opt/tomcat/apache-tomcat-8.5.34/bin/startup.sh ExecStop=/opt/tomcat/apache-tomcat-8.5.34/bin/shutdown.sh User=tomcat Group=tomcat UMask=0007 RestartSec=10 Restart=always [Install] WantedBy=multi-user.target","title":"TODO Start Tomcat automatically"},{"location":"installation/ubuntu1604-notes/#deployment","text":"","title":"Deployment"},{"location":"installation/ubuntu1604-notes/#create_database","text":"mysql -u root -p -e 'create database openboxes default charset utf8;' mysql -u root -p -e 'grant all on openboxes.* to 'openboxes'@'localhost' identified by openboxes ;'","title":"Create database"},{"location":"installation/ubuntu1604-notes/#configuration","text":"","title":"Configuration"},{"location":"installation/ubuntu1604-notes/#create_openboxes-configproperties_file","text":"mkdir ~/.grails vi ~/.grails/openboxes-config.properties","title":"Create openboxes-config.properties file"},{"location":"installation/ubuntu1604-notes/#copy_the_following_into_grailsopenboxes-configproperties","text":"# Database connection settings dataSource.username=openboxes dataSource.password= password dataSource.url=jdbc:mysql://localhost:3306/openboxes","title":"Copy the following into ~/.grails/openboxes-config.properties"},{"location":"installation/ubuntu1604-notes/#todo_advanced_configuration","text":"Email Sentry ??","title":"TODO Advanced configuration"},{"location":"installation/ubuntu1604-notes/#add_environment_variables_to_bashrc","text":"export JAVA_HOME=/usr/lib/jvm/java-8-oracle export CATALINA_HOME=/opt/tomcat/apache-tomcat-7.0.91","title":"Add environment variables to ~/.bashrc"},{"location":"installation/ubuntu1604-notes/#execute_bashrc_to_setup_environment","text":". ~/.bashrc","title":"Execute ~/.bashrc to setup environment"},{"location":"installation/ubuntu1604-notes/#ensure_the_correct_java_version_is_running","text":"sudo update-alternatives --config java There is 1 choice for the alternative java (providing /usr/bin/java). Selection Path Priority Status ------------------------------------------------------------ 0 /usr/lib/jvm/java-8-oracle/jre/bin/java 1081 auto mode * 1 /usr/lib/jvm/java-8-oracle/jre/bin/java 1081 manual mode Press enter to keep the current choice[*], or type selection number:","title":"Ensure the correct Java version is running"},{"location":"installation/ubuntu1604-notes/#download_latest_development_verison","text":"cd ~ wget http://bamboo.pih-emr.org:8085/browse/OPENBOXES-SDDEV-226/artifact/DJ/Latest-WAR/openboxes.war","title":"Download latest development verison"},{"location":"installation/ubuntu1604-notes/#deploy_war_file","text":"cp openboxes.war /opt/tomcat/apache-tomcat-7.0.91/webapps","title":"Deploy WAR file"},{"location":"installation/ubuntu1604-notes/#tail_the_log_file_and_wait_awhile_could_take_about_10_minutes_to_create_the_database","text":"tail -f /opt/tomcat/apache-tomcat-7.0.91/logs/catalina.out","title":"Tail the log file and wait awhile (could take about 10 minutes to create the database)"},{"location":"installation/ubuntu1604-notes/#open_chrome_and_profit","text":"","title":"Open Chrome and profit"},{"location":"installation/ubuntu1604-notes/#additional_configuration","text":"In order to get rid of the port 8080 and enable HTTPs, a common solution is to run a web server in front of Tomcat.","title":"Additional Configuration"},{"location":"installation/ubuntu1604-notes/#install_apache_22","text":"sudo apt-get install apache2 NOTE: You can configure Tomcat to listen on port 80/443 and enable HTTPS.","title":"Install Apache 2.2"},{"location":"installation/ubuntu1604-notes/#configure_https","text":"The easiest way to do this is to use Let's Encrypt (Certbot). See docs here https://www.digitalocean.com/community/tutorials/how-to-secure-apache-with-let-s-encrypt-on-ubuntu-16-04","title":"Configure HTTPS"},{"location":"installation/ubuntu1604-notes/#install_certbot_for_apache","text":"sudo add-apt-repository ppa:certbot/certbot sudo apt-get update sudo apt-get install python-certbot-apache","title":"Install Certbot for Apache"},{"location":"installation/ubuntu1604-notes/#create_new_https_certificate","text":"Ensure that your domain is accessible before proceeding. sudo certbot --apache -d subdomain.domain.tld","title":"Create new HTTPS certificate"},{"location":"installation/ubuntu1604-notes/#configure_automatic_update_of_certificate","text":"","title":"Configure automatic update of certificate"},{"location":"installation/ubuntu1604-notes/#configure_mod_jk","text":"sudo apt-get install libapache2-mod-jk","title":"Configure mod_jk"},{"location":"installation/ubuntu1604-notes/#enable_mod_jk","text":"sudo a2enmod mod_jk","title":"Enable mod_jk"},{"location":"installation/ubuntu1604-notes/#update_workersproperties","text":"workers.tomcat_home=/opt/tomcat/apache-tomcat-7.0.91 workers.java_home=/usr/lib/jvm/java-7-openjdk-amd64","title":"Update workers.properties"},{"location":"installation/ubuntu1604-notes/#configure_tomcat_serverxml","text":"Uncomment the following line in server.xml Connector port= 8009 protocol= AJP/1.3 redirectPort= 8443 /","title":"Configure Tomcat server.xml"},{"location":"installation/ubuntu1604-notes/#configure_apache","text":"Add the following line to all of your apache configuration in sites-enabled /etc/apache2/sites-enabled/000-default.conf /etc/apache2/sites-enabled/000-default-le-ssl.conf JkMount /openboxes/* ajp13_worker JkMount /manager/* ajp13_worker","title":"Configure Apache"},{"location":"installation/ubuntu1604-notes/#restart_apache","text":"","title":"Restart Apache"},{"location":"installation/ubuntu1604-notes/#restart_tomcat","text":"","title":"Restart Tomcat"},{"location":"installation/ubuntu1604-notes/#troubleshooting","text":"","title":"Troubleshooting"},{"location":"installation/ubuntu1604-notes/#unable_to_add_the_resource_at_web-infclasses_to_the_cache_for_web_application","text":"","title":"Unable to add the resource at [/WEB-INF/classes/] to the cache for web application"},{"location":"installation/ubuntu1604-notes/#stacktrace","text":"27-Sep-2018 03:30:09.077 WARNING [localhost-startStop-1] org.apache.catalina.webresources.Cache.getResource Unable to add the resource at [/WEB-INF/classes/] to the cache for web application [/openboxes] because there was insufficient free space available after evicting expired cache entries - consider increasing the maximum size of the cache","title":"Stacktrace"},{"location":"installation/ubuntu1604-notes/#solution","text":"Increase size of cache in tomcat configuration.","title":"Solution"},{"location":"installation/ubuntu1604-notes/#errors_were_encountered_while_processing","text":"","title":"Errors were encountered while processing ..."},{"location":"installation/ubuntu1604-notes/#stacktrace_1","text":"Errors were encountered while processing: fontconfig libpango-1.0-0:amd64 libpangoft2-1.0-0:amd64 libpangocairo-1.0-0:amd64 libgtk2.0-0:amd64 libgtk2.0-bin openjdk-7-jre:amd64 openjdk-7-jdk:amd64 E: Sub-process /usr/bin/dpkg returned an error code (1)","title":"Stacktrace"},{"location":"installation/ubuntu1604-notes/#nullpointerexception_cannot_invoke_method_getat_on_null_object","text":"This means that you're running Java 8 instead of Java 7.","title":"NullPointerException: Cannot invoke method getAt() on null object"},{"location":"installation/ubuntu1604-notes/#stacktrace_2","text":"2018-09-26 15:31:48,575 [localhost-startStop-1] ERROR context.ContextLoader - Context initialization failed org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'pluginManager' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nested exception is java.lang.NullPointerException: Cannot invoke method getAt() on null object","title":"Stacktrace"},{"location":"installation/ubuntu1604-notes/#full_logs","text":"Sep 26, 2018 3:20:39 PM org.apache.catalina.core.StandardServer await INFO: A valid shutdown command was received via the shutdown port. Stopping the Server instance. Sep 26, 2018 3:20:39 PM org.apache.coyote.AbstractProtocol pause INFO: Pausing ProtocolHandler [ http-bio-8080 ] Sep 26, 2018 3:20:39 PM org.apache.coyote.AbstractProtocol pause INFO: Pausing ProtocolHandler [ ajp-bio-8009 ] Sep 26, 2018 3:20:39 PM org.apache.catalina.core.StandardService stopInternal INFO: Stopping service Catalina Sep 26, 2018 3:20:39 PM org.apache.coyote.AbstractProtocol stop INFO: Stopping ProtocolHandler [ http-bio-8080 ] Sep 26, 2018 3:20:39 PM org.apache.coyote.AbstractProtocol stop INFO: Stopping ProtocolHandler [ ajp-bio-8009 ] Sep 26, 2018 3:20:39 PM org.apache.coyote.AbstractProtocol destroy INFO: Destroying ProtocolHandler [ http-bio-8080 ] Sep 26, 2018 3:20:39 PM org.apache.coyote.AbstractProtocol destroy INFO: Destroying ProtocolHandler [ ajp-bio-8009 ] Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: Server version: Apache Tomcat/7.0.91 Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: Server built: Sep 13 2018 19:52:12 UTC Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: Server number: 7.0.91.0 Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: OS Name: Linux Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: OS Version: 4.15.0-1023-azure Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: Architecture: amd64 Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: Java Home: /usr/lib/jvm/java-8-oracle/jre Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: JVM Version: 1.8.0_181-b13 Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: JVM Vendor: Oracle Corporation Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: CATALINA_BASE: /opt/tomcat/apache-tomcat-7.0.91 Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: CATALINA_HOME: /opt/tomcat/apache-tomcat-7.0.91 Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: Command line argument: -Djava.util.logging.config.file=/opt/tomcat/apache-tomcat-7.0.91/conf/logging.properties Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: Command line argument: -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: Command line argument: -Djdk.tls.ephemeralDHKeySize=2048 Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: Command line argument: -Dignore.endorsed.dirs= Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: Command line argument: -Dcatalina.base=/opt/tomcat/apache-tomcat-7.0.91 Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: Command line argument: -Dcatalina.home=/opt/tomcat/apache-tomcat-7.0.91 Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.VersionLoggerListener log INFO: Command line argument: -Djava.io.tmpdir=/opt/tomcat/apache-tomcat-7.0.91/temp Sep 26, 2018 3:31:39 PM org.apache.catalina.core.AprLifecycleListener lifecycleEvent INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: /usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib Sep 26, 2018 3:31:39 PM org.apache.coyote.AbstractProtocol init INFO: Initializing ProtocolHandler [ http-bio-8080 ] Sep 26, 2018 3:31:39 PM org.apache.coyote.AbstractProtocol init INFO: Initializing ProtocolHandler [ ajp-bio-8009 ] Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.Catalina load INFO: Initialization processed in 567 ms Sep 26, 2018 3:31:39 PM org.apache.catalina.core.StandardService startInternal INFO: Starting service Catalina Sep 26, 2018 3:31:39 PM org.apache.catalina.core.StandardEngine startInternal INFO: Starting Servlet Engine: Apache Tomcat/7.0.91 Sep 26, 2018 3:31:39 PM org.apache.catalina.startup.HostConfig deployWAR INFO: Deploying web application archive /opt/tomcat/apache-tomcat-7.0.91/webapps/openboxes.war Sep 26, 2018 3:31:44 PM org.apache.catalina.startup.TldConfig execute INFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time. log4j:WARN No appenders could be found for logger (com.opensymphony.clickstream.ClickstreamListener). log4j:WARN Please initialize the log4j system properly. log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info. Using configuration locations [classpath:openboxes-config.properties, classpath:openboxes-config.groovy, file:/home/jmiranda/.grails/openboxes-config.properties, file:/home/jmiranda/.grails/openboxes-config.groovy] [production] Unable to load specified config location classpath:openboxes-config.properties : class path resource [openboxes-config.properties] cannot be opened because it does not exist Unable to load specified config location classpath:openboxes-config.groovy : class path resource [openboxes-config.groovy] cannot be opened because it does not exist Unable to load specified config location file:/home/jmiranda/.grails/openboxes-config.groovy : /home/jmiranda/.grails/openboxes-config.groovy (No such file or directory) grails.mail.enabled: 'true' Using [:] SMTP appender org.apache.log4j.net.SMTPAppender 2018-09-26 15:31:45,314 [localhost-startStop-1] INFO context.ContextLoader - Root WebApplicationContext: initialization started 2018-09-26 15:31:45,334 [localhost-startStop-1] INFO support.XmlWebApplicationContext - Refreshing Root WebApplicationContext: startup date [Wed Sep 26 15:31:45 UTC 2018]; root of context hierarchy 2018-09-26 15:31:45,366 [localhost-startStop-1] INFO xml.XmlBeanDefinitionReader - Loading XML bean definitions from ServletContext resource [/WEB-INF/applicationContext.xml] 2018-09-26 15:31:45,774 [localhost-startStop-1] INFO support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@4e04539a: defining beans [grailsApplication,pluginManager,grailsConfigurator,grailsResourceLoader,grailsResourceHolder,characterEncodingFilter]; root of factory hierarchy 2018-09-26 15:31:48,382 [localhost-startStop-1] INFO cfg.Environment - Hibernate 3.3.1.GA 2018-09-26 15:31:48,385 [localhost-startStop-1] INFO cfg.Environment - hibernate.properties not found 2018-09-26 15:31:48,387 [localhost-startStop-1] INFO cfg.Environment - Bytecode provider name : javassist 2018-09-26 15:31:48,389 [localhost-startStop-1] INFO cfg.Environment - using JDK 1.4 java.sql.Timestamp handling 2018-09-26 15:31:48,567 [localhost-startStop-1] INFO support.DefaultListableBeanFactory - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@4e04539a: defining beans [grailsApplication,pluginManager,grailsConfigurator,grailsResourceLoader,grailsResourceHolder,characterEncodingFilter]; root of factory hierarchy 2018-09-26 15:31:48,575 [localhost-startStop-1] ERROR context.ContextLoader - Context initialization failed org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'pluginManager' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nested exception is java.lang.NullPointerException: Cannot invoke method getAt() on null object at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) at java.util.concurrent.FutureTask.run(FutureTask.java:266) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at java.lang.Thread.run(Thread.java:748) Caused by: java.lang.NullPointerException: Cannot invoke method getAt() on null object ... 5 more log4j:ERROR Error occured while sending e-mail notification. javax.mail.MessagingException: Could not connect to SMTP host: localhost, port: 25; nested exception is: java.net.ConnectException: Connection refused (Connection refused) at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1391) at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:412) at javax.mail.Service.connect(Service.java:288) at javax.mail.Service.connect(Service.java:169) at javax.mail.Service.connect(Service.java:118) at javax.mail.Transport.send0(Transport.java:188) at javax.mail.Transport.send(Transport.java:118) at org.apache.log4j.net.SMTPAppender.sendBuffer(SMTPAppender.java:416) at org.apache.log4j.net.SMTPAppender.append(SMTPAppender.java:256) at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:251) at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:66) at org.apache.log4j.Category.callAppenders(Category.java:206) at org.apache.log4j.Category.forcedLog(Category.java:391) at org.apache.log4j.Category.log(Category.java:856) at org.slf4j.impl.Log4jLoggerAdapter.log(Log4jLoggerAdapter.java:597) at org.apache.commons.logging.impl.SLF4JLocationAwareLog.error(SLF4JLocationAwareLog.java:225) at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:220) at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47) at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:5157) at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5680) at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145) at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:1018) at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:994) at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:652) at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1127) at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:2021) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) at java.util.concurrent.FutureTask.run(FutureTask.java:266) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at java.lang.Thread.run(Thread.java:748) Caused by: java.net.ConnectException: Connection refused (Connection refused) at java.net.PlainSocketImpl.socketConnect(Native Method) at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) at java.net.Socket.connect(Socket.java:589) at com.sun.mail.util.SocketFetcher.createSocket(SocketFetcher.java:231) at com.sun.mail.util.SocketFetcher.getSocket(SocketFetcher.java:189) at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1359) ... 30 more Sep 26, 2018 3:31:48 PM org.apache.catalina.core.StandardContext startInternal SEVERE: One or more listeners failed to start. Full details will be found in the appropriate container log file Sep 26, 2018 3:31:48 PM org.apache.catalina.core.StandardContext startInternal SEVERE: Context [/openboxes] startup failed due to previous errors Sep 26, 2018 3:31:48 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads SEVERE: The web application [/openboxes] appears to have started a thread named [AsyncAppender-Dispatcher-Thread-2] but has failed to stop it. This is very likely to create a memory leak. Sep 26, 2018 3:31:48 PM org.apache.catalina.startup.HostConfig deployWAR INFO: Deployment of web application archive /opt/tomcat/apache-tomcat-7.0.91/webapps/openboxes.war has finished in 9,229 ms Sep 26, 2018 3:31:48 PM org.apache.catalina.startup.HostConfig deployDirectory INFO: Deploying web application directory /opt/tomcat/apache-tomcat-7.0.91/webapps/ROOT Sep 26, 2018 3:31:48 PM org.apache.catalina.startup.HostConfig deployDirectory INFO: Deployment of web application directory /opt/tomcat/apache-tomcat-7.0.91/webapps/ROOT has finished in 62 ms Sep 26, 2018 3:31:48 PM org.apache.catalina.startup.HostConfig deployDirectory INFO: Deploying web application directory /opt/tomcat/apache-tomcat-7.0.91/webapps/docs Sep 26, 2018 3:31:48 PM org.apache.catalina.startup.HostConfig deployDirectory INFO: Deployment of web application directory /opt/tomcat/apache-tomcat-7.0.91/webapps/docs has finished in 33 ms","title":"Full logs"},{"location":"installation/ubuntu1604-notes/#messagingexception_could_not_connect_to_smtp_host_localhost_port_25","text":"","title":"MessagingException: Could not connect to SMTP host: localhost, port: 25;"},{"location":"installation/ubuntu1604-notes/#solution_1","text":"Configure OpenBoxes to use an external SMTP server [recommended] Install and configure an SMTP server on localhost [not recommended]","title":"Solution"},{"location":"installation/ubuntu1604-notes/#stacktrace_3","text":"```log4j:ERROR Error occured while sending e-mail notification. javax.mail.MessagingException: Could not connect to SMTP host: localhost, port: 25; nested exception is: java.net.ConnectException: Connection refused (Connection refused)","title":"Stacktrace"},{"location":"installation/ubuntu1604/","text":"Installing OpenBoxes on Ubuntu 16.04 # 1. Check Requirements # System Requirements # Internet connection (recommended) 2GB RAM (minimum) 25GB disk storage (minimum) Software Requirements # Ubuntu 16.04 LTS Java 7 Tomcat 7 MySQL 5.7+ SMTP service 2. Choose where to install # Whether you plan to install OpenBoxes on-premise or in the cloud, the installation instructions should be the same. However, getting to a place Cloud # Here are a few options for cheapish cloud hosting providers. Hosting Provider Instance Type Monthly Cost Digital Ocean droplet Droplet 2GB $10 Amazon Web Services EC2 t2.small 2GB $20 Google Compute Engine g1-small 1.7GB $20 RimuHosting Customizable VPS $20 Linode Linode 2GB $10 NOTE: AWS has a free-tier that includes a free year of 750 hours per month for t2.micro EC2 instances (as well as other services). It's a great deal it if you're not going to be using OpenBoxes too heavily. Unfortunately, keeping a Java-based web application like OpenBoxes happy on a t2.micro (1GB of RAM) is not easy. You may need to reduce the heap size and perm generation memory allocated to Tomcat to something minimal (see step 5 for more details). On-Premise # Installing OpenBoxes on-premise requires a bit of work to install the appropriate Ubuntu version on the rack-mounted server, desktop, or laptop that you've designated as your server. Our installation docs will not describe how to install Ubuntu 16.04 Desktop or Server, so you'll need to consult Ubuntu docs. Here are a few tutorials that might be helpful. How to install Ubuntu 16.04 Desktop How to install Ubuntu 16.04 Server 3. Install dependencies # 3.1 Update package information # sudo apt-get update 3.2 Upgrade packages already installed # sudo apt-get upgrade 3.3 Install Java 7 # You must install a Java 7 JRE/JDK. Unfortunately, the APT Repository on Ubuntu 16.04 does not include a version of the Java 7 JRE or JDK so we'll need to do some work to get this working. I would personally recommend Option 2 below. Note For the time being, you MUST use Java 7! The version of Grails that we're using does not support Java 8+ or beyond. We are working on upgrading to the latest version of Grails, but we're still several months away from completing that migration. Important In case it wasn't clear from the box above this means you should NOT attempt to install the default-jre , openjdk-8-jre , or openjdk-9-jre packages from the APT repository. Grails 1.3.9 does not support Java 8+ so Tomcat will fail to deploy OpenBoxes. When it fails, you will send an email to support@openboxes.com asking why the installation failed. When we receive your email, we will point you back to the little blue box that you ignored. Don't be that person. Choose your choice # See the following StackExchange question for more details Option 1: Manual Installation (not recommended) You can certainly use this solution, but I had some trouble getting it to work so I would not recommend it. See Option 2: Automatic Installation (recommended) I would recommend this solution. It's a little more complex but seems to behave as you'd expect when installing from the APT repository. Option 3: Oracle Java (not not recommended) 1 This would probably be a recommended option, but Oracle ended public support for JDK 7 along time ago. Option 4: Install from Zulu Linux (not not recommended) 1 This seems like an ok option if you're comfortable manually install Debian packages - it's pretty straightforward. Option 5: Install from an unsupported package maintainer (not recommended) This is probably the easiest solution, but also the least secure. Your friends will call you names. Option 6: Use docker (recommended) I would recommend using docker, but unfortunately do not have any instructions to share at this time. Danger Do not use Option 5 in production. Do not use this solution unless you are in a rush and either plan to do it properly when you have time or you plan to throw away this server after evaluating OpenBoxes. Configure Java version # $ sudo update-alternatives --config java There is only one alternative in link group java (providing /usr/bin/java): /usr/lib/jvm/java-7-openjdk-amd64/jre/bin/java Nothing to configure. Check Java version # Make sure you see something like java version 1.7.0_xyz . $ java -version java version 1.7.0_161 OpenJDK Runtime Environment (IcedTea 2.6.12) (7u161-2.6.12-1) OpenJDK 64-Bit Server VM (build 24.161-b01, mixed mode) 3.4 Tomcat # Install Tomcat 7 # Because we're using Java 7, we need to install a version of Tomcat that has been compiled with Java 7. Otherwise, you'll encounter the following error when deploying OpenBoxes. 2018-10-31 12:44:45,463 [localhost-startStop-1] INFO xml.XmlBeanDefinitionReader - Loading XML bean definitions from ServletContext resource [/WEB-INF/applicationContext.xml] 2018-10-31 12:44:46,299 [localhost-startStop-1] ERROR context.ContextLoader - Context initialization failed org.springframework.beans.factory.access.BootstrapException: Error executing bootstraps; nested exception is java.lang.NoSuchMethodError: java.util.concurrent.ConcurrentHashMap.keySet()Ljava/util/concurrent/ConcurrentHashMap$KeySetView; at org.codehaus.groovy.grails.web.context.GrailsContextLoader.createWebApplicationContext(GrailsContextLoader.java:87) at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197) at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47) at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:5068) at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5584) at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:147) at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:899) at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:875) at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:652) at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1091) at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1980) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) at java.util.concurrent.FutureTask.run(FutureTask.java:262) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) at java.lang.Thread.run(Thread.java:745) Important Tomcat 7 in the APT repository was compiled with Java 8, which causes the aforementioned error during deployment. References # https://whiscardz.wordpress.com/tag/java7-tomcat-7-on-ubuntu-16-04/ https://www.techrepublic.com/article/how-to-install-apache-tomcat-on-ubuntu-server-16-04/ Getting Started # Go to the Tomcat Downloads page Choose a mirror (or leave the default) Right-click on the Core tar.gz link (paste in step 3 below) Download and unpack # $ sudo mkdir /opt/tomcat $ cd /opt/tomcat $ sudo wget http://mirror.metrocast.net/apache/tomcat/tomcat-7/v7.0.91/bin/apache-tomcat-7.0.91.tar.gz $ sudo tar xvzf apache-tomcat-7.0.91.tar.gz Create user, group and change permissions # $ sudo groupadd tomcat $ sudo useradd -s /bin/false -g tomcat -d /opt/tomcat tomcat $ cd apache-tomcat-7.0.91 $ sudo chgrp -R tomcat /opt/tomcat $ sudo chown -R tomcat:tomcat /opt/tomcat $ sudo chown -R tomcat webapps/ work/ temp/ logs/ conf/ Create service # sudo vi /etc/systemd/system/tomcat.service tomcat.service [Unit] Description=Apache Tomcat Web Application Container After=network.target [Service] Type=forking Environment=JAVA_HOME=/usr/lib/jvm/java-1.7.0-openjdk-amd64/jre Environment=CATALINA_PID=/opt/tomcat/apache-tomcat-7.0.91/temp/tomcat.pid Environment=CATALINA_HOME=/opt/tomcat/apache-tomcat-7.0.91 Environment=CATALINA_BASE=/opt/tomcat/apache-tomcat-7.0.91 Environment='CATALINA_OPTS=-Xms512m -Xmx512m -server -XX:+UseParallelGC' Environment='JAVA_OPTS=-Djava.awt.headless=true -Djava.security.egd=file:/dev/./urandom' ExecStart=/opt/tomcat/apache-tomcat-7.0.91/bin/startup.sh ExecStop=/opt/tomcat/apache-tomcat-7.0.91/bin/shutdown.sh User=tomcat Group=tomcat UMask=0007 RestartSec=10 Restart=always [Install] WantedBy=multi-user.target Note You will likely encounter OutOfMemoryErrors with Tomcat's default memory settings. You may be able to get away with using 256m as the max heap size, but 512m is a good setting, even for production environments. Using more memory will allow you to cache more data, but does not always result in a better performing application. So there's no need in getting carried away. We've been using about 1024m in production for over a year and that suits us fine. If you are in a limited memory environment (like an EC2 t2.micro which only has 1GB of memory) you will need to reduce your memory settings a little more. Environment='CATALINA_OPTS=-Xms128m -Xmx256m -XX:MaxPermSize=128m -Djava.security.egd=file:/dev/./urandom -server -XX:+UseParallelGC' Unfortunately, with so little memory allocated you will probably run into several types of OutOfMemoryError issues (see Troublshooting section below). Register service # sudo systemctl daemon-reload Start Tomcat # systemctl start tomcat Systemctl commands # systemctl start tomcat systemctl stop tomcat systemctl status tomcat Service wrapper # At this point I generally go back to using the Ubuntu's service wrapper which abstracts the underlying implementation (could be /etc/init.d , Upstart, or systemctl ). But it's up to you whether you want to continue using systemctl or switch back to service . Here are the commands available if using the service wrapper: sudo service tomcat status sudo service tomcat stop sudo service tomcat start sudo service tomcat restart Configure Tomcat manager (optional) # This configuration can be used to make future upgrades through the Tomcat manager web interface. Make sure the file is only readable by root and/or the user that runs Tomcat. Replace and with appropriate values. See Tomcat docs for more information (https://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html#Configuring_Manager_Application_Access). /opt/tomcat/apache-tomcat-7.0.91/conf/tomcat-users.xml tomcat-users role rolename= manager-gui / role rolename= manager-script / role rolename= manager-jmx / role rolename= manager-status / user username= GUI-USERNAME password= GUI-PASSWORD roles= manager-gui / user username= SCRIPT-USERNAME password= SCRIPT-PASSWORD roles= manager-script / /tomcat-users NOTE: Please don't use obvious passwords (i.e. tomcat, password, s3cret, etc) because your server will get exploited. 3.5 MySQL # Install MySQL Server # Install MySQL from the APT repository. Finally, something easy! sudo apt-get install mysql-server Important Remember the password you enter for the root user. Configure MySQL Server # Allow external connections [optional] # If you need to allow external connections to MySQL then you'll need to edit the bind-address mysqld configuration. This is a security risk so please ensure that you set passwords and grant permissions in a way that does not leave you vulnerable to attacks. /etc/mysql/mysql.conf.d/mysqld.cnf # Instead of skip-networking the default is now to listen only on # localhost which is more compatible and is not less secure. #bind-address = 127.0.0.1 bind-address = 0.0.0.0 This is incompatible with sql_mode=only_full_group_by [recommended] # Important You may encounter an error when using the default mysql-server package (MySQL 5.7). The error (below) requires a configuration change within MySQL. Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 'openboxes.tag.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by This error is caused by the fact that ONLY_FULL_GROUP_BY is enabled in MySQL 5.7 by default. mysql show variables like '%sql_mode%'; +---------------+-------------------------------------------------------------------------------------------------------------------------------------------+ | Variable_name | Value | +---------------+-------------------------------------------------------------------------------------------------------------------------------------------+ | sql_mode | ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION | +---------------+-------------------------------------------------------------------------------------------------------------------------------------------+ 1 row in set (0.01 sec) In order to this avoid error, please copy the sql_mode value above, remove the ONLY_FULL_GROUP_BY option and add it as a new line under the [mysqld] section within /etc/alternatives/my.cnf . [mysqld] sql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION Note Eventually we plan to fix the bug, but for now the config change is recommended. Restart MySQL # sudo service mysql restart Create database # $ mysql -u root -p -e 'create database openboxes default charset utf8;' Grant permissions to new new database user # mysql -u root -p -e 'grant all on openboxes.* to ' username '@'localhost' identified by password ;' Note For security reasons, you will want to set a good password. These values should be used in the dataSource.username and dataSource.password configuration properties in openboxes-config.properties . 3.6 Configure Environment # Determine the path to Java $ sudo update-java-alternatives --list java-1.7.0-openjdk-amd64 1071 /usr/lib/jvm/java-1.7.0-openjdk-amd64 Add environment variables to ~/.bashrc export JAVA_HOME=/usr/lib/jvm/java-1.7.0-openjdk-amd64 export CATALINA_HOME=/opt/tomcat/apache-tomcat-7.0.91 Refresh environment . ~/.bashrc 3.7 Configure application # Create openboxes-config.properties file # cd /opt/tomcat sudo mkdir /opt/tomcat/.grails sudo vi /opt/tomcat/.grails/openboxes-config.properties Copy the following contents into opneboxes-config.properties # /opt/tomcat/.grails/openboxes-config.properties # Database connection settings dataSource.username= username dataSource.password= password # Example of a simple JDBC URL (not to be used in production) dataSource.url=jdbc:mysql://localhost:3306/openboxes # Example of a more complex JDBC URL (used in our ccurent production environment) #dataSource.url=jdbc:mysql://localhost:3306/openboxes?autoReconnect=true zeroDateTimeBehavior=convertToNull sessionVariables=storage_engine=InnoDB # Used primarily with g:link when absoluteUrl is true (e.g. links in emails) grails.serverURL=http://localhost:8080/openboxes # OpenBoxes mail settings - disabled by default (unless you set up an SMTP server) #grails.mail.enabled=true Reminder Change dataSource.username and dataSource.password to the username and password you set in the grant all command above. Reminder Change grails.serverURL to the IP address or domain name you plan to use for your server. Note Documentation for all available configuration properties is provided in the Configuration section. 3.8 Deployment # Stop tomcat # $ sudo service tomcat stop Download latest release # Go to the the latest release page on GitHub. Right-click on openboxes.war Select Copy link address Paste the link address in the following command $ sudo wget https://github.com/openboxes/openboxes/releases/download/ version /openboxes.war Copy WAR file to webapps # $ sudo cp openboxes.war /opt/tomcat/apache-tomcat-7.0.91/webapps/openboxes.war Change file ownership # $ sudo chown tomcat:tomcat /opt/tomcat/apache-tomcat-7.0.91/webapps/openboxes.war Restart Tomcat # $ sudo service tomcat start Watch Tomcat logs # The deployment will take about 10-20 minutes the first time because the application needs to perform hundreds of database migrations. Keep an eye out for any errors/exceptions that pop up in the catalina.out log file and check the Troubleshooting section for details on how to handle these issues. $ sudo tail -f /opt/tomcat/apache-tomcat-7.0.91/logs/catalina.out 3.9 Troubleshooting # Unable to load specified config location # You can ignore these errors because these files are only used to override the default openboxes-config.properties . Using configuration locations [classpath:openboxes-config.properties, classpath:openboxes-config.groovy, file:/opt/tomcat/.grails/openboxes-config.properties, file:/opt/tomcat/.grails/openboxes-config.groovy] [production] Unable to load specified config location classpath:openboxes-config.properties : class path resource [openboxes-config.properties] cannot be opened because it does not exist Unable to load specified config location classpath:openboxes-config.groovy : class path resource [openboxes-config.groovy] cannot be opened because it does not exist Unable to load specified config location file:/opt/tomcat/.grails/openboxes-config.groovy : /opt/tomcat/.grails/openboxes-config.groovy (No such file or directory) However, if the log shows that the following file could not be found, then we might have a problem. Check that the file exists and that the ownership and permissions on this file allow the tomcat user to read it. Unable to load specified config location file:/opt/tomcat/.grails/openboxes-config.properties : /opt/tomcat/.grails/openboxes-config.properties (No such file or directory) Java OutOfMemoryError # The following errors are related to the -Xms (min heap), -Xmx (max heap) , and -XX:MaxPermSize=256m (max perm gen space) memory settings. These errors indicate that the heap / permgen memory spaces are not allocated appropriately and/or there's a memory leak in the application. Heap space ( OutOfMemoryError: Java heap space ) PermGen ( OutOfMemoryError: PermGen space ) See [this article] (https://plumbr.eu/outofmemoryerror/java-heap-space) for a good description of the problem. Contact support@openboxes.com if you have further questions. Out of Memory: Killed process 31088 (java) # In this case, the Linux kernel has killed your Tomcat instance because it over stepped the OS bounds on memory. At this point, you may have increased the max heap size as much as you can. This probably means you need to upgrade to a larger instance type (i.e. as we mentioned above, an instance type that has 2GB of memory is a good start). java.io.FileNotFoundException: stacktrace.log (Permission denied) # You can safely ignore this error. log4j:ERROR setFile(null,true) call failed. java.io.FileNotFoundException: stacktrace.log (Permission denied) at java.io.FileOutputStream.open(Native Method) at java.io.FileOutputStream. init (FileOutputStream.java:221) at java.io.FileOutputStream. init (FileOutputStream.java:142) at org.apache.log4j.FileAppender.setFile(FileAppender.java:294) at org.apache.log4j.FileAppender.activateOptions(FileAppender.java:165) at org.apache.log4j.spi.OptionHandler$activateOptions.call(Unknown Source) at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:40) at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:116) at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:120) at org.codehaus.groovy.grails.plugins.logging.Log4jConfig.createFullstackTraceAppender(Log4jConfig.groovy:177) at org.codehaus.groovy.grails.plugins.logging.Log4jConfig.this$2$createFullstackTraceAppender(Log4jConfig.groovy) at org.codehaus.groovy.grails.plugins.logging.Log4jConfig$this$2$createFullstackTraceAppender.callCurrent(Unknown Source) at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:44) at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:141) at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:145) at org.codehaus.groovy.grails.plugins.logging.Log4jConfig.configure(Log4jConfig.groovy:145) at org.codehaus.groovy.grails.web.util.Log4jConfigListener.contextInitialized(Log4jConfigListener.java:62) at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:5157) at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5680) at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145) at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:1018) at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:994) at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:652) at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1127) at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:2021) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:473) at java.util.concurrent.FutureTask.run(FutureTask.java:262) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1152) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:622) at java.lang.Thread.run(Thread.java:748) Could not connect to SMTP host: localhost, port: 25; # By default, the system assumes that there's an SMTP server listening on port 25 so that it can send exceptions to errors@openboxes.com . This should probably be disabled by default. For now you can just ignore these errors. javax.mail.MessagingException: Could not connect to SMTP host: localhost, port: 25; nested exception is: java.net.ConnectException: Connection refused (Connection refused) MySQLSyntaxErrorException: Unknown column 'this_.created_by_id' in 'field list' # This is related to a bug / limitation with the Quartz scheduler. By default we can only limit the Quartz scheduler from starting tasks for up to X seconds. We cannot set dependencies such as \"when the database has been created\". Because of this limitation, the Quartz scheduler triggers all jobs during the application bootstrapping and before the database migrations have been completed. Therefore, some Quartz jobs which depend on the database are executed before the database is ready. Hence the \"Unknown column\" errors. Related issues: https://github.com/openboxes/openboxes/issues/26 https://github.com/openboxes/openboxes/issues/259 Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Unknown column 'this_.created_by_id' in 'field list' at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57) at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) at java.lang.reflect.Constructor.newInstance(Constructor.java:526) at com.mysql.jdbc.Util.handleNewInstance(Util.java:411) at com.mysql.jdbc.Util.getInstance(Util.java:386) at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1054) at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4190) at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4122) at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2570) at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2731) at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2818) at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2157) at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2324) at com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeQuery(NewProxyPreparedStatement.java:76) at org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:208) at org.hibernate.loader.Loader.getResultSet(Loader.java:1808) at org.hibernate.loader.Loader.doQuery(Loader.java:697) at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:259) at org.hibernate.loader.Loader.doList(Loader.java:2228) ... 75 more Once the database migration process has completed you should stop seeing these errors and the logs will show that the deployment has completed successfully. ... 2018-11-16 18:11:25,783 [localhost-startStop-1] INFO liquibase - Release Database Lock 2018-11-16 18:11:25,784 [localhost-startStop-1] INFO liquibase - Successfully released change log lock 2018-11-16 18:11:26,583 [localhost-startStop-1] INFO bootstrap.BootStrap - Finished running liquibase changelog(s)! 2018-11-16 18:11:26,584 [localhost-startStop-1] INFO bootstrap.BootStrap - Insert test fixtures? true 2018-11-16 18:11:26,585 [localhost-startStop-1] INFO bootstrap.BootStrap - Inserting test fixtures ... 2018-11-16 18:11:26,598 [localhost-startStop-1] INFO bootstrap.BootStrap - Creating uploads directory if it doesn't already exist 2018-11-16 18:11:26,598 [localhost-startStop-1] INFO context.ContextLoader - Root WebApplicationContext: initialization completed in 523311 ms Nov 16, 2018 6:11:26 PM org.apache.catalina.startup.HostConfig deployWAR INFO: Deployment of web application archive /opt/tomcat/apache-tomcat-7.0.91/webapps/openboxes.war has finished in 545,140 ms Nov 16, 2018 6:11:27 PM org.apache.coyote.AbstractProtocol start INFO: Starting ProtocolHandler [ http-bio-8080 ] Nov 16, 2018 6:11:27 PM org.apache.coyote.AbstractProtocol start INFO: Starting ProtocolHandler [ ajp-bio-8009 ] Nov 16, 2018 6:11:27 PM org.apache.catalina.startup.Catalina start INFO: Server startup in 546085 ms You read that correctly. I wrote \"not not recommended\", which is a double negative meaning \"we're not recommending it, but we're also not not recommending it.\"","title":"Ubuntu 16.04"},{"location":"installation/ubuntu1604/#installing_openboxes_on_ubuntu_1604","text":"","title":"Installing OpenBoxes on Ubuntu 16.04"},{"location":"installation/ubuntu1604/#1_check_requirements","text":"","title":"1. Check Requirements"},{"location":"installation/ubuntu1604/#system_requirements","text":"Internet connection (recommended) 2GB RAM (minimum) 25GB disk storage (minimum)","title":"System Requirements"},{"location":"installation/ubuntu1604/#software_requirements","text":"Ubuntu 16.04 LTS Java 7 Tomcat 7 MySQL 5.7+ SMTP service","title":"Software Requirements"},{"location":"installation/ubuntu1604/#2_choose_where_to_install","text":"Whether you plan to install OpenBoxes on-premise or in the cloud, the installation instructions should be the same. However, getting to a place","title":"2. Choose where to install"},{"location":"installation/ubuntu1604/#cloud","text":"Here are a few options for cheapish cloud hosting providers. Hosting Provider Instance Type Monthly Cost Digital Ocean droplet Droplet 2GB $10 Amazon Web Services EC2 t2.small 2GB $20 Google Compute Engine g1-small 1.7GB $20 RimuHosting Customizable VPS $20 Linode Linode 2GB $10 NOTE: AWS has a free-tier that includes a free year of 750 hours per month for t2.micro EC2 instances (as well as other services). It's a great deal it if you're not going to be using OpenBoxes too heavily. Unfortunately, keeping a Java-based web application like OpenBoxes happy on a t2.micro (1GB of RAM) is not easy. You may need to reduce the heap size and perm generation memory allocated to Tomcat to something minimal (see step 5 for more details).","title":"Cloud"},{"location":"installation/ubuntu1604/#on-premise","text":"Installing OpenBoxes on-premise requires a bit of work to install the appropriate Ubuntu version on the rack-mounted server, desktop, or laptop that you've designated as your server. Our installation docs will not describe how to install Ubuntu 16.04 Desktop or Server, so you'll need to consult Ubuntu docs. Here are a few tutorials that might be helpful. How to install Ubuntu 16.04 Desktop How to install Ubuntu 16.04 Server","title":"On-Premise"},{"location":"installation/ubuntu1604/#3_install_dependencies","text":"","title":"3. Install dependencies"},{"location":"installation/ubuntu1604/#31_update_package_information","text":"sudo apt-get update","title":"3.1 Update package information"},{"location":"installation/ubuntu1604/#32_upgrade_packages_already_installed","text":"sudo apt-get upgrade","title":"3.2 Upgrade packages already installed"},{"location":"installation/ubuntu1604/#33_install_java_7","text":"You must install a Java 7 JRE/JDK. Unfortunately, the APT Repository on Ubuntu 16.04 does not include a version of the Java 7 JRE or JDK so we'll need to do some work to get this working. I would personally recommend Option 2 below. Note For the time being, you MUST use Java 7! The version of Grails that we're using does not support Java 8+ or beyond. We are working on upgrading to the latest version of Grails, but we're still several months away from completing that migration. Important In case it wasn't clear from the box above this means you should NOT attempt to install the default-jre , openjdk-8-jre , or openjdk-9-jre packages from the APT repository. Grails 1.3.9 does not support Java 8+ so Tomcat will fail to deploy OpenBoxes. When it fails, you will send an email to support@openboxes.com asking why the installation failed. When we receive your email, we will point you back to the little blue box that you ignored. Don't be that person.","title":"3.3 Install Java 7"},{"location":"installation/ubuntu1604/#choose_your_choice","text":"See the following StackExchange question for more details Option 1: Manual Installation (not recommended) You can certainly use this solution, but I had some trouble getting it to work so I would not recommend it. See Option 2: Automatic Installation (recommended) I would recommend this solution. It's a little more complex but seems to behave as you'd expect when installing from the APT repository. Option 3: Oracle Java (not not recommended) 1 This would probably be a recommended option, but Oracle ended public support for JDK 7 along time ago. Option 4: Install from Zulu Linux (not not recommended) 1 This seems like an ok option if you're comfortable manually install Debian packages - it's pretty straightforward. Option 5: Install from an unsupported package maintainer (not recommended) This is probably the easiest solution, but also the least secure. Your friends will call you names. Option 6: Use docker (recommended) I would recommend using docker, but unfortunately do not have any instructions to share at this time. Danger Do not use Option 5 in production. Do not use this solution unless you are in a rush and either plan to do it properly when you have time or you plan to throw away this server after evaluating OpenBoxes.","title":"Choose your choice"},{"location":"installation/ubuntu1604/#configure_java_version","text":"$ sudo update-alternatives --config java There is only one alternative in link group java (providing /usr/bin/java): /usr/lib/jvm/java-7-openjdk-amd64/jre/bin/java Nothing to configure.","title":"Configure Java version"},{"location":"installation/ubuntu1604/#check_java_version","text":"Make sure you see something like java version 1.7.0_xyz . $ java -version java version 1.7.0_161 OpenJDK Runtime Environment (IcedTea 2.6.12) (7u161-2.6.12-1) OpenJDK 64-Bit Server VM (build 24.161-b01, mixed mode)","title":"Check Java version"},{"location":"installation/ubuntu1604/#34_tomcat","text":"","title":"3.4 Tomcat"},{"location":"installation/ubuntu1604/#install_tomcat_7","text":"Because we're using Java 7, we need to install a version of Tomcat that has been compiled with Java 7. Otherwise, you'll encounter the following error when deploying OpenBoxes. 2018-10-31 12:44:45,463 [localhost-startStop-1] INFO xml.XmlBeanDefinitionReader - Loading XML bean definitions from ServletContext resource [/WEB-INF/applicationContext.xml] 2018-10-31 12:44:46,299 [localhost-startStop-1] ERROR context.ContextLoader - Context initialization failed org.springframework.beans.factory.access.BootstrapException: Error executing bootstraps; nested exception is java.lang.NoSuchMethodError: java.util.concurrent.ConcurrentHashMap.keySet()Ljava/util/concurrent/ConcurrentHashMap$KeySetView; at org.codehaus.groovy.grails.web.context.GrailsContextLoader.createWebApplicationContext(GrailsContextLoader.java:87) at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197) at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47) at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:5068) at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5584) at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:147) at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:899) at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:875) at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:652) at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1091) at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1980) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) at java.util.concurrent.FutureTask.run(FutureTask.java:262) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) at java.lang.Thread.run(Thread.java:745) Important Tomcat 7 in the APT repository was compiled with Java 8, which causes the aforementioned error during deployment.","title":"Install Tomcat 7"},{"location":"installation/ubuntu1604/#references","text":"https://whiscardz.wordpress.com/tag/java7-tomcat-7-on-ubuntu-16-04/ https://www.techrepublic.com/article/how-to-install-apache-tomcat-on-ubuntu-server-16-04/","title":"References"},{"location":"installation/ubuntu1604/#getting_started","text":"Go to the Tomcat Downloads page Choose a mirror (or leave the default) Right-click on the Core tar.gz link (paste in step 3 below)","title":"Getting Started"},{"location":"installation/ubuntu1604/#download_and_unpack","text":"$ sudo mkdir /opt/tomcat $ cd /opt/tomcat $ sudo wget http://mirror.metrocast.net/apache/tomcat/tomcat-7/v7.0.91/bin/apache-tomcat-7.0.91.tar.gz $ sudo tar xvzf apache-tomcat-7.0.91.tar.gz","title":"Download and unpack"},{"location":"installation/ubuntu1604/#create_user_group_and_change_permissions","text":"$ sudo groupadd tomcat $ sudo useradd -s /bin/false -g tomcat -d /opt/tomcat tomcat $ cd apache-tomcat-7.0.91 $ sudo chgrp -R tomcat /opt/tomcat $ sudo chown -R tomcat:tomcat /opt/tomcat $ sudo chown -R tomcat webapps/ work/ temp/ logs/ conf/","title":"Create user, group and change permissions"},{"location":"installation/ubuntu1604/#create_service","text":"sudo vi /etc/systemd/system/tomcat.service tomcat.service [Unit] Description=Apache Tomcat Web Application Container After=network.target [Service] Type=forking Environment=JAVA_HOME=/usr/lib/jvm/java-1.7.0-openjdk-amd64/jre Environment=CATALINA_PID=/opt/tomcat/apache-tomcat-7.0.91/temp/tomcat.pid Environment=CATALINA_HOME=/opt/tomcat/apache-tomcat-7.0.91 Environment=CATALINA_BASE=/opt/tomcat/apache-tomcat-7.0.91 Environment='CATALINA_OPTS=-Xms512m -Xmx512m -server -XX:+UseParallelGC' Environment='JAVA_OPTS=-Djava.awt.headless=true -Djava.security.egd=file:/dev/./urandom' ExecStart=/opt/tomcat/apache-tomcat-7.0.91/bin/startup.sh ExecStop=/opt/tomcat/apache-tomcat-7.0.91/bin/shutdown.sh User=tomcat Group=tomcat UMask=0007 RestartSec=10 Restart=always [Install] WantedBy=multi-user.target Note You will likely encounter OutOfMemoryErrors with Tomcat's default memory settings. You may be able to get away with using 256m as the max heap size, but 512m is a good setting, even for production environments. Using more memory will allow you to cache more data, but does not always result in a better performing application. So there's no need in getting carried away. We've been using about 1024m in production for over a year and that suits us fine. If you are in a limited memory environment (like an EC2 t2.micro which only has 1GB of memory) you will need to reduce your memory settings a little more. Environment='CATALINA_OPTS=-Xms128m -Xmx256m -XX:MaxPermSize=128m -Djava.security.egd=file:/dev/./urandom -server -XX:+UseParallelGC' Unfortunately, with so little memory allocated you will probably run into several types of OutOfMemoryError issues (see Troublshooting section below).","title":"Create service"},{"location":"installation/ubuntu1604/#register_service","text":"sudo systemctl daemon-reload","title":"Register service"},{"location":"installation/ubuntu1604/#start_tomcat","text":"systemctl start tomcat","title":"Start Tomcat"},{"location":"installation/ubuntu1604/#systemctl_commands","text":"systemctl start tomcat systemctl stop tomcat systemctl status tomcat","title":"Systemctl commands"},{"location":"installation/ubuntu1604/#service_wrapper","text":"At this point I generally go back to using the Ubuntu's service wrapper which abstracts the underlying implementation (could be /etc/init.d , Upstart, or systemctl ). But it's up to you whether you want to continue using systemctl or switch back to service . Here are the commands available if using the service wrapper: sudo service tomcat status sudo service tomcat stop sudo service tomcat start sudo service tomcat restart","title":"Service wrapper"},{"location":"installation/ubuntu1604/#configure_tomcat_manager_optional","text":"This configuration can be used to make future upgrades through the Tomcat manager web interface. Make sure the file is only readable by root and/or the user that runs Tomcat. Replace and with appropriate values. See Tomcat docs for more information (https://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html#Configuring_Manager_Application_Access). /opt/tomcat/apache-tomcat-7.0.91/conf/tomcat-users.xml tomcat-users role rolename= manager-gui / role rolename= manager-script / role rolename= manager-jmx / role rolename= manager-status / user username= GUI-USERNAME password= GUI-PASSWORD roles= manager-gui / user username= SCRIPT-USERNAME password= SCRIPT-PASSWORD roles= manager-script / /tomcat-users NOTE: Please don't use obvious passwords (i.e. tomcat, password, s3cret, etc) because your server will get exploited.","title":"Configure Tomcat manager (optional)"},{"location":"installation/ubuntu1604/#35_mysql","text":"","title":"3.5 MySQL"},{"location":"installation/ubuntu1604/#install_mysql_server","text":"Install MySQL from the APT repository. Finally, something easy! sudo apt-get install mysql-server Important Remember the password you enter for the root user.","title":"Install MySQL Server"},{"location":"installation/ubuntu1604/#configure_mysql_server","text":"","title":"Configure MySQL Server"},{"location":"installation/ubuntu1604/#allow_external_connections_optional","text":"If you need to allow external connections to MySQL then you'll need to edit the bind-address mysqld configuration. This is a security risk so please ensure that you set passwords and grant permissions in a way that does not leave you vulnerable to attacks. /etc/mysql/mysql.conf.d/mysqld.cnf # Instead of skip-networking the default is now to listen only on # localhost which is more compatible and is not less secure. #bind-address = 127.0.0.1 bind-address = 0.0.0.0","title":"Allow external connections [optional]"},{"location":"installation/ubuntu1604/#this_is_incompatible_with_sql_modeonly_full_group_by_recommended","text":"Important You may encounter an error when using the default mysql-server package (MySQL 5.7). The error (below) requires a configuration change within MySQL. Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 'openboxes.tag.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by This error is caused by the fact that ONLY_FULL_GROUP_BY is enabled in MySQL 5.7 by default. mysql show variables like '%sql_mode%'; +---------------+-------------------------------------------------------------------------------------------------------------------------------------------+ | Variable_name | Value | +---------------+-------------------------------------------------------------------------------------------------------------------------------------------+ | sql_mode | ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION | +---------------+-------------------------------------------------------------------------------------------------------------------------------------------+ 1 row in set (0.01 sec) In order to this avoid error, please copy the sql_mode value above, remove the ONLY_FULL_GROUP_BY option and add it as a new line under the [mysqld] section within /etc/alternatives/my.cnf . [mysqld] sql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION Note Eventually we plan to fix the bug, but for now the config change is recommended.","title":"This is incompatible with sql_mode=only_full_group_by [recommended]"},{"location":"installation/ubuntu1604/#restart_mysql","text":"sudo service mysql restart","title":"Restart MySQL"},{"location":"installation/ubuntu1604/#create_database","text":"$ mysql -u root -p -e 'create database openboxes default charset utf8;'","title":"Create database"},{"location":"installation/ubuntu1604/#grant_permissions_to_new_new_database_user","text":"mysql -u root -p -e 'grant all on openboxes.* to ' username '@'localhost' identified by password ;' Note For security reasons, you will want to set a good password. These values should be used in the dataSource.username and dataSource.password configuration properties in openboxes-config.properties .","title":"Grant permissions to new new database user"},{"location":"installation/ubuntu1604/#36_configure_environment","text":"Determine the path to Java $ sudo update-java-alternatives --list java-1.7.0-openjdk-amd64 1071 /usr/lib/jvm/java-1.7.0-openjdk-amd64 Add environment variables to ~/.bashrc export JAVA_HOME=/usr/lib/jvm/java-1.7.0-openjdk-amd64 export CATALINA_HOME=/opt/tomcat/apache-tomcat-7.0.91 Refresh environment . ~/.bashrc","title":"3.6 Configure Environment"},{"location":"installation/ubuntu1604/#37_configure_application","text":"","title":"3.7 Configure application"},{"location":"installation/ubuntu1604/#create_openboxes-configproperties_file","text":"cd /opt/tomcat sudo mkdir /opt/tomcat/.grails sudo vi /opt/tomcat/.grails/openboxes-config.properties","title":"Create openboxes-config.properties file"},{"location":"installation/ubuntu1604/#copy_the_following_contents_into_opneboxes-configproperties","text":"/opt/tomcat/.grails/openboxes-config.properties # Database connection settings dataSource.username= username dataSource.password= password # Example of a simple JDBC URL (not to be used in production) dataSource.url=jdbc:mysql://localhost:3306/openboxes # Example of a more complex JDBC URL (used in our ccurent production environment) #dataSource.url=jdbc:mysql://localhost:3306/openboxes?autoReconnect=true zeroDateTimeBehavior=convertToNull sessionVariables=storage_engine=InnoDB # Used primarily with g:link when absoluteUrl is true (e.g. links in emails) grails.serverURL=http://localhost:8080/openboxes # OpenBoxes mail settings - disabled by default (unless you set up an SMTP server) #grails.mail.enabled=true Reminder Change dataSource.username and dataSource.password to the username and password you set in the grant all command above. Reminder Change grails.serverURL to the IP address or domain name you plan to use for your server. Note Documentation for all available configuration properties is provided in the Configuration section.","title":"Copy the following contents into opneboxes-config.properties"},{"location":"installation/ubuntu1604/#38_deployment","text":"","title":"3.8 Deployment"},{"location":"installation/ubuntu1604/#stop_tomcat","text":"$ sudo service tomcat stop","title":"Stop tomcat"},{"location":"installation/ubuntu1604/#download_latest_release","text":"Go to the the latest release page on GitHub. Right-click on openboxes.war Select Copy link address Paste the link address in the following command $ sudo wget https://github.com/openboxes/openboxes/releases/download/ version /openboxes.war","title":"Download latest release"},{"location":"installation/ubuntu1604/#copy_war_file_to_webapps","text":"$ sudo cp openboxes.war /opt/tomcat/apache-tomcat-7.0.91/webapps/openboxes.war","title":"Copy WAR file to webapps"},{"location":"installation/ubuntu1604/#change_file_ownership","text":"$ sudo chown tomcat:tomcat /opt/tomcat/apache-tomcat-7.0.91/webapps/openboxes.war","title":"Change file ownership"},{"location":"installation/ubuntu1604/#restart_tomcat","text":"$ sudo service tomcat start","title":"Restart Tomcat"},{"location":"installation/ubuntu1604/#watch_tomcat_logs","text":"The deployment will take about 10-20 minutes the first time because the application needs to perform hundreds of database migrations. Keep an eye out for any errors/exceptions that pop up in the catalina.out log file and check the Troubleshooting section for details on how to handle these issues. $ sudo tail -f /opt/tomcat/apache-tomcat-7.0.91/logs/catalina.out","title":"Watch Tomcat logs"},{"location":"installation/ubuntu1604/#39_troubleshooting","text":"","title":"3.9 Troubleshooting"},{"location":"installation/ubuntu1604/#unable_to_load_specified_config_location","text":"You can ignore these errors because these files are only used to override the default openboxes-config.properties . Using configuration locations [classpath:openboxes-config.properties, classpath:openboxes-config.groovy, file:/opt/tomcat/.grails/openboxes-config.properties, file:/opt/tomcat/.grails/openboxes-config.groovy] [production] Unable to load specified config location classpath:openboxes-config.properties : class path resource [openboxes-config.properties] cannot be opened because it does not exist Unable to load specified config location classpath:openboxes-config.groovy : class path resource [openboxes-config.groovy] cannot be opened because it does not exist Unable to load specified config location file:/opt/tomcat/.grails/openboxes-config.groovy : /opt/tomcat/.grails/openboxes-config.groovy (No such file or directory) However, if the log shows that the following file could not be found, then we might have a problem. Check that the file exists and that the ownership and permissions on this file allow the tomcat user to read it. Unable to load specified config location file:/opt/tomcat/.grails/openboxes-config.properties : /opt/tomcat/.grails/openboxes-config.properties (No such file or directory)","title":"Unable to load specified config location"},{"location":"installation/ubuntu1604/#java_outofmemoryerror","text":"The following errors are related to the -Xms (min heap), -Xmx (max heap) , and -XX:MaxPermSize=256m (max perm gen space) memory settings. These errors indicate that the heap / permgen memory spaces are not allocated appropriately and/or there's a memory leak in the application. Heap space ( OutOfMemoryError: Java heap space ) PermGen ( OutOfMemoryError: PermGen space ) See [this article] (https://plumbr.eu/outofmemoryerror/java-heap-space) for a good description of the problem. Contact support@openboxes.com if you have further questions.","title":"Java OutOfMemoryError"},{"location":"installation/ubuntu1604/#out_of_memory_killed_process_31088_java","text":"In this case, the Linux kernel has killed your Tomcat instance because it over stepped the OS bounds on memory. At this point, you may have increased the max heap size as much as you can. This probably means you need to upgrade to a larger instance type (i.e. as we mentioned above, an instance type that has 2GB of memory is a good start).","title":"Out of Memory: Killed process 31088 (java)"},{"location":"installation/ubuntu1604/#javaiofilenotfoundexception_stacktracelog_permission_denied","text":"You can safely ignore this error. log4j:ERROR setFile(null,true) call failed. java.io.FileNotFoundException: stacktrace.log (Permission denied) at java.io.FileOutputStream.open(Native Method) at java.io.FileOutputStream. init (FileOutputStream.java:221) at java.io.FileOutputStream. init (FileOutputStream.java:142) at org.apache.log4j.FileAppender.setFile(FileAppender.java:294) at org.apache.log4j.FileAppender.activateOptions(FileAppender.java:165) at org.apache.log4j.spi.OptionHandler$activateOptions.call(Unknown Source) at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:40) at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:116) at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:120) at org.codehaus.groovy.grails.plugins.logging.Log4jConfig.createFullstackTraceAppender(Log4jConfig.groovy:177) at org.codehaus.groovy.grails.plugins.logging.Log4jConfig.this$2$createFullstackTraceAppender(Log4jConfig.groovy) at org.codehaus.groovy.grails.plugins.logging.Log4jConfig$this$2$createFullstackTraceAppender.callCurrent(Unknown Source) at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:44) at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:141) at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:145) at org.codehaus.groovy.grails.plugins.logging.Log4jConfig.configure(Log4jConfig.groovy:145) at org.codehaus.groovy.grails.web.util.Log4jConfigListener.contextInitialized(Log4jConfigListener.java:62) at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:5157) at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5680) at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145) at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:1018) at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:994) at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:652) at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1127) at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:2021) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:473) at java.util.concurrent.FutureTask.run(FutureTask.java:262) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1152) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:622) at java.lang.Thread.run(Thread.java:748)","title":"java.io.FileNotFoundException: stacktrace.log (Permission denied)"},{"location":"installation/ubuntu1604/#could_not_connect_to_smtp_host_localhost_port_25","text":"By default, the system assumes that there's an SMTP server listening on port 25 so that it can send exceptions to errors@openboxes.com . This should probably be disabled by default. For now you can just ignore these errors. javax.mail.MessagingException: Could not connect to SMTP host: localhost, port: 25; nested exception is: java.net.ConnectException: Connection refused (Connection refused)","title":"Could not connect to SMTP host: localhost, port: 25;"},{"location":"installation/ubuntu1604/#mysqlsyntaxerrorexception_unknown_column_this_created_by_id_in_field_list","text":"This is related to a bug / limitation with the Quartz scheduler. By default we can only limit the Quartz scheduler from starting tasks for up to X seconds. We cannot set dependencies such as \"when the database has been created\". Because of this limitation, the Quartz scheduler triggers all jobs during the application bootstrapping and before the database migrations have been completed. Therefore, some Quartz jobs which depend on the database are executed before the database is ready. Hence the \"Unknown column\" errors. Related issues: https://github.com/openboxes/openboxes/issues/26 https://github.com/openboxes/openboxes/issues/259 Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Unknown column 'this_.created_by_id' in 'field list' at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57) at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) at java.lang.reflect.Constructor.newInstance(Constructor.java:526) at com.mysql.jdbc.Util.handleNewInstance(Util.java:411) at com.mysql.jdbc.Util.getInstance(Util.java:386) at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1054) at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4190) at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4122) at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2570) at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2731) at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2818) at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2157) at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2324) at com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeQuery(NewProxyPreparedStatement.java:76) at org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:208) at org.hibernate.loader.Loader.getResultSet(Loader.java:1808) at org.hibernate.loader.Loader.doQuery(Loader.java:697) at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:259) at org.hibernate.loader.Loader.doList(Loader.java:2228) ... 75 more Once the database migration process has completed you should stop seeing these errors and the logs will show that the deployment has completed successfully. ... 2018-11-16 18:11:25,783 [localhost-startStop-1] INFO liquibase - Release Database Lock 2018-11-16 18:11:25,784 [localhost-startStop-1] INFO liquibase - Successfully released change log lock 2018-11-16 18:11:26,583 [localhost-startStop-1] INFO bootstrap.BootStrap - Finished running liquibase changelog(s)! 2018-11-16 18:11:26,584 [localhost-startStop-1] INFO bootstrap.BootStrap - Insert test fixtures? true 2018-11-16 18:11:26,585 [localhost-startStop-1] INFO bootstrap.BootStrap - Inserting test fixtures ... 2018-11-16 18:11:26,598 [localhost-startStop-1] INFO bootstrap.BootStrap - Creating uploads directory if it doesn't already exist 2018-11-16 18:11:26,598 [localhost-startStop-1] INFO context.ContextLoader - Root WebApplicationContext: initialization completed in 523311 ms Nov 16, 2018 6:11:26 PM org.apache.catalina.startup.HostConfig deployWAR INFO: Deployment of web application archive /opt/tomcat/apache-tomcat-7.0.91/webapps/openboxes.war has finished in 545,140 ms Nov 16, 2018 6:11:27 PM org.apache.coyote.AbstractProtocol start INFO: Starting ProtocolHandler [ http-bio-8080 ] Nov 16, 2018 6:11:27 PM org.apache.coyote.AbstractProtocol start INFO: Starting ProtocolHandler [ ajp-bio-8009 ] Nov 16, 2018 6:11:27 PM org.apache.catalina.startup.Catalina start INFO: Server startup in 546085 ms You read that correctly. I wrote \"not not recommended\", which is a double negative meaning \"we're not recommending it, but we're also not not recommending it.\"","title":"MySQLSyntaxErrorException: Unknown column 'this_.created_by_id' in 'field list'"},{"location":"installation/ubuntu1804/","text":"Installing OpenBoxes on Ubuntu 18.04 # Looking to contribute? # We would love for you to create a pull request to add installation instructions for Ubuntu 18.04.","title":"Ubuntu1804"},{"location":"installation/ubuntu1804/#installing_openboxes_on_ubuntu_1804","text":"","title":"Installing OpenBoxes on Ubuntu 18.04"},{"location":"installation/ubuntu1804/#looking_to_contribute","text":"We would love for you to create a pull request to add installation instructions for Ubuntu 18.04.","title":"Looking to contribute?"},{"location":"installation/windows/","text":"Looking to contribute? # We would love for you to create a pull request to add installation instructions for Windows.","title":"Windows"},{"location":"installation/windows/#looking_to_contribute","text":"We would love for you to create a pull request to add installation instructions for Windows.","title":"Looking to contribute?"},{"location":"installation/ubuntu1804/","text":"System Requirements # Internet connection (recommended) Processors: 2 Cores (minimum), 4-8 Cores (recommended) Memory: 2GB RAM (minimum), 4GB Local Disk Storage: 25-50GB (minimum) Software Requirements # Ubuntu 18.04 LTS Java 7 Tomcat 7 MySQL 5.7+ SMTP service (optional, but recommended)","title":"Overview"},{"location":"installation/ubuntu1804/#system_requirements","text":"Internet connection (recommended) Processors: 2 Cores (minimum), 4-8 Cores (recommended) Memory: 2GB RAM (minimum), 4GB Local Disk Storage: 25-50GB (minimum)","title":"System Requirements"},{"location":"installation/ubuntu1804/#software_requirements","text":"Ubuntu 18.04 LTS Java 7 Tomcat 7 MySQL 5.7+ SMTP service (optional, but recommended)","title":"Software Requirements"},{"location":"installation/ubuntu1804/apache/","text":"","title":"Apache"},{"location":"installation/ubuntu1804/configuration/","text":"Configuration # Configure Environment # Determine the path to Java $ sudo update-java-alternatives --list java-1.7.0-openjdk-amd64 1071 /usr/lib/jvm/java-1.7.0-openjdk-amd64 Add environment variables to ~/.bashrc # export JAVA_HOME=/usr/lib/jvm/java-1.7.0-openjdk-amd64 export CATALINA_HOME=/opt/tomcat/apache-tomcat-7.0.91 Refresh environment # . ~/.bashrc Configure Application # Create openboxes-config.properties file # cd /opt/tomcat sudo mkdir /opt/tomcat/.grails sudo vi /opt/tomcat/.grails/openboxes-config.properties Copy the following contents into opneboxes-config.properties # /opt/tomcat/.grails/openboxes-config.properties # Database connection settings dataSource.username= username dataSource.password= password dataSource.url=jdbc:mysql://localhost:3306/openboxes?useSSL=false # Used primarily with g:link when absoluteUrl is true (e.g. links in emails) grails.serverURL=http://localhost:8080/openboxes # OpenBoxes mail settings - disabled by default (unless you set up an SMTP server) #grails.mail.enabled=true Reminder Change dataSource.username and dataSource.password to the username and password you set in the grant all command above. Reminder Change grails.serverURL to the IP address or domain name you plan to use for your server. Note Documentation for all available configuration properties is provided in the Configuration section.","title":"Configuration"},{"location":"installation/ubuntu1804/configuration/#configuration","text":"","title":"Configuration"},{"location":"installation/ubuntu1804/configuration/#configure_environment","text":"Determine the path to Java $ sudo update-java-alternatives --list java-1.7.0-openjdk-amd64 1071 /usr/lib/jvm/java-1.7.0-openjdk-amd64","title":"Configure Environment"},{"location":"installation/ubuntu1804/configuration/#add_environment_variables_to_bashrc","text":"export JAVA_HOME=/usr/lib/jvm/java-1.7.0-openjdk-amd64 export CATALINA_HOME=/opt/tomcat/apache-tomcat-7.0.91","title":"Add environment variables to ~/.bashrc"},{"location":"installation/ubuntu1804/configuration/#refresh_environment","text":". ~/.bashrc","title":"Refresh environment"},{"location":"installation/ubuntu1804/configuration/#configure_application","text":"","title":"Configure Application"},{"location":"installation/ubuntu1804/configuration/#create_openboxes-configproperties_file","text":"cd /opt/tomcat sudo mkdir /opt/tomcat/.grails sudo vi /opt/tomcat/.grails/openboxes-config.properties","title":"Create openboxes-config.properties file"},{"location":"installation/ubuntu1804/configuration/#copy_the_following_contents_into_opneboxes-configproperties","text":"/opt/tomcat/.grails/openboxes-config.properties # Database connection settings dataSource.username= username dataSource.password= password dataSource.url=jdbc:mysql://localhost:3306/openboxes?useSSL=false # Used primarily with g:link when absoluteUrl is true (e.g. links in emails) grails.serverURL=http://localhost:8080/openboxes # OpenBoxes mail settings - disabled by default (unless you set up an SMTP server) #grails.mail.enabled=true Reminder Change dataSource.username and dataSource.password to the username and password you set in the grant all command above. Reminder Change grails.serverURL to the IP address or domain name you plan to use for your server. Note Documentation for all available configuration properties is provided in the Configuration section.","title":"Copy the following contents into opneboxes-config.properties"},{"location":"installation/ubuntu1804/deployment/","text":"3.8 Deployment # Stop tomcat # $ sudo service tomcat stop Download latest release # Go to the the latest release page on GitHub. Right-click on openboxes.war Select Copy link address Paste the link address in the following command $ sudo wget https://github.com/openboxes/openboxes/releases/download/ version /openboxes.war Copy WAR file to webapps # $ sudo cp openboxes.war /opt/tomcat/webapps/openboxes.war Change file ownership # $ sudo chown tomcat:tomcat /opt/tomcat/webapps/openboxes.war Restart Tomcat # $ sudo service tomcat start Watch Tomcat logs # The deployment will take about 10-20 minutes the first time because the application needs to perform hundreds of database migrations. Keep an eye out for any errors/exceptions that pop up in the catalina.out log file and check the Troubleshooting section for details on how to handle these issues. $ sudo tail -f /opt/tomcat/apache-tomcat-7.0.91/logs/catalina.out","title":"3.8 Deployment"},{"location":"installation/ubuntu1804/deployment/#38_deployment","text":"","title":"3.8 Deployment"},{"location":"installation/ubuntu1804/deployment/#stop_tomcat","text":"$ sudo service tomcat stop","title":"Stop tomcat"},{"location":"installation/ubuntu1804/deployment/#download_latest_release","text":"Go to the the latest release page on GitHub. Right-click on openboxes.war Select Copy link address Paste the link address in the following command $ sudo wget https://github.com/openboxes/openboxes/releases/download/ version /openboxes.war","title":"Download latest release"},{"location":"installation/ubuntu1804/deployment/#copy_war_file_to_webapps","text":"$ sudo cp openboxes.war /opt/tomcat/webapps/openboxes.war","title":"Copy WAR file to webapps"},{"location":"installation/ubuntu1804/deployment/#change_file_ownership","text":"$ sudo chown tomcat:tomcat /opt/tomcat/webapps/openboxes.war","title":"Change file ownership"},{"location":"installation/ubuntu1804/deployment/#restart_tomcat","text":"$ sudo service tomcat start","title":"Restart Tomcat"},{"location":"installation/ubuntu1804/deployment/#watch_tomcat_logs","text":"The deployment will take about 10-20 minutes the first time because the application needs to perform hundreds of database migrations. Keep an eye out for any errors/exceptions that pop up in the catalina.out log file and check the Troubleshooting section for details on how to handle these issues. $ sudo tail -f /opt/tomcat/apache-tomcat-7.0.91/logs/catalina.out","title":"Watch Tomcat logs"},{"location":"installation/ubuntu1804/hosting/","text":"Whether you plan to install OpenBoxes on-premise or in the cloud, the installation instructions should be relatively similar. Cloud # Here are a few options for cheapish cloud hosting providers. Hosting Provider Instance Type Memory vCPU Disk Monthly Cost Digital Ocean Droplet 4GB 2 80GB $20 Amazon Web Services EC2 t3.medium 4GB 2 $30 Google Compute Engine n1-standard-1 3.75GB 1 $25 n1-standard-2 7.5GB 2 $50 Azure VM B2S 4GB 2 8GB $30 RimuHosting Custom VPS 4GB 8 50GB $30 Linode Linode 4GB 4GB 2 80GB $20 Dedicated 4GB 4GB 2 25GB $30 NOTE: AWS has a free-tier that includes a free year of 750 hours per month for t2.micro EC2 instances (as well as other services). It's a great deal it if you're not going to be using OpenBoxes too heavily. Unfortunately, keeping a Java-based web application like OpenBoxes happy on a t2.micro (1GB of RAM) is not easy. You may need to reduce the heap size and permgen memory allocated to Tomcat to something minimal (see Installing Tomcat page). Note Please let us know if we missed a good hosting option. On-Premise # Installing OpenBoxes on-premise requires a bit of work to install the appropriate Ubuntu version on the rack-mounted server, desktop, or laptop that you've designated as your server. Our installation docs will not describe how to install Ubuntu 16.04 Desktop or Server, so you'll need to consult Ubuntu docs. Here are a few tutorials that might be helpful. Ubuntu Desktop Ubuntu Server Note Contact us if you'd like to discuss what it would take to host OpenBoxes in the cloud and on-premise. This can be useful if Internet and power are unreliable as well as if you have teams distributed across multiple facilities or in multiple countries.","title":"Hosting"},{"location":"installation/ubuntu1804/hosting/#cloud","text":"Here are a few options for cheapish cloud hosting providers. Hosting Provider Instance Type Memory vCPU Disk Monthly Cost Digital Ocean Droplet 4GB 2 80GB $20 Amazon Web Services EC2 t3.medium 4GB 2 $30 Google Compute Engine n1-standard-1 3.75GB 1 $25 n1-standard-2 7.5GB 2 $50 Azure VM B2S 4GB 2 8GB $30 RimuHosting Custom VPS 4GB 8 50GB $30 Linode Linode 4GB 4GB 2 80GB $20 Dedicated 4GB 4GB 2 25GB $30 NOTE: AWS has a free-tier that includes a free year of 750 hours per month for t2.micro EC2 instances (as well as other services). It's a great deal it if you're not going to be using OpenBoxes too heavily. Unfortunately, keeping a Java-based web application like OpenBoxes happy on a t2.micro (1GB of RAM) is not easy. You may need to reduce the heap size and permgen memory allocated to Tomcat to something minimal (see Installing Tomcat page). Note Please let us know if we missed a good hosting option.","title":"Cloud"},{"location":"installation/ubuntu1804/hosting/#on-premise","text":"Installing OpenBoxes on-premise requires a bit of work to install the appropriate Ubuntu version on the rack-mounted server, desktop, or laptop that you've designated as your server. Our installation docs will not describe how to install Ubuntu 16.04 Desktop or Server, so you'll need to consult Ubuntu docs. Here are a few tutorials that might be helpful. Ubuntu Desktop Ubuntu Server Note Contact us if you'd like to discuss what it would take to host OpenBoxes in the cloud and on-premise. This can be useful if Internet and power are unreliable as well as if you have teams distributed across multiple facilities or in multiple countries.","title":"On-Premise"},{"location":"installation/ubuntu1804/java/","text":"Installing Java 7 # You must install a Java 7 JRE/JDK. Unfortunately, the APT Repository on Ubuntu 16.04 does not include a version of the Java 7 JRE or JDK so we'll need to do some work to get this working. I would personally recommend Option 2 below. Note For the time being, you MUST use Java 7! The version of Grails that we're using does not support Java 8+ or beyond. We are working on upgrading to the latest version of Grails, but we're still several months away from completing that migration. Important In case it wasn't clear from the box above this means you should NOT attempt to install the default-jre , openjdk-8-jre , or openjdk-9-jre packages from the APT repository. Grails 1.3.9 does not support Java 8+ so Tomcat will fail to deploy OpenBoxes. When it fails, you will send an email to support@openboxes.com asking why the installation failed. When we receive your email, we will point you back to the little blue box that you ignored. Don't be that person. Choose your choice # See the following StackExchange question for more details Option 1: Manual Installation (not recommended) You can certainly use this solution, but I had some trouble getting it to work so I would not recommend it. See Option 2: Automatic Installation (recommended) I would recommend this solution. It's a little more complex but seems to behave as you'd expect when installing from the APT repository. Option 3: Oracle Java (not not recommended) 1 This would probably be a recommended option, but Oracle ended public support for JDK 7 along time ago. Option 4: Install from Zulu Linux (not not recommended) 1 This seems like an ok option if you're comfortable manually install Debian packages - it's pretty straightforward. Option 5: Install from an unsupported package maintainer (not recommended) This is probably the easiest solution, but also the least secure. Your friends will call you names. Option 6: Use docker (recommended) I would recommend using docker, but unfortunately do not have any instructions to share at this time. Danger Do not use Option 5 in production. Do not use this solution unless you are in a rush and either plan to do it properly when you have time or you plan to throw away this server after evaluating OpenBoxes. Configure Java version # $ sudo update-alternatives --config java There is only one alternative in link group java (providing /usr/bin/java): /usr/lib/jvm/java-7-openjdk-amd64/jre/bin/java Nothing to configure. Check Java version # Make sure you see something like java version 1.7.0_xyz . $ java -version java version 1.7.0_161 OpenJDK Runtime Environment (IcedTea 2.6.12) (7u161-2.6.12-1) OpenJDK 64-Bit Server VM (build 24.161-b01, mixed mode) You read that correctly. I wrote \"not not recommended\", which is a double negative meaning \"we're not recommending it, but we're also not not recommending it.\"","title":"Java"},{"location":"installation/ubuntu1804/java/#installing_java_7","text":"You must install a Java 7 JRE/JDK. Unfortunately, the APT Repository on Ubuntu 16.04 does not include a version of the Java 7 JRE or JDK so we'll need to do some work to get this working. I would personally recommend Option 2 below. Note For the time being, you MUST use Java 7! The version of Grails that we're using does not support Java 8+ or beyond. We are working on upgrading to the latest version of Grails, but we're still several months away from completing that migration. Important In case it wasn't clear from the box above this means you should NOT attempt to install the default-jre , openjdk-8-jre , or openjdk-9-jre packages from the APT repository. Grails 1.3.9 does not support Java 8+ so Tomcat will fail to deploy OpenBoxes. When it fails, you will send an email to support@openboxes.com asking why the installation failed. When we receive your email, we will point you back to the little blue box that you ignored. Don't be that person.","title":"Installing Java 7"},{"location":"installation/ubuntu1804/java/#choose_your_choice","text":"See the following StackExchange question for more details Option 1: Manual Installation (not recommended) You can certainly use this solution, but I had some trouble getting it to work so I would not recommend it. See Option 2: Automatic Installation (recommended) I would recommend this solution. It's a little more complex but seems to behave as you'd expect when installing from the APT repository. Option 3: Oracle Java (not not recommended) 1 This would probably be a recommended option, but Oracle ended public support for JDK 7 along time ago. Option 4: Install from Zulu Linux (not not recommended) 1 This seems like an ok option if you're comfortable manually install Debian packages - it's pretty straightforward. Option 5: Install from an unsupported package maintainer (not recommended) This is probably the easiest solution, but also the least secure. Your friends will call you names. Option 6: Use docker (recommended) I would recommend using docker, but unfortunately do not have any instructions to share at this time. Danger Do not use Option 5 in production. Do not use this solution unless you are in a rush and either plan to do it properly when you have time or you plan to throw away this server after evaluating OpenBoxes.","title":"Choose your choice"},{"location":"installation/ubuntu1804/java/#configure_java_version","text":"$ sudo update-alternatives --config java There is only one alternative in link group java (providing /usr/bin/java): /usr/lib/jvm/java-7-openjdk-amd64/jre/bin/java Nothing to configure.","title":"Configure Java version"},{"location":"installation/ubuntu1804/java/#check_java_version","text":"Make sure you see something like java version 1.7.0_xyz . $ java -version java version 1.7.0_161 OpenJDK Runtime Environment (IcedTea 2.6.12) (7u161-2.6.12-1) OpenJDK 64-Bit Server VM (build 24.161-b01, mixed mode) You read that correctly. I wrote \"not not recommended\", which is a double negative meaning \"we're not recommending it, but we're also not not recommending it.\"","title":"Check Java version"},{"location":"installation/ubuntu1804/mysql/","text":"Installing MySQL 5.7+ # Install MySQL from the APT repository. Finally, something easy! sudo apt-get install mysql-server Important Remember the password you enter for the root user. Configure MySQL Server # Allow external connections [optional] # If you need to allow external connections to MySQL then you'll need to edit the bind-address mysqld configuration. This is a security risk so please ensure that you set passwords and grant permissions in a way that does not leave you vulnerable to attacks. /etc/mysql/mysql.conf.d/mysqld.cnf # Instead of skip-networking the default is now to listen only on # localhost which is more compatible and is not less secure. #bind-address = 127.0.0.1 bind-address = 0.0.0.0 Restart MySQL # sudo service mysql restart Create database # $ mysql -u root -p -e 'create database openboxes default charset utf8;' Grant permissions to new new database user # mysql -u root -p -e 'grant all on openboxes.* to ' username '@'localhost' identified by password ;' Note For security reasons, you will want to set a good password. These values should be used in the dataSource.username and dataSource.password configuration properties in openboxes-config.properties .","title":"MySQL"},{"location":"installation/ubuntu1804/mysql/#installing_mysql_57","text":"Install MySQL from the APT repository. Finally, something easy! sudo apt-get install mysql-server Important Remember the password you enter for the root user.","title":"Installing MySQL 5.7+"},{"location":"installation/ubuntu1804/mysql/#configure_mysql_server","text":"","title":"Configure MySQL Server"},{"location":"installation/ubuntu1804/mysql/#allow_external_connections_optional","text":"If you need to allow external connections to MySQL then you'll need to edit the bind-address mysqld configuration. This is a security risk so please ensure that you set passwords and grant permissions in a way that does not leave you vulnerable to attacks. /etc/mysql/mysql.conf.d/mysqld.cnf # Instead of skip-networking the default is now to listen only on # localhost which is more compatible and is not less secure. #bind-address = 127.0.0.1 bind-address = 0.0.0.0","title":"Allow external connections [optional]"},{"location":"installation/ubuntu1804/mysql/#restart_mysql","text":"sudo service mysql restart","title":"Restart MySQL"},{"location":"installation/ubuntu1804/mysql/#create_database","text":"$ mysql -u root -p -e 'create database openboxes default charset utf8;'","title":"Create database"},{"location":"installation/ubuntu1804/mysql/#grant_permissions_to_new_new_database_user","text":"mysql -u root -p -e 'grant all on openboxes.* to ' username '@'localhost' identified by password ;' Note For security reasons, you will want to set a good password. These values should be used in the dataSource.username and dataSource.password configuration properties in openboxes-config.properties .","title":"Grant permissions to new new database user"},{"location":"installation/ubuntu1804/requirements/","text":"","title":"Requirements"},{"location":"installation/ubuntu1804/tomcat/","text":"Installing Tomcat 7 # Because we're using Java 7, we need to install a version of Tomcat that has been compiled with Java 7. Otherwise, you'll encounter the following error when deploying OpenBoxes. 2018-10-31 12:44:45,463 [localhost-startStop-1] INFO xml.XmlBeanDefinitionReader - Loading XML bean definitions from ServletContext resource [/WEB-INF/applicationContext.xml] 2018-10-31 12:44:46,299 [localhost-startStop-1] ERROR context.ContextLoader - Context initialization failed org.springframework.beans.factory.access.BootstrapException: Error executing bootstraps; nested exception is java.lang.NoSuchMethodError: java.util.concurrent.ConcurrentHashMap.keySet()Ljava/util/concurrent/ConcurrentHashMap$KeySetView; at org.codehaus.groovy.grails.web.context.GrailsContextLoader.createWebApplicationContext(GrailsContextLoader.java:87) at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197) at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47) at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:5068) at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5584) at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:147) at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:899) at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:875) at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:652) at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1091) at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1980) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) at java.util.concurrent.FutureTask.run(FutureTask.java:262) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) at java.lang.Thread.run(Thread.java:745) Important Tomcat 7 in the APT repository was compiled with Java 8, which causes the aforementioned error during deployment. References # https://whiscardz.wordpress.com/tag/java7-tomcat-7-on-ubuntu-16-04/ https://www.techrepublic.com/article/how-to-install-apache-tomcat-on-ubuntu-server-16-04/ Getting Started # Go to the Tomcat Downloads page Choose a mirror (or leave the default) Right-click on the Core tar.gz link (paste in step 3 below) Download and unpack # $ cd /opt $ sudo wget http://mirror.metrocast.net/apache/tomcat/tomcat-7/v7.0.94/bin/apache-tomcat-7.0.94.tar.gz $ sudo tar xvzf apache-tomcat-7.0.94.tar.gz $ ln -s /opt/apache-tomcat-7.0.94 tomcat $ rm apache-tomcat-7.0.94.tar.gz Create user, group and change permissions # $ sudo groupadd tomcat $ sudo useradd -s /bin/false -g tomcat -d /opt/tomcat tomcat $ sudo chown -R tomcat:tomcat /opt/apache-tomcat-7.0.94 # sudo chmod +x /opt/tomcat/bin/*.sh Create service # sudo vi /etc/systemd/system/tomcat.service chmod +x /etc/systemd/system/tomcat.service tomcat.service [Unit] Description=Apache Tomcat Web Application Container After=network.target [Service] Type=forking Environment=JAVA_HOME=/usr/lib/jvm/java-1.7.0-openjdk-amd64/jre Environment=CATALINA_PID=/opt/tomcat/apache-tomcat-7.0.91/temp/tomcat.pid Environment=CATALINA_HOME=/opt/tomcat/apache-tomcat-7.0.91 Environment=CATALINA_BASE=/opt/tomcat/apache-tomcat-7.0.91 Environment='CATALINA_OPTS=-Xms512m -Xmx512m -server -XX:+UseParallelGC' Environment='JAVA_OPTS=-Djava.awt.headless=true -Djava.security.egd=file:/dev/./urandom' ExecStart=/opt/tomcat/apache-tomcat-7.0.91/bin/startup.sh ExecStop=/opt/tomcat/apache-tomcat-7.0.91/bin/shutdown.sh User=tomcat Group=tomcat UMask=0007 RestartSec=10 Restart=always [Install] WantedBy=multi-user.target Note You will likely encounter OutOfMemoryErrors with Tomcat's default memory settings. You may be able to get away with using 256m as the max heap size, but 512m is a good setting, even for production environments. Using more memory will allow you to cache more data, but does not always result in a better performing application. So there's no need in getting carried away. We've been using about 1024m in production for over a year and that suits us fine. If you are in a limited memory environment (like an EC2 t2.micro which only has 1GB of memory) you will need to reduce your memory settings a little more. Environment='CATALINA_OPTS=-Xms128m -Xmx256m -XX:MaxPermSize=128m -Djava.security.egd=file:/dev/./urandom -server -XX:+UseParallelGC' Unfortunately, with so little memory allocated you will probably run into several types of OutOfMemoryError issues (see Troublshooting section below). Register service # sudo systemctl daemon-reload Start Tomcat # systemctl start tomcat Systemctl commands # systemctl start tomcat systemctl stop tomcat systemctl status tomcat Service wrapper # At this point I generally go back to using the Ubuntu's service wrapper which abstracts the underlying implementation (could be /etc/init.d , Upstart, or systemctl ). But it's up to you whether you want to continue using systemctl or switch back to service . Here are the commands available if using the service wrapper: sudo service tomcat status sudo service tomcat stop sudo service tomcat start sudo service tomcat restart Configure Tomcat manager (optional) # This configuration can be used to make future upgrades through the Tomcat manager web interface. Make sure the file is only readable by root and/or the user that runs Tomcat. Replace and with appropriate values. See Tomcat docs for more information (https://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html#Configuring_Manager_Application_Access). /opt/tomcat/apache-tomcat-7.0.91/conf/tomcat-users.xml tomcat-users role rolename= manager-gui / role rolename= manager-script / role rolename= manager-jmx / role rolename= manager-status / user username= MANAGER-GUI-USERNAME password= GUI-PASSWORD roles= manager-gui / user username= MANAGER-SCRIPT-USERNAME password= SCRIPT-PASSWORD roles= manager-script / /tomcat-users NOTE: Please don't use obvious passwords (i.e. tomcat, password, s3cret, etc) because your server will get exploited.","title":"Tomcat"},{"location":"installation/ubuntu1804/tomcat/#installing_tomcat_7","text":"Because we're using Java 7, we need to install a version of Tomcat that has been compiled with Java 7. Otherwise, you'll encounter the following error when deploying OpenBoxes. 2018-10-31 12:44:45,463 [localhost-startStop-1] INFO xml.XmlBeanDefinitionReader - Loading XML bean definitions from ServletContext resource [/WEB-INF/applicationContext.xml] 2018-10-31 12:44:46,299 [localhost-startStop-1] ERROR context.ContextLoader - Context initialization failed org.springframework.beans.factory.access.BootstrapException: Error executing bootstraps; nested exception is java.lang.NoSuchMethodError: java.util.concurrent.ConcurrentHashMap.keySet()Ljava/util/concurrent/ConcurrentHashMap$KeySetView; at org.codehaus.groovy.grails.web.context.GrailsContextLoader.createWebApplicationContext(GrailsContextLoader.java:87) at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197) at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47) at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:5068) at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5584) at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:147) at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:899) at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:875) at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:652) at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1091) at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1980) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) at java.util.concurrent.FutureTask.run(FutureTask.java:262) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) at java.lang.Thread.run(Thread.java:745) Important Tomcat 7 in the APT repository was compiled with Java 8, which causes the aforementioned error during deployment.","title":"Installing Tomcat 7"},{"location":"installation/ubuntu1804/tomcat/#references","text":"https://whiscardz.wordpress.com/tag/java7-tomcat-7-on-ubuntu-16-04/ https://www.techrepublic.com/article/how-to-install-apache-tomcat-on-ubuntu-server-16-04/","title":"References"},{"location":"installation/ubuntu1804/tomcat/#getting_started","text":"Go to the Tomcat Downloads page Choose a mirror (or leave the default) Right-click on the Core tar.gz link (paste in step 3 below)","title":"Getting Started"},{"location":"installation/ubuntu1804/tomcat/#download_and_unpack","text":"$ cd /opt $ sudo wget http://mirror.metrocast.net/apache/tomcat/tomcat-7/v7.0.94/bin/apache-tomcat-7.0.94.tar.gz $ sudo tar xvzf apache-tomcat-7.0.94.tar.gz $ ln -s /opt/apache-tomcat-7.0.94 tomcat $ rm apache-tomcat-7.0.94.tar.gz","title":"Download and unpack"},{"location":"installation/ubuntu1804/tomcat/#create_user_group_and_change_permissions","text":"$ sudo groupadd tomcat $ sudo useradd -s /bin/false -g tomcat -d /opt/tomcat tomcat $ sudo chown -R tomcat:tomcat /opt/apache-tomcat-7.0.94 # sudo chmod +x /opt/tomcat/bin/*.sh","title":"Create user, group and change permissions"},{"location":"installation/ubuntu1804/tomcat/#create_service","text":"sudo vi /etc/systemd/system/tomcat.service chmod +x /etc/systemd/system/tomcat.service tomcat.service [Unit] Description=Apache Tomcat Web Application Container After=network.target [Service] Type=forking Environment=JAVA_HOME=/usr/lib/jvm/java-1.7.0-openjdk-amd64/jre Environment=CATALINA_PID=/opt/tomcat/apache-tomcat-7.0.91/temp/tomcat.pid Environment=CATALINA_HOME=/opt/tomcat/apache-tomcat-7.0.91 Environment=CATALINA_BASE=/opt/tomcat/apache-tomcat-7.0.91 Environment='CATALINA_OPTS=-Xms512m -Xmx512m -server -XX:+UseParallelGC' Environment='JAVA_OPTS=-Djava.awt.headless=true -Djava.security.egd=file:/dev/./urandom' ExecStart=/opt/tomcat/apache-tomcat-7.0.91/bin/startup.sh ExecStop=/opt/tomcat/apache-tomcat-7.0.91/bin/shutdown.sh User=tomcat Group=tomcat UMask=0007 RestartSec=10 Restart=always [Install] WantedBy=multi-user.target Note You will likely encounter OutOfMemoryErrors with Tomcat's default memory settings. You may be able to get away with using 256m as the max heap size, but 512m is a good setting, even for production environments. Using more memory will allow you to cache more data, but does not always result in a better performing application. So there's no need in getting carried away. We've been using about 1024m in production for over a year and that suits us fine. If you are in a limited memory environment (like an EC2 t2.micro which only has 1GB of memory) you will need to reduce your memory settings a little more. Environment='CATALINA_OPTS=-Xms128m -Xmx256m -XX:MaxPermSize=128m -Djava.security.egd=file:/dev/./urandom -server -XX:+UseParallelGC' Unfortunately, with so little memory allocated you will probably run into several types of OutOfMemoryError issues (see Troublshooting section below).","title":"Create service"},{"location":"installation/ubuntu1804/tomcat/#register_service","text":"sudo systemctl daemon-reload","title":"Register service"},{"location":"installation/ubuntu1804/tomcat/#start_tomcat","text":"systemctl start tomcat","title":"Start Tomcat"},{"location":"installation/ubuntu1804/tomcat/#systemctl_commands","text":"systemctl start tomcat systemctl stop tomcat systemctl status tomcat","title":"Systemctl commands"},{"location":"installation/ubuntu1804/tomcat/#service_wrapper","text":"At this point I generally go back to using the Ubuntu's service wrapper which abstracts the underlying implementation (could be /etc/init.d , Upstart, or systemctl ). But it's up to you whether you want to continue using systemctl or switch back to service . Here are the commands available if using the service wrapper: sudo service tomcat status sudo service tomcat stop sudo service tomcat start sudo service tomcat restart","title":"Service wrapper"},{"location":"installation/ubuntu1804/tomcat/#configure_tomcat_manager_optional","text":"This configuration can be used to make future upgrades through the Tomcat manager web interface. Make sure the file is only readable by root and/or the user that runs Tomcat. Replace and with appropriate values. See Tomcat docs for more information (https://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html#Configuring_Manager_Application_Access). /opt/tomcat/apache-tomcat-7.0.91/conf/tomcat-users.xml tomcat-users role rolename= manager-gui / role rolename= manager-script / role rolename= manager-jmx / role rolename= manager-status / user username= MANAGER-GUI-USERNAME password= GUI-PASSWORD roles= manager-gui / user username= MANAGER-SCRIPT-USERNAME password= SCRIPT-PASSWORD roles= manager-script / /tomcat-users NOTE: Please don't use obvious passwords (i.e. tomcat, password, s3cret, etc) because your server will get exploited.","title":"Configure Tomcat manager (optional)"},{"location":"installation/ubuntu1804/troubleshooting/","text":"Uploads directory does not exist # Unable to load specified config location # You can ignore these errors because these files are only used to override the default openboxes-config.properties . Using configuration locations [classpath:openboxes-config.properties, classpath:openboxes-config.groovy, file:/opt/tomcat/.grails/openboxes-config.properties, file:/opt/tomcat/.grails/openboxes-config.groovy] [production] Unable to load specified config location classpath:openboxes-config.properties : class path resource [openboxes-config.properties] cannot be opened because it does not exist Unable to load specified config location classpath:openboxes-config.groovy : class path resource [openboxes-config.groovy] cannot be opened because it does not exist Unable to load specified config location file:/opt/tomcat/.grails/openboxes-config.groovy : /opt/tomcat/.grails/openboxes-config.groovy (No such file or directory) However, if the log shows that the following file could not be found, then we might have a problem. Check that the file exists and that the ownership and permissions on this file allow the tomcat user to read it. Unable to load specified config location file:/opt/tomcat/.grails/openboxes-config.properties : /opt/tomcat/.grails/openboxes-config.properties (No such file or directory) Java OutOfMemoryError # The following errors are related to the -Xms (min heap), -Xmx (max heap) , and -XX:MaxPermSize=256m (max perm gen space) memory settings. These errors indicate that the heap / permgen memory spaces are not allocated appropriately and/or there's a memory leak in the application. Heap space ( OutOfMemoryError: Java heap space ) PermGen ( OutOfMemoryError: PermGen space ) See [this article] (https://plumbr.eu/outofmemoryerror/java-heap-space) for a good description of the problem. Contact support@openboxes.com if you have further questions. Out of Memory: Killed process 31088 (java) # In this case, the Linux kernel has killed your Tomcat instance because it over stepped the OS bounds on memory. At this point, you may have increased the max heap size as much as you can. This probably means you need to upgrade to a larger instance type (i.e. as we mentioned above, an instance type that has 2GB of memory is a good start). java.io.FileNotFoundException: stacktrace.log (Permission denied) # You can safely ignore this error. log4j:ERROR setFile(null,true) call failed. java.io.FileNotFoundException: stacktrace.log (Permission denied) at java.io.FileOutputStream.open(Native Method) at java.io.FileOutputStream. init (FileOutputStream.java:221) at java.io.FileOutputStream. init (FileOutputStream.java:142) at org.apache.log4j.FileAppender.setFile(FileAppender.java:294) at org.apache.log4j.FileAppender.activateOptions(FileAppender.java:165) at org.apache.log4j.spi.OptionHandler$activateOptions.call(Unknown Source) at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:40) at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:116) at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:120) at org.codehaus.groovy.grails.plugins.logging.Log4jConfig.createFullstackTraceAppender(Log4jConfig.groovy:177) at org.codehaus.groovy.grails.plugins.logging.Log4jConfig.this$2$createFullstackTraceAppender(Log4jConfig.groovy) at org.codehaus.groovy.grails.plugins.logging.Log4jConfig$this$2$createFullstackTraceAppender.callCurrent(Unknown Source) at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:44) at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:141) at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:145) at org.codehaus.groovy.grails.plugins.logging.Log4jConfig.configure(Log4jConfig.groovy:145) at org.codehaus.groovy.grails.web.util.Log4jConfigListener.contextInitialized(Log4jConfigListener.java:62) at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:5157) at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5680) at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145) at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:1018) at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:994) at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:652) at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1127) at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:2021) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:473) at java.util.concurrent.FutureTask.run(FutureTask.java:262) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1152) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:622) at java.lang.Thread.run(Thread.java:748) Could not connect to SMTP host: localhost, port: 25; # By default, the system assumes that there's an SMTP server listening on port 25 so that it can send exceptions to errors@openboxes.com . This should probably be disabled by default. For now you can just ignore these errors. javax.mail.MessagingException: Could not connect to SMTP host: localhost, port: 25; nested exception is: java.net.ConnectException: Connection refused (Connection refused) MySQLSyntaxErrorException: Unknown column 'this_.created_by_id' in 'field list' # This is related to a bug / limitation with the Quartz scheduler. By default we can only limit the Quartz scheduler from starting tasks for up to X seconds. We cannot set dependencies such as \"when the database has been created\". Because of this limitation, the Quartz scheduler triggers all jobs during the application bootstrapping and before the database migrations have been completed. Therefore, some Quartz jobs which depend on the database are executed before the database is ready. Hence the \"Unknown column\" errors. Related issues: https://github.com/openboxes/openboxes/issues/26 https://github.com/openboxes/openboxes/issues/259 Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Unknown column 'this_.created_by_id' in 'field list' at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57) at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) at java.lang.reflect.Constructor.newInstance(Constructor.java:526) at com.mysql.jdbc.Util.handleNewInstance(Util.java:411) at com.mysql.jdbc.Util.getInstance(Util.java:386) at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1054) at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4190) at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4122) at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2570) at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2731) at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2818) at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2157) at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2324) at com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeQuery(NewProxyPreparedStatement.java:76) at org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:208) at org.hibernate.loader.Loader.getResultSet(Loader.java:1808) at org.hibernate.loader.Loader.doQuery(Loader.java:697) at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:259) at org.hibernate.loader.Loader.doList(Loader.java:2228) ... 75 more Once the database migration process has completed you should stop seeing these errors and the logs will show that the deployment has completed successfully. ... 2018-11-16 18:11:25,783 [localhost-startStop-1] INFO liquibase - Release Database Lock 2018-11-16 18:11:25,784 [localhost-startStop-1] INFO liquibase - Successfully released change log lock 2018-11-16 18:11:26,583 [localhost-startStop-1] INFO bootstrap.BootStrap - Finished running liquibase changelog(s)! 2018-11-16 18:11:26,584 [localhost-startStop-1] INFO bootstrap.BootStrap - Insert test fixtures? true 2018-11-16 18:11:26,585 [localhost-startStop-1] INFO bootstrap.BootStrap - Inserting test fixtures ... 2018-11-16 18:11:26,598 [localhost-startStop-1] INFO bootstrap.BootStrap - Creating uploads directory if it doesn't already exist 2018-11-16 18:11:26,598 [localhost-startStop-1] INFO context.ContextLoader - Root WebApplicationContext: initialization completed in 523311 ms Nov 16, 2018 6:11:26 PM org.apache.catalina.startup.HostConfig deployWAR INFO: Deployment of web application archive /opt/tomcat/apache-tomcat-7.0.91/webapps/openboxes.war has finished in 545,140 ms Nov 16, 2018 6:11:27 PM org.apache.coyote.AbstractProtocol start INFO: Starting ProtocolHandler [ http-bio-8080 ] Nov 16, 2018 6:11:27 PM org.apache.coyote.AbstractProtocol start INFO: Starting ProtocolHandler [ ajp-bio-8009 ] Nov 16, 2018 6:11:27 PM org.apache.catalina.startup.Catalina start INFO: Server startup in 546085 ms","title":"Troubleshooting"},{"location":"installation/ubuntu1804/troubleshooting/#uploads_directory_does_not_exist","text":"","title":"Uploads directory does not exist"},{"location":"installation/ubuntu1804/troubleshooting/#unable_to_load_specified_config_location","text":"You can ignore these errors because these files are only used to override the default openboxes-config.properties . Using configuration locations [classpath:openboxes-config.properties, classpath:openboxes-config.groovy, file:/opt/tomcat/.grails/openboxes-config.properties, file:/opt/tomcat/.grails/openboxes-config.groovy] [production] Unable to load specified config location classpath:openboxes-config.properties : class path resource [openboxes-config.properties] cannot be opened because it does not exist Unable to load specified config location classpath:openboxes-config.groovy : class path resource [openboxes-config.groovy] cannot be opened because it does not exist Unable to load specified config location file:/opt/tomcat/.grails/openboxes-config.groovy : /opt/tomcat/.grails/openboxes-config.groovy (No such file or directory) However, if the log shows that the following file could not be found, then we might have a problem. Check that the file exists and that the ownership and permissions on this file allow the tomcat user to read it. Unable to load specified config location file:/opt/tomcat/.grails/openboxes-config.properties : /opt/tomcat/.grails/openboxes-config.properties (No such file or directory)","title":"Unable to load specified config location"},{"location":"installation/ubuntu1804/troubleshooting/#java_outofmemoryerror","text":"The following errors are related to the -Xms (min heap), -Xmx (max heap) , and -XX:MaxPermSize=256m (max perm gen space) memory settings. These errors indicate that the heap / permgen memory spaces are not allocated appropriately and/or there's a memory leak in the application. Heap space ( OutOfMemoryError: Java heap space ) PermGen ( OutOfMemoryError: PermGen space ) See [this article] (https://plumbr.eu/outofmemoryerror/java-heap-space) for a good description of the problem. Contact support@openboxes.com if you have further questions.","title":"Java OutOfMemoryError"},{"location":"installation/ubuntu1804/troubleshooting/#out_of_memory_killed_process_31088_java","text":"In this case, the Linux kernel has killed your Tomcat instance because it over stepped the OS bounds on memory. At this point, you may have increased the max heap size as much as you can. This probably means you need to upgrade to a larger instance type (i.e. as we mentioned above, an instance type that has 2GB of memory is a good start).","title":"Out of Memory: Killed process 31088 (java)"},{"location":"installation/ubuntu1804/troubleshooting/#javaiofilenotfoundexception_stacktracelog_permission_denied","text":"You can safely ignore this error. log4j:ERROR setFile(null,true) call failed. java.io.FileNotFoundException: stacktrace.log (Permission denied) at java.io.FileOutputStream.open(Native Method) at java.io.FileOutputStream. init (FileOutputStream.java:221) at java.io.FileOutputStream. init (FileOutputStream.java:142) at org.apache.log4j.FileAppender.setFile(FileAppender.java:294) at org.apache.log4j.FileAppender.activateOptions(FileAppender.java:165) at org.apache.log4j.spi.OptionHandler$activateOptions.call(Unknown Source) at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:40) at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:116) at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:120) at org.codehaus.groovy.grails.plugins.logging.Log4jConfig.createFullstackTraceAppender(Log4jConfig.groovy:177) at org.codehaus.groovy.grails.plugins.logging.Log4jConfig.this$2$createFullstackTraceAppender(Log4jConfig.groovy) at org.codehaus.groovy.grails.plugins.logging.Log4jConfig$this$2$createFullstackTraceAppender.callCurrent(Unknown Source) at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:44) at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:141) at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:145) at org.codehaus.groovy.grails.plugins.logging.Log4jConfig.configure(Log4jConfig.groovy:145) at org.codehaus.groovy.grails.web.util.Log4jConfigListener.contextInitialized(Log4jConfigListener.java:62) at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:5157) at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5680) at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145) at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:1018) at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:994) at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:652) at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1127) at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:2021) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:473) at java.util.concurrent.FutureTask.run(FutureTask.java:262) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1152) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:622) at java.lang.Thread.run(Thread.java:748)","title":"java.io.FileNotFoundException: stacktrace.log (Permission denied)"},{"location":"installation/ubuntu1804/troubleshooting/#could_not_connect_to_smtp_host_localhost_port_25","text":"By default, the system assumes that there's an SMTP server listening on port 25 so that it can send exceptions to errors@openboxes.com . This should probably be disabled by default. For now you can just ignore these errors. javax.mail.MessagingException: Could not connect to SMTP host: localhost, port: 25; nested exception is: java.net.ConnectException: Connection refused (Connection refused)","title":"Could not connect to SMTP host: localhost, port: 25;"},{"location":"installation/ubuntu1804/troubleshooting/#mysqlsyntaxerrorexception_unknown_column_this_created_by_id_in_field_list","text":"This is related to a bug / limitation with the Quartz scheduler. By default we can only limit the Quartz scheduler from starting tasks for up to X seconds. We cannot set dependencies such as \"when the database has been created\". Because of this limitation, the Quartz scheduler triggers all jobs during the application bootstrapping and before the database migrations have been completed. Therefore, some Quartz jobs which depend on the database are executed before the database is ready. Hence the \"Unknown column\" errors. Related issues: https://github.com/openboxes/openboxes/issues/26 https://github.com/openboxes/openboxes/issues/259 Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Unknown column 'this_.created_by_id' in 'field list' at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57) at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) at java.lang.reflect.Constructor.newInstance(Constructor.java:526) at com.mysql.jdbc.Util.handleNewInstance(Util.java:411) at com.mysql.jdbc.Util.getInstance(Util.java:386) at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1054) at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4190) at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4122) at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2570) at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2731) at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2818) at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2157) at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2324) at com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeQuery(NewProxyPreparedStatement.java:76) at org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:208) at org.hibernate.loader.Loader.getResultSet(Loader.java:1808) at org.hibernate.loader.Loader.doQuery(Loader.java:697) at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:259) at org.hibernate.loader.Loader.doList(Loader.java:2228) ... 75 more Once the database migration process has completed you should stop seeing these errors and the logs will show that the deployment has completed successfully. ... 2018-11-16 18:11:25,783 [localhost-startStop-1] INFO liquibase - Release Database Lock 2018-11-16 18:11:25,784 [localhost-startStop-1] INFO liquibase - Successfully released change log lock 2018-11-16 18:11:26,583 [localhost-startStop-1] INFO bootstrap.BootStrap - Finished running liquibase changelog(s)! 2018-11-16 18:11:26,584 [localhost-startStop-1] INFO bootstrap.BootStrap - Insert test fixtures? true 2018-11-16 18:11:26,585 [localhost-startStop-1] INFO bootstrap.BootStrap - Inserting test fixtures ... 2018-11-16 18:11:26,598 [localhost-startStop-1] INFO bootstrap.BootStrap - Creating uploads directory if it doesn't already exist 2018-11-16 18:11:26,598 [localhost-startStop-1] INFO context.ContextLoader - Root WebApplicationContext: initialization completed in 523311 ms Nov 16, 2018 6:11:26 PM org.apache.catalina.startup.HostConfig deployWAR INFO: Deployment of web application archive /opt/tomcat/apache-tomcat-7.0.91/webapps/openboxes.war has finished in 545,140 ms Nov 16, 2018 6:11:27 PM org.apache.coyote.AbstractProtocol start INFO: Starting ProtocolHandler [ http-bio-8080 ] Nov 16, 2018 6:11:27 PM org.apache.coyote.AbstractProtocol start INFO: Starting ProtocolHandler [ ajp-bio-8009 ] Nov 16, 2018 6:11:27 PM org.apache.catalina.startup.Catalina start INFO: Server startup in 546085 ms","title":"MySQLSyntaxErrorException: Unknown column 'this_.created_by_id' in 'field list'"},{"location":"installation/ubuntu1804/ubuntu/","text":"Update package information # sudo apt-get update Upgrade packages already installed # sudo apt-get upgrade Install various packages # sudo apt-get install vim sudo apt-get install gzip sudo apt-get install unzip sudo apt-get install mailutils sudo apt-get install cron sudo apt-get install locate Configure unattended updates #","title":"Ubuntu"},{"location":"installation/ubuntu1804/ubuntu/#update_package_information","text":"sudo apt-get update","title":"Update package information"},{"location":"installation/ubuntu1804/ubuntu/#upgrade_packages_already_installed","text":"sudo apt-get upgrade","title":"Upgrade packages already installed"},{"location":"installation/ubuntu1804/ubuntu/#install_various_packages","text":"sudo apt-get install vim sudo apt-get install gzip sudo apt-get install unzip sudo apt-get install mailutils sudo apt-get install cron sudo apt-get install locate","title":"Install various packages"},{"location":"installation/ubuntu1804/ubuntu/#configure_unattended_updates","text":"","title":"Configure unattended updates"},{"location":"installation/ubuntu1804/upgrading/","text":"","title":"Upgrading"},{"location":"support/","text":"Support # Community Support # If you have questions, concerns, or issues with the software, documentation, or anything else please consider using the discussion forum or issue tracking software. Ask questions, find answers on our discussion forum File a bug report Request a new feature Suggest an improvement to existing features Professional Support # If you need help installing, configuring, or implementing the software we provide professional services Find out about professional services that we offer Send inquiries to support@openboxes.com","title":"Support"},{"location":"support/#support","text":"","title":"Support"},{"location":"support/#community_support","text":"If you have questions, concerns, or issues with the software, documentation, or anything else please consider using the discussion forum or issue tracking software. Ask questions, find answers on our discussion forum File a bug report Request a new feature Suggest an improvement to existing features","title":"Community Support"},{"location":"support/#professional_support","text":"If you need help installing, configuring, or implementing the software we provide professional services Find out about professional services that we offer Send inquiries to support@openboxes.com","title":"Professional Support"},{"location":"upgrading/","text":"Upgrading # Using Command Line (Ubuntu) # SSH into your server Download WAR file from latest release page on GitHub wget https://github.com/openboxes/openboxes/releases/download/ release-tag /openboxes.war Shutdown tomcat Remove existing deployment sudo rm -rf /var/lib/tomcat7/webapps/openboxes* Copy WAR file to Tomcat webapps directory (NOTE: we need to change the name of the WAR file) sudo cp openboxes- release-tag .war /var/lib/tomcat7/webapps/openboxes.war Start Tomcat (NOTE: this may take awhile if there are lots of data migrations) Check the logs sudo tail -f /var/logs/tomcat7/catalina.out Using Tomcat Manager # Install Tomcat manager sudo apt-get install tomcat-admin Add a new user in tomcat-users.xml ( /usr/share/tomcat7/conf/tomcat-users.xml ) user username=\" username \" password=\" password \" roles=\"manager-gui\"/ Restart Tomcat Download WAR file from latest release page on GitHub wget https://github.com/openboxes/openboxes/releases/download/ release-tag /openboxes.war Log into Tomcat Manager (using username/password from Step 2) Upload WAR file to Tomcat Manager Restart Tomcat from the command line (optional, but hightly recommended)","title":"Upgrading"},{"location":"upgrading/#upgrading","text":"","title":"Upgrading"},{"location":"upgrading/#using_command_line_ubuntu","text":"SSH into your server Download WAR file from latest release page on GitHub wget https://github.com/openboxes/openboxes/releases/download/ release-tag /openboxes.war Shutdown tomcat Remove existing deployment sudo rm -rf /var/lib/tomcat7/webapps/openboxes* Copy WAR file to Tomcat webapps directory (NOTE: we need to change the name of the WAR file) sudo cp openboxes- release-tag .war /var/lib/tomcat7/webapps/openboxes.war Start Tomcat (NOTE: this may take awhile if there are lots of data migrations) Check the logs sudo tail -f /var/logs/tomcat7/catalina.out","title":"Using Command Line (Ubuntu)"},{"location":"upgrading/#using_tomcat_manager","text":"Install Tomcat manager sudo apt-get install tomcat-admin Add a new user in tomcat-users.xml ( /usr/share/tomcat7/conf/tomcat-users.xml ) user username=\" username \" password=\" password \" roles=\"manager-gui\"/ Restart Tomcat Download WAR file from latest release page on GitHub wget https://github.com/openboxes/openboxes/releases/download/ release-tag /openboxes.war Log into Tomcat Manager (using username/password from Step 2) Upload WAR file to Tomcat Manager Restart Tomcat from the command line (optional, but hightly recommended)","title":"Using Tomcat Manager"},{"location":"user-guide/","text":"Introduction # Please be patient as our documentation expert (a.k.a our lead developer) is busy making the software not suck so he's had some trouble finding time to update these guides. If you would like to contribute to this User Guide, please refer to the (contributing page)[../developer-guide/contributing.md]. If you would prefer to submit documentation updates as Word docs or collaborate with us using Google Docs, please share the docs or links with our Support Team support@openboxes.com . If you're impatient, not good at words stuff, and would prefer to see User Guide completed pronto, please feel free to light a fire under our documentation expert. The most effective way to do that would be to shame him through any of the public support channels (i.e. Twitter, Slack, Google Groups, highway billboards, etc).","title":"Users"},{"location":"user-guide/#introduction","text":"Please be patient as our documentation expert (a.k.a our lead developer) is busy making the software not suck so he's had some trouble finding time to update these guides. If you would like to contribute to this User Guide, please refer to the (contributing page)[../developer-guide/contributing.md]. If you would prefer to submit documentation updates as Word docs or collaborate with us using Google Docs, please share the docs or links with our Support Team support@openboxes.com . If you're impatient, not good at words stuff, and would prefer to see User Guide completed pronto, please feel free to light a fire under our documentation expert. The most effective way to do that would be to shame him through any of the public support channels (i.e. Twitter, Slack, Google Groups, highway billboards, etc).","title":"Introduction"}]}